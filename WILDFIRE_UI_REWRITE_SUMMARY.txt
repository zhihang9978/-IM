═══════════════════════════════════════════════════════════════
  野火IM UI完整复刻 - 执行摘要（防遗忘清单）
═══════════════════════════════════════════════════════════════

📌 总体目标: 完整复刻野火IM的UI、交互、逻辑到蓝信项目
📌 参考项目: android-chat-master/ (野火IM)
📌 总时间: 7-10天（分4-5个对话）
📌 主计划: WILDFIRE_UI_COMPLETE_REWRITE_MASTER_PLAN.txt

═══════════════════════════════════════════════════════════════
✅ 14个阶段清单（打勾追踪进度）
═══════════════════════════════════════════════════════════════

【第一部分：消息类型UI】3天
  ✅ 阶段1: 文本消息气泡（已完成）
  ⏳ 阶段2: 语音消息UI（4h）
  ⏳ 阶段3: 图片消息UI（3h）
  ⏳ 阶段4: 视频消息UI（2h）
  ⏳ 阶段5: 文件消息UI（3h）

【第二部分：聊天界面】2天
  ⏳ 阶段6: 聊天主界面布局（6h）
  ⏳ 阶段7: 输入面板完整实现（6h）
  ⏳ 阶段8: 扩展功能面板（3h）

【第三部分：列表界面】2天
  ⏳ 阶段9: 会话列表UI（6h）
  ⏳ 阶段10: 联系人列表UI（5h）
  ⏳ 阶段11: 用户信息页UI（4h）

【第四部分：交互优化】2-3天
  ⏳ 阶段12: 长按菜单和手势（4h）
  ⏳ 阶段13: 动画和过渡效果（5h）
  ⏳ 阶段14: 最终优化和测试（6h）

总计: 14个阶段，约60小时

═══════════════════════════════════════════════════════════════
📦 需要提取的完整资源（防遗漏）
═══════════════════════════════════════════════════════════════

【9-Patch背景】2个
  ✅ img_bubble_send.9.png
  ✅ img_bubble_receive.9.png

【语音动画图标】6个
  ⏳ audio_animation_list_right_1.png
  ⏳ audio_animation_list_right_2.png
  ⏳ audio_animation_list_right_3.png
  ⏳ audio_animation_list_left_1.png
  ⏳ audio_animation_list_left_2.png
  ⏳ audio_animation_list_left_3.png

【输入面板图标】5个
  ⏳ ic_chat_voice.png
  ⏳ ic_chat_keyboard.png
  ⏳ ic_chat_emo.png
  ⏳ ic_chat_add.png
  ⏳ ic_chat_menu.png

【扩展功能图标】8个
  ⏳ ic_func_pic.png（相册）
  ⏳ ic_func_shot.png（拍摄）
  ⏳ ic_func_location.png（位置）
  ⏳ ic_func_file.png（文件）
  ⏳ ic_func_video.png（视频）
  ⏳ ic_func_voice.png（语音）
  ⏳ ic_user_card.png（名片）

【文件类型图标】9个
  ⏳ ic_file_type_pdf.png
  ⏳ ic_file_type_word.png
  ⏳ ic_file_type_excel.png
  ⏳ ic_file_type_ppt.png
  ⏳ ic_file_type_image.png
  ⏳ ic_file_type_video.png
  ⏳ ic_file_type_audio.png
  ⏳ ic_file_type_zip.png
  ⏳ ic_file_type_unknown.png

【消息菜单图标】8个
  ⏳ ic_msg_copy.png
  ⏳ ic_msg_forward.png
  ⏳ ic_msg_collect.png
  ⏳ ic_msg_rollback.png（撤回）
  ⏳ ic_msg_delete.png
  ⏳ ic_msg_quote.png（引用）
  ⏳ ic_msg_select.png
  ⏳ ic_msg_resend.png

【其他关键图标】10个
  ⏳ img_video_play_session.png（视频播放）
  ⏳ img_video_default.png（视频封面）
  ⏳ ic_new_friend.png
  ⏳ ic_group_chat.png
  ⏳ ic_right_arrow.png
  ⏳ ic_search.png
  ⏳ ic_add.png
  ⏳ ic_back.png
  ⏳ qr_code.png
  ⏳ ic_session_info.png

图标总计: 约55个

【Shape/Drawable】15个
  ✅ shape_message_ref_bg.xml
  ⏳ shape_session_text_input.xml（输入框）
  ⏳ shape_session_btn_send.xml（发送按钮）
  ⏳ shape_session_btn_voice_normal.xml
  ⏳ shape_session_btn_voice_pressed.xml
  ⏳ shape_red_dot.xml（未读徽章）
  ⏳ shape_unread_message_count_label_bg.xml
  ⏳ selector_stick_top_item.xml（置顶背景）
  ⏳ selector_common_item.xml
  ⏳ audio_animation_send_wf.xml
  ⏳ audio_animation_receive_wf.xml

【Layout布局】20个
  ✅ item_message_sent_wildfire.xml
  ✅ item_message_received_wildfire.xml
  ⏳ item_message_voice_sent_wildfire.xml
  ⏳ item_message_voice_received_wildfire.xml
  ⏳ item_message_image_sent_wildfire.xml
  ⏳ item_message_image_received_wildfire.xml
  ⏳ item_message_video_sent_wildfire.xml
  ⏳ item_message_video_received_wildfire.xml
  ⏳ item_message_file_sent_wildfire.xml
  ⏳ item_message_file_received_wildfire.xml
  ⏳ activity_chat_wildfire.xml
  ⏳ toolbar_chat_wildfire.xml
  ⏳ chat_input_panel_wildfire.xml
  ⏳ dialog_more_options_wildfire.xml
  ⏳ item_conversation_wildfire.xml
  ⏳ item_contact_wildfire.xml
  ⏳ contact_header_friend_wildfire.xml
  ⏳ fragment_user_info_wildfire.xml
  ⏳ option_item_wildfire.xml
  ⏳ menu_message_context_wildfire.xml

【配置文件】4个
  ✅ colors.xml（部分合并）
  ⏳ colors.xml（完整合并）
  ⏳ dimens.xml（完整合并）
  ⏳ styles.xml（选择性提取）
  ⏳ strings.xml（选择性添加）

═══════════════════════════════════════════════════════════════
🎯 关键复刻要点（不能遗忘）
═══════════════════════════════════════════════════════════════

UI设计要点:
  ✅ 9-patch气泡（带尾巴和阴影）
  ✅ 颜色系统（#3B62E0主色）
  ⏳ 消息最大宽度240dp
  ⏳ 头像尺寸：消息40dp，会话48dp，详情80dp
  ⏳ 字体统一：16sp/14sp/12sp
  ⏳ 间距统一：16dp/12dp/8dp
  ⏳ 圆角统一：8dp/4dp

交互要点:
  ⏳ autoLink自动识别链接
  ⏳ 长按消息显示完整菜单（8项）
  ⏳ 左滑删除会话
  ⏳ 下拉加载历史消息
  ⏳ 未读消息提示悬浮按钮
  ⏳ @消息快速定位
  ⏳ 语音/文本模式平滑切换
  ⏳ 表情面板显示/隐藏
  ⏳ 扩展面板显示/隐藏

功能要点:
  ⏳ 引用消息支持
  ⏳ 消息状态图标（发送中/失败/已读）
  ⏳ 草稿保存和显示
  ⏳ 置顶会话背景区分
  ⏳ 免打扰图标显示
  ⏳ 字母分组联系人
  ⏳ 快速索引条
  ⏳ 语音转文字UI

逻辑要点:
  ✅ 保留蓝信的数据模型（Message、User等）
  ✅ 保留蓝信的API调用（RetrofitClient）
  ✅ 保留蓝信的业务逻辑
  ⏳ 复刻野火IM的UI交互逻辑
  ⏳ 复刻野火IM的状态管理
  ⏳ 复刻野火IM的动画效果

═══════════════════════════════════════════════════════════════
🔍 每个对话必须检查的内容
═══════════════════════════════════════════════════════════════

对话开始时:
  1. □ 读取主计划文档
  2. □ 读取进度文档
  3. □ 确认上个阶段已完成
  4. □ 定位到当前阶段

执行过程中:
  1. □ 严格按照主计划步骤执行
  2. □ 复制所有需要的资源
  3. □ 创建所有需要的布局
  4. □ 更新所有相关代码
  5. □ 保留所有业务逻辑

完成后:
  1. □ 测试所有功能正常
  2. □ 无编译错误
  3. □ Git提交
  4. □ 更新进度文档
  5. □ 记录下个阶段起点

═══════════════════════════════════════════════════════════════
📋 给新对话的标准启动指令
═══════════════════════════════════════════════════════════════

【完整版指令】复制粘贴给新对话:

```
任务: 野火IM UI完整复刻 - 继续执行

必读文档（按顺序）:
1. read_file: WILDFIRE_UI_REWRITE_SUMMARY.txt（本摘要）
2. read_file: WILDFIRE_UI_COMPLETE_REWRITE_MASTER_PLAN.txt（总计划）
3. read_file: UI_EXTRACTION_PROGRESS.md（进度追踪）
4. read_file: UI交互设计文档.md（野火IM分析）

确认环境:
- 野火IM路径: android-chat-master/
- 蓝信路径: apps/android/
- 当前已完成: 阶段1（文本消息）

执行方式:
请告诉我从哪个阶段开始（阶段2-14），我将严格按照主计划执行。

每个阶段包含:
1. 复制图标资源
2. 创建布局文件
3. 更新Kotlin代码
4. 测试编译
5. Git提交
6. 更新进度文档

关键原则:
✅ 完整复刻UI和交互
✅ 保留蓝信业务逻辑
✅ 每个阶段独立提交
✅ 详细记录进度

请从阶段2开始执行。
```

═══════════════════════════════════════════════════════════════
🎯 阶段执行标准流程（每个阶段都这样做）
═══════════════════════════════════════════════════════════════

步骤1: 读取主计划，定位当前阶段
步骤2: 读取野火IM参考文件
步骤3: 分析设计要点
步骤4: 复制所需图标和资源
步骤5: 创建新的布局文件
步骤6: 更新Kotlin代码
步骤7: 测试编译和功能
步骤8: Git提交
步骤9: 更新进度文档
步骤10: 标记当前阶段完成

═══════════════════════════════════════════════════════════════
📊 完成度追踪
═══════════════════════════════════════════════════════════════

当前进度: 1/14阶段（7%）

第一部分（阶段1-5）: 1/5（20%）
第二部分（阶段6-8）: 0/3（0%）
第三部分（阶段9-11）: 0/3（0%）
第四部分（阶段12-14）: 0/3（0%）

═══════════════════════════════════════════════════════════════
🔑 核心文件位置（快速参考）
═══════════════════════════════════════════════════════════════

野火IM关键目录:
  - 布局: android-chat-master/uikit/src/main/res/layout/
  - 图标: android-chat-master/uikit/src/main/res/mipmap-hdpi/
  - Drawable: android-chat-master/uikit/src/main/res/drawable/
  - 配置: android-chat-master/uikit/src/main/res/values/
  - 代码: android-chat-master/uikit/src/main/java/cn/wildfire/chat/kit/

蓝信目标目录:
  - 布局: apps/android/app/src/main/res/layout/
  - 图标: apps/android/app/src/main/res/mipmap-hdpi/
  - Drawable: apps/android/app/src/main/res/drawable/
  - 配置: apps/android/app/src/main/res/values/
  - 代码: apps/android/app/src/main/java/com/lanxin/im/

═══════════════════════════════════════════════════════════════
✅ 使用这个摘要避免遗忘
═══════════════════════════════════════════════════════════════

每次开始新对话时:
  1. ✅ 读取本摘要
  2. ✅ 读取主计划
  3. ✅ 读取进度文档
  4. ✅ 确认当前阶段
  5. ✅ 按标准流程执行

每个阶段完成后:
  1. ✅ 在本文件中打勾标记
  2. ✅ 更新进度文档
  3. ✅ Git提交
  4. ✅ 记录遇到的问题

所有阶段完成后:
  1. ✅ 全面测试
  2. ✅ 创建最终报告
  3. ✅ UI质量达到90分+

═══════════════════════════════════════════════════════════════

