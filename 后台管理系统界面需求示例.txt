<!DOCTYPE html><html lang="zh-CN" class="h-full"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>登录 - 通讯软件后台管理系统</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        fontFamily: {
          sans: ['Inter', 'sans-serif'],
        },
        extend: {
          colors: {
            primary: '#3b82f6',
            success: '#10b981',
            warning: '#f59e0b',
            error: '#ef4444',
            background: {
              light: '#f8fafc',
              dark: '#1f2937'
            }
          }
        }
      },
      darkMode: 'class',
    }
  </script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
      height: 100%;
      margin: 0;
      padding: 0;
      color: #1f2937;
    }
    .dark body {
      background-color: #111827;
      color: #f3f4f6;
    }
    .login-container {
      display: flex;
      height: 100vh;
    }
    .login-sidebar {
      background-color: #3b82f6;
      background-image: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      color: white;
      padding: 40px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .login-form-container {
      padding: 40px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .dark .login-form-container {
      background-color: #111827;
    }
    @media (max-width: 768px) {
      .login-container {
        flex-direction: column;
      }
      .login-sidebar {
        min-height: 200px;
        padding: 20px;
      }
      .login-form-container {
        flex: 1;
      }
    }
  </style>
</head>
<body class="h-full dark:bg-gray-900">
  <div class="login-container">
    <!-- 左侧区域 -->
    <div class="login-sidebar hidden md:flex md:w-2/5 lg:w-1/3">
      <div class="w-full">
        <div class="mb-8">
          <div class="flex items-center">
            <span class="iconify text-3xl" data-icon="mdi:application"></span>
            <h1 class="text-2xl font-bold ml-3">通讯管理系统</h1>
          </div>
          <p class="mt-2 text-blue-100">高效、安全的通讯平台后台管理系统</p>
        </div>
        
        <div class="hidden md:block">
          <div class="mb-8">
            <div class="text-xl font-semibold mb-4">系统特点</div>
            <ul class="space-y-3 text-blue-100">
              <li class="flex items-center">
                <span class="iconify mr-2" data-icon="mdi:check-circle"></span>
                用户管理与权限控制
              </li>
              <li class="flex items-center">
                <span class="iconify mr-2" data-icon="mdi:check-circle"></span>
                实时消息监控与分析
              </li>
              <li class="flex items-center">
                <span class="iconify mr-2" data-icon="mdi:check-circle"></span>
                高级数据可视化图表
              </li>
              <li class="flex items-center">
                <span class="iconify mr-2" data-icon="mdi:check-circle"></span>
                安全加密与数据保护
              </li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="mt-auto text-sm text-blue-100">
        © 2025 通讯管理系统. 版权所有
      </div>
    </div>

    <!-- 右侧登录表单 -->
    <div class="login-form-container flex-1">
      <div class="max-w-md w-full mx-auto">
        <div class="mb-8">
          <!-- 手机版显示logo -->
          <div class="flex md:hidden items-center mb-8">
            <span class="iconify text-3xl text-primary" data-icon="mdi:application"></span>
            <h1 class="text-2xl font-bold ml-3 dark:text-white">通讯管理系统</h1>
          </div>
          
          <h2 class="text-3xl font-bold dark:text-white">欢迎回来</h2>
          <p class="text-gray-500 mt-2 dark:text-gray-400">请登录您的管理员账户</p>
        </div>

        <form id="loginForm">
          <div class="mb-4">
            <label for="username" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">账号</label>
            <div class="relative">
              <span class="absolute left-3 top-2.5 text-gray-400">
                <span class="iconify" data-icon="mdi:account"></span>
              </span>
              <input id="username" name="username" type="text" autocomplete="username" required="" class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white" placeholder="请输入账号/手机号/邮箱">
            </div>
          </div>

          <div class="mb-6">
            <div class="flex items-center justify-between mb-1">
              <label for="password" class="block text-sm font-medium text-gray-700 dark:text-gray-300">密码</label>
              <a href="#" class="text-xs text-primary hover:text-blue-700">忘记密码?</a>
            </div>
            <div class="relative">
              <span class="absolute left-3 top-2.5 text-gray-400">
                <span class="iconify" data-icon="mdi:lock"></span>
              </span>
              <input id="password" name="password" type="password" autocomplete="current-password" required="" class="w-full pl-10 pr-10 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white" placeholder="请输入密码">
              <button type="button" id="togglePassword" class="absolute right-2 top-2.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                <span class="iconify" data-icon="mdi:eye"></span>
              </button>
            </div>
          </div>

          <div class="flex items-center mb-6">
            <input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 text-primary focus:ring-blue-500 border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600">
            <label for="remember-me" class="ml-2 block text-sm text-gray-700 dark:text-gray-300">
              记住我
            </label>
          </div>

          <div>
            <button type="submit" class="w-full py-2.5 px-4 bg-primary hover:bg-blue-600 text-white rounded-lg flex justify-center items-center">
              <span class="iconify mr-2" data-icon="mdi:login"></span>
              登录
            </button>
          </div>
        </form>

        <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
          <div class="flex justify-between items-center">
            <button id="themeToggle" class="flex items-center text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300">
              <span class="iconify mr-1" data-icon="mdi:theme-light-dark"></span>
              <span id="themeText">切换深色模式</span>
            </button>
            <div>
              <select class="text-sm text-gray-500 border-none bg-transparent dark:text-gray-400 focus:ring-0">
                <option>简体中文</option>
                <option>English</option>
                <option>繁體中文</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 密码显示切换
      const togglePassword = document.getElementById('togglePassword');
      const password = document.getElementById('password');
      
      togglePassword.addEventListener('click', function() {
        const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
        password.setAttribute('type', type);
        
        // 切换图标
        const icon = type === 'password' ? 'mdi:eye' : 'mdi:eye-off';
        togglePassword.querySelector('.iconify').setAttribute('data-icon', icon);
      });
      
      // 深色模式切换
      const themeToggle = document.getElementById('themeToggle');
      const html = document.querySelector('html');
      const themeText = document.getElementById('themeText');
      
      themeToggle.addEventListener('click', function() {
        if (html.classList.contains('dark')) {
          html.classList.remove('dark');
          localStorage.setItem('theme', 'light');
          themeText.textContent = '切换深色模式';
        } else {
          html.classList.add('dark');
          localStorage.setItem('theme', 'dark');
          themeText.textContent = '切换浅色模式';
        }
      });
      
      // 检查本地存储的主题设置
      if (localStorage.getItem('theme') === 'dark' || 
          (localStorage.getItem('theme') === null && 
           window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        html.classList.add('dark');
        themeText.textContent = '切换浅色模式';
      } else {
        html.classList.remove('dark');
        themeText.textContent = '切换深色模式';
      }
      
      // 登录表单提交
      const loginForm = document.getElementById('loginForm');
      loginForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // 获取表单数据
        const username = document.getElementById('username').value;
        const password = document.getElementById('password').value;
        const rememberMe = document.getElementById('remember-me').checked;
        
        console.log('登录信息:', { username, password, rememberMe });
        
        // 简单的登录验证逻辑（实际应用中应该使用服务器验证）
        if (username && password) {
          // 设置登录状态
          localStorage.setItem('isLoggedIn', 'true');
          // 跳转到首页
          window.location.href = 'index.html';
        } else {
          alert('请输入用户名和密码');
        }
      });
    });
  </script>




  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>个人中心 - 通讯软件后台管理系统</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        fontFamily: {
          sans: ['Inter', 'sans-serif'],
        },
        extend: {
          colors: {
            primary: '#3b82f6',
            success: '#10b981',
            warning: '#f59e0b',
            error: '#ef4444',
            background: {
              light: '#f8fafc',
              dark: '#1f2937'
            }
          }
        }
      },
      darkMode: 'class',
    }
  </script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
      height: 100%;
      margin: 0;
      padding: 0;
      color: #1f2937;
    }
    .dark body {
      background-color: #111827;
      color: #f3f4f6;
    }
    .dashboard-container {
      max-width: 1440px;
      min-height: 100vh;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 240px 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas: 
        "sidebar topbar"
        "sidebar main";
    }
    .sidebar {
      grid-area: sidebar;
      border-right: 1px solid #e5e7eb;
      background: #f8fafc;
      padding: 24px 0;
    }
    .dark .sidebar {
      background: #1f2937;
      border-right: 1px solid #374151;
    }
    .topbar {
      grid-area: topbar;
      background: #ffffff;
      border-bottom: 1px solid #e5e7eb;
      padding: 16px 32px;
    }
    .dark .topbar {
      background: #1f2937;
      border-bottom: 1px solid #374151;
    }
    .main-content {
      grid-area: main;
      background: #f9fafb;
      padding: 24px;
      overflow-y: auto;
    }
    .dark .main-content {
      background: #111827;
    }
    .card {
      background: #ffffff;
      border-radius: 8px;
      padding: 20px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }
    .dark .card {
      background: #1f2937;
      border: 1px solid #374151;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
    }
    .nav-item {
      padding: 12px 24px;
      font-size: 14px;
      color: #4b5563;
      border-left: 3px solid transparent;
      transition: all 0.2s;
    }
    .dark .nav-item {
      color: #d1d5db;
    }
    .nav-item:hover, .nav-item.active {
      background: #f1f5f9;
      border-left: 3px solid #3b82f6;
      color: #3b82f6;
    }
    .dark .nav-item:hover, .dark .nav-item.active {
      background: #1a2435;
    }
    .notification-dot {
      top: -2px;
      right: -2px;
      width: 8px;
      height: 8px;
      background-color: #ef4444;
    }
    .profile-nav-item {
      padding: 10px 16px;
      border-radius: 6px;
      margin-bottom: 4px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .profile-nav-item:hover {
      background-color: #f3f4f6;
    }
    .dark .profile-nav-item:hover {
      background-color: #1e293b;
    }
    .profile-nav-item.active {
      background-color: #3b82f6;
      color: white;
    }
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .modal.active {
      opacity: 1;
      pointer-events: auto;
    }
    .modal-content {
      background: white;
      border-radius: 8px;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      transform: translateY(20px);
      transition: transform 0.3s;
    }
    .dark .modal-content {
      background: #1f2937;
    }
    .modal.active .modal-content {
      transform: translateY(0);
    }
    @media (max-width: 1024px) {
      .dashboard-container {
        grid-template-columns: 200px 1fr;
      }
    }
    @media (max-width: 768px) {
      .dashboard-container {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "topbar"
          "main";
      }
      .sidebar {
        display: none;
      }
    }
  </style>


  <div class="dashboard-container">
    <!-- 左侧导航 -->
    <div class="sidebar">
      <div class="flex items-center px-6 mb-8">
        <span class="iconify text-2xl text-primary" data-icon="mdi:application"></span>
        <h1 class="text-xl font-bold ml-3 dark:text-white">通讯管理系统</h1>
      </div>
      <nav class="space-y-1">
        <a href="index.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:home"></span> 仪表盘
        </a>
        <a href="user-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-group"></span> 用户管理
        </a>
        <a href="message-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-processing"></span> 消息管理
        </a>
        <a href="group-chat-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-text"></span> 群聊管理
        </a>
        <a href="file-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:file-document"></span> 文件管理
        </a>
        <a href="data-analysis.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:chart-line"></span> 数据分析
        </a>
        <a href="system-settings.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:cog"></span> 系统设置
        </a>
        <a href="data-backup.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:content-save"></span> 数据备份
        </a>
        <a href="profile.html" class="nav-item flex items-center active">
          <span class="iconify mr-3" data-icon="mdi:account-circle"></span> 个人中心
        </a>
      </nav>
    </div>

    <!-- 顶部栏 -->
    <div class="topbar flex items-center justify-between">
      <div class="relative w-1/3">
        <input type="text" placeholder="搜索系统功能..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
        <span class="iconify absolute left-3 top-2.5 text-gray-400" data-icon="mdi:magnify"></span>
      </div>
      
      <div class="flex items-center space-x-6">
        <button class="theme-toggle">
          <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:theme-light-dark"></span>
        </button>
        
        <div class="relative">
          <button class="notification-btn">
            <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:bell-outline"></span>
            <span class="notification-dot absolute rounded-full"></span>
          </button>
        </div>
        
        <div class="flex items-center">
          <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center">
            <span class="iconify text-white" data-icon="mdi:account"></span>
          </div>
          <span class="ml-2 font-medium dark:text-white">管理员</span>
          <button id="logoutBtn" class="ml-4 text-gray-700 dark:text-gray-300 hover:text-red-500 dark:hover:text-red-400">
            <span class="iconify text-lg" data-icon="mdi:logout"></span>
          </button>
        </div>
      </div>
    </div>

    <!-- 主内容区 -->
    <main class="main-content">
      <div class="mb-6">
        <h1 class="text-2xl font-bold dark:text-white">个人中心</h1>
        <p class="text-gray-500 text-sm mt-1 dark:text-gray-400">查看和管理您的个人资料和账号设置</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
        <!-- 左侧个人资料导航 -->
        <div class="md:col-span-1">
          <div class="card">
            <div class="flex flex-col items-center mb-6 pb-6 border-b border-gray-200 dark:border-gray-700">
              <div class="w-24 h-24 rounded-full bg-primary flex items-center justify-center mb-4">
                <span class="iconify text-white text-4xl" data-icon="mdi:account"></span>
              </div>
              <div class="text-center">
                <h3 class="font-semibold text-lg dark:text-white">管理员</h3>
                <p class="text-gray-500 text-sm dark:text-gray-400">超级管理员</p>
              </div>
              <button class="mt-3 px-4 py-1 bg-primary hover:bg-blue-600 text-white text-sm rounded-full">
                修改头像
              </button>
            </div>

            <div class="profile-nav pr-2">
              <div class="profile-nav-item active" data-tab="basic">
                <span class="iconify mr-2" data-icon="mdi:account-details"></span>
                基本资料
              </div>
              <div class="profile-nav-item" data-tab="security">
                <span class="iconify mr-2" data-icon="mdi:shield-account"></span>
                安全设置
              </div>
              <div class="profile-nav-item" data-tab="notification">
                <span class="iconify mr-2" data-icon="mdi:bell-ring"></span>
                通知设置
              </div>
              <div class="profile-nav-item" data-tab="log">
                <span class="iconify mr-2" data-icon="mdi:history"></span>
                登录历史
              </div>
            </div>
          </div>
        </div>

        <!-- 右侧内容区域 -->
        <div class="md:col-span-3">
          <!-- 基本资料 -->
          <div id="basic-settings" class="card tab-content">
            <h2 class="text-lg font-semibold mb-6 dark:text-white">基本资料</h2>
            
            <form>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">账号 ID</label>
                  <input type="text" value="ADMIN001" readonly="" class="w-full px-3 py-2 rounded-lg border border-gray-300 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:border-gray-600 dark:text-white">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">角色</label>
                  <input type="text" value="超级管理员" readonly="" class="w-full px-3 py-2 rounded-lg border border-gray-300 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:border-gray-600 dark:text-white">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">用户名</label>
                  <input type="text" value="admin" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">昵称</label>
                  <input type="text" value="管理员" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">手机号码</label>
                  <input type="tel" value="138****1234" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">电子邮箱</label>
                  <input type="email" value="admin@example.com" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                </div>
              </div>

              <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">个人简介</label>
                <textarea rows="3" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">负责通讯平台的系统运维与管理工作，拥有丰富的系统管理经验。</textarea>
              </div>

              <div class="flex justify-end">
                <button type="button" class="mr-3 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
                  取消
                </button>
                <button type="button" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
                  保存更改
                </button>
              </div>
            </form>
          </div>

          <!-- 安全设置 -->
          <div id="security-settings" class="card tab-content hidden">
            <h2 class="text-lg font-semibold mb-6 dark:text-white">安全设置</h2>
            
            <div class="space-y-6">
              <div class="pb-6 border-b border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-start mb-4">
                  <div>
                    <h3 class="font-medium">修改密码</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">定期更改您的密码可以提高账户安全性</p>
                  </div>
                  <button id="changePasswordBtn" class="px-3 py-1 bg-primary hover:bg-blue-600 text-white text-sm rounded">
                    修改
                  </button>
                </div>
                <div id="passwordForm" class="mt-4 hidden">
                  <div class="space-y-4">
                    <div>
                      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">当前密码</label>
                      <input type="password" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">新密码</label>
                      <input type="password" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                    </div>
                    <div>
                      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">确认新密码</label>
                      <input type="password" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                    </div>
                    <div class="flex justify-end">
                      <button type="button" class="mr-3 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
                        取消
                      </button>
                      <button type="button" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
                        确认修改
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="pb-6 border-b border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">双因素认证</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">增加一层额外的安全保障</p>
                  </div>
                  <button class="px-3 py-1 bg-green-500 hover:bg-green-600 text-white text-sm rounded">
                    已启用
                  </button>
                </div>
              </div>
              
              <div class="pb-6 border-b border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">登录通知</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">当有新设备登录时接收邮件通知</p>
                  </div>
                  <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" checked="" class="sr-only peer">
                    <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                  </label>
                </div>
              </div>
              
              <div class="pb-6 border-b border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-start">
                  <div>
                    <h3 class="font-medium">会话管理</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">查看和管理您当前的登录会话</p>
                  </div>
                  <button class="px-3 py-1 bg-primary hover:bg-blue-600 text-white text-sm rounded">
                    查看会话
                  </button>
                </div>
              </div>
              
              <div class="pb-6 border-b border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-start">
                  <div>
                    <h3 class="font-medium">账户删除</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">永久删除您的账户和所有相关数据</p>
                  </div>
                  <button class="px-3 py-1 bg-red-500 hover:bg-red-600 text-white text-sm rounded">
                    删除账户
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- 通知设置 -->
          <div id="notification-settings" class="card tab-content hidden">
            <h2 class="text-lg font-semibold mb-6 dark:text-white">通知设置</h2>
            
            <div class="space-y-6">
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">系统通知</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">接收系统更新和维护通知</p>
                  </div>
                  <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" checked="" class="sr-only peer">
                    <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                  </label>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">消息通知</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">接收新消息提醒</p>
                  </div>
                  <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" checked="" class="sr-only peer">
                    <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                  </label>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">用户活动</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">接收用户活动相关通知</p>
                  </div>
                  <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" class="sr-only peer">
                    <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                  </label>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">安全警报</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">接收账户安全相关警报</p>
                  </div>
                  <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" checked="" class="sr-only peer">
                    <div class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"></div>
                  </label>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <h3 class="font-medium mb-2">通知接收方式</h3>
                <div class="space-y-3 mt-4">
                  <div class="flex items-center">
                    <input type="checkbox" id="emailNotify" checked="" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                    <label for="emailNotify" class="ml-2 text-sm text-gray-700 dark:text-gray-300">电子邮件</label>
                  </div>
                  <div class="flex items-center">
                    <input type="checkbox" id="smsNotify" checked="" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                    <label for="smsNotify" class="ml-2 text-sm text-gray-700 dark:text-gray-300">短信</label>
                  </div>
                  <div class="flex items-center">
                    <input type="checkbox" id="pushNotify" checked="" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                    <label for="pushNotify" class="ml-2 text-sm text-gray-700 dark:text-gray-300">系统推送</label>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="flex justify-end mt-6">
              <button type="button" class="mr-3 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
                重置
              </button>
              <button type="button" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
                保存设置
              </button>
            </div>
          </div>
          
          <!-- 登录历史 -->
          <div id="log-settings" class="card tab-content hidden">
            <h2 class="text-lg font-semibold mb-6 dark:text-white">登录历史</h2>
            
            <div class="overflow-x-auto">
              <table class="min-w-full">
                <thead>
                  <tr class="text-left text-gray-500 dark:text-gray-400">
                    <th class="pb-3 px-4">时间</th>
                    <th class="pb-3 px-4">设备</th>
                    <th class="pb-3 px-4">IP地址</th>
                    <th class="pb-3 px-4">状态</th>
                  </tr>
                </thead>
                <tbody>
                  <tr class="border-t border-gray-200 dark:border-gray-700">
                    <td class="py-3 px-4">2025-05-13 08:45</td>
                    <td class="py-3 px-4">Chrome / Windows</td>
                    <td class="py-3 px-4">192.168.1.105</td>
                    <td class="py-3 px-4">
                      <span class="inline-flex items-center bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full dark:bg-green-900 dark:text-green-300">
                        <span class="w-1.5 h-1.5 mr-1 bg-green-500 rounded-full"></span>
                        成功
                      </span>
                    </td>
                  </tr>
                  <tr class="border-t border-gray-200 dark:border-gray-700">
                    <td class="py-3 px-4">2025-05-12 14:30</td>
                    <td class="py-3 px-4">Safari / iPhone</td>
                    <td class="py-3 px-4">114.235.82.123</td>
                    <td class="py-3 px-4">
                      <span class="inline-flex items-center bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full dark:bg-green-900 dark:text-green-300">
                        <span class="w-1.5 h-1.5 mr-1 bg-green-500 rounded-full"></span>
                        成功
                      </span>
                    </td>
                  </tr>
                  <tr class="border-t border-gray-200 dark:border-gray-700">
                    <td class="py-3 px-4">2025-05-11 19:05</td>
                    <td class="py-3 px-4">Firefox / MacOS</td>
                    <td class="py-3 px-4">58.100.156.72</td>
                    <td class="py-3 px-4">
                      <span class="inline-flex items-center bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full dark:bg-green-900 dark:text-green-300">
                        <span class="w-1.5 h-1.5 mr-1 bg-green-500 rounded-full"></span>
                        成功
                      </span>
                    </td>
                  </tr>
                  <tr class="border-t border-gray-200 dark:border-gray-700">
                    <td class="py-3 px-4">2025-05-10 22:18</td>
                    <td class="py-3 px-4">Chrome / Android</td>
                    <td class="py-3 px-4">120.34.78.156</td>
                    <td class="py-3 px-4">
                      <span class="inline-flex items-center bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded-full dark:bg-red-900 dark:text-red-300">
                        <span class="w-1.5 h-1.5 mr-1 bg-red-500 rounded-full"></span>
                        失败
                      </span>
                    </td>
                  </tr>
                  <tr class="border-t border-gray-200 dark:border-gray-700">
                    <td class="py-3 px-4">2025-05-10 10:42</td>
                    <td class="py-3 px-4">Chrome / Windows</td>
                    <td class="py-3 px-4">192.168.1.105</td>
                    <td class="py-3 px-4">
                      <span class="inline-flex items-center bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full dark:bg-green-900 dark:text-green-300">
                        <span class="w-1.5 h-1.5 mr-1 bg-green-500 rounded-full"></span>
                        成功
                      </span>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <div class="mt-4 flex justify-end">
              <button type="button" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg text-sm">
                导出完整记录
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 主题切换
      const themeToggle = document.querySelector('.theme-toggle');
      themeToggle.addEventListener('click', function() {
        const html = document.querySelector('html');
        if (html.classList.contains('dark')) {
          html.classList.remove('dark');
          localStorage.setItem('theme', 'light');
        } else {
          html.classList.add('dark');
          localStorage.setItem('theme', 'dark');
        }
      });
      
      // 检查本地存储的主题设置
      if (localStorage.getItem('theme') === 'dark') {
        document.querySelector('html').classList.add('dark');
      }
      
      // 设置标签页切换
      const profileNavItems = document.querySelectorAll('.profile-nav-item');
      const tabContents = document.querySelectorAll('.tab-content');
      
      profileNavItems.forEach(item => {
        item.addEventListener('click', function() {
          const tabName = this.getAttribute('data-tab');
          
          // 更新导航项样式
          profileNavItems.forEach(nav => nav.classList.remove('active'));
          this.classList.add('active');
          
          // 显示对应的内容区块
          tabContents.forEach(tab => {
            if (tab.id === tabName + '-settings') {
              tab.classList.remove('hidden');
            } else {
              tab.classList.add('hidden');
            }
          });
        });
      });
      
      // 修改密码表单切换
      const changePasswordBtn = document.getElementById('changePasswordBtn');
      const passwordForm = document.getElementById('passwordForm');
      
      if (changePasswordBtn && passwordForm) {
        changePasswordBtn.addEventListener('click', function() {
          if (passwordForm.classList.contains('hidden')) {
            passwordForm.classList.remove('hidden');
            changePasswordBtn.textContent = '取消';
          } else {
            passwordForm.classList.add('hidden');
            changePasswordBtn.textContent = '修改';
          }
        });
      }
    });
  </script>




  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>数据备份 - 通讯软件后台管理系统</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        fontFamily: {
          sans: ['Inter', 'sans-serif'],
        },
        extend: {
          colors: {
            primary: '#3b82f6',
            success: '#10b981',
            warning: '#f59e0b',
            error: '#ef4444',
            background: {
              light: '#f8fafc',
              dark: '#1f2937'
            }
          }
        }
      },
      darkMode: 'class',
    }
  </script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
      height: 100%;
      margin: 0;
      padding: 0;
      color: #1f2937;
    }
    .dark body {
      background-color: #111827;
      color: #f3f4f6;
    }
    .dashboard-container {
      max-width: 1440px;
      min-height: 100vh;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 240px 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas: 
        "sidebar topbar"
        "sidebar main";
    }
    .sidebar {
      grid-area: sidebar;
      border-right: 1px solid #e5e7eb;
      background: #f8fafc;
      padding: 24px 0;
    }
    .dark .sidebar {
      background: #1f2937;
      border-right: 1px solid #374151;
    }
    .topbar {
      grid-area: topbar;
      background: #ffffff;
      border-bottom: 1px solid #e5e7eb;
      padding: 16px 32px;
    }
    .dark .topbar {
      background: #1f2937;
      border-bottom: 1px solid #374151;
    }
    .main-content {
      grid-area: main;
      background: #f9fafb;
      padding: 24px;
      overflow-y: auto;
    }
    .dark .main-content {
      background: #111827;
    }
    .card {
      background: #ffffff;
      border-radius: 8px;
      padding: 20px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }
    .dark .card {
      background: #1f2937;
      border: 1px solid #374151;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
    }
    .nav-item {
      padding: 12px 24px;
      font-size: 14px;
      color: #4b5563;
      border-left: 3px solid transparent;
      transition: all 0.2s;
    }
    .dark .nav-item {
      color: #d1d5db;
    }
    .nav-item:hover, .nav-item.active {
      background: #f1f5f9;
      border-left: 3px solid #3b82f6;
      color: #3b82f6;
    }
    .dark .nav-item:hover, .dark .nav-item.active {
      background: #1a2435;
    }
    .notification-dot {
      top: -2px;
      right: -2px;
      width: 8px;
      height: 8px;
      background-color: #ef4444;
    }
    .table-responsive {
      overflow-x: auto;
    }
    .table {
      min-width: 100%;
      border-collapse: separate;
      border-spacing: 0;
    }
    .table th {
      text-align: left;
      padding: 12px 16px;
      font-weight: 500;
      border-bottom: 1px solid #e5e7eb;
      color: #6b7280;
    }
    .dark .table th {
      color: #9ca3af;
      border-bottom: 1px solid #374151;
    }
    .table td {
      padding: 12px 16px;
      border-bottom: 1px solid #e5e7eb;
      vertical-align: middle;
    }
    .dark .table td {
      border-bottom: 1px solid #374151;
    }
    .table tr:hover {
      background-color: #f9fafb;
    }
    .dark .table tr:hover {
      background-color: #1e293b;
    }
    .status-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 2px 8px;
      border-radius: 9999px;
      font-size: 12px;
    }
    .pagination-item {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border-radius: 4px;
      margin: 0 2px;
      cursor: pointer;
    }
    .pagination-item.active {
      background-color: #3b82f6;
      color: white;
    }
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .modal.active {
      opacity: 1;
      pointer-events: auto;
    }
    .modal-content {
      background: white;
      border-radius: 8px;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      transform: translateY(20px);
      transition: transform 0.3s;
    }
    .dark .modal-content {
      background: #1f2937;
    }
    .modal.active .modal-content {
      transform: translateY(0);
    }
    .chart-container {
      width: 100%;
      height: 250px;
    }
    .progress-bar {
      height: 8px;
      border-radius: 4px;
      background-color: #e5e7eb;
    }
    .dark .progress-bar {
      background-color: #374151;
    }
    .progress-value {
      height: 8px;
      border-radius: 4px;
      background-color: #3b82f6;
    }
    @media (max-width: 1024px) {
      .dashboard-container {
        grid-template-columns: 200px 1fr;
      }
    }
    @media (max-width: 768px) {
      .dashboard-container {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "topbar"
          "main";
      }
      .sidebar {
        display: none;
      }
    }
  </style>


  <div class="dashboard-container">
    <!-- 左侧导航 -->
    <div class="sidebar">
      <div class="flex items-center px-6 mb-8">
        <span class="iconify text-2xl text-primary" data-icon="mdi:application"></span>
        <h1 class="text-xl font-bold ml-3 dark:text-white">通讯管理系统</h1>
      </div>
      <nav class="space-y-1">
        <a href="index.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:home"></span> 仪表盘
        </a>
        <a href="user-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-group"></span> 用户管理
        </a>
        <a href="message-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-processing"></span> 消息管理
        </a>
        <a href="group-chat-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-text"></span> 群聊管理
        </a>
        <a href="file-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:file-document"></span> 文件管理
        </a>
        <a href="data-analysis.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:chart-line"></span> 数据分析
        </a>
        <a href="system-settings.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:cog"></span> 系统设置
        </a>
        <a href="data-backup.html" class="nav-item flex items-center active">
          <span class="iconify mr-3" data-icon="mdi:content-save"></span> 数据备份
        </a>
        <a href="profile.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-circle"></span> 个人中心
        </a>
      </nav>
    </div>

    <!-- 顶部栏 -->
    <div class="topbar flex items-center justify-between">
      <div class="relative w-1/3">
        <input type="text" placeholder="搜索系统功能..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
        <span class="iconify absolute left-3 top-2.5 text-gray-400" data-icon="mdi:magnify"></span>
      </div>
      
      <div class="flex items-center space-x-6">
        <button class="theme-toggle">
          <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:theme-light-dark"></span>
        </button>
        
        <div class="relative">
          <button class="notification-btn">
            <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:bell-outline"></span>
            <span class="notification-dot absolute rounded-full"></span>
          </button>
        </div>
        
        <div class="flex items-center">
          <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center">
            <span class="iconify text-white" data-icon="mdi:account"></span>
          </div>
          <span class="ml-2 font-medium dark:text-white">管理员</span>
        </div>
      </div>
    </div>

    <!-- 主内容区 -->
    <main class="main-content">
      <div class="mb-6 flex justify-between items-center">
        <div>
          <h1 class="text-2xl font-bold dark:text-white">数据备份</h1>
          <p class="text-gray-500 text-sm mt-1 dark:text-gray-400">管理系统数据备份和恢复</p>
        </div>
        <button id="createBackupBtn" class="bg-primary hover:bg-blue-600 text-white py-2 px-4 rounded-lg flex items-center">
          <span class="iconify mr-2" data-icon="mdi:backup-restore"></span>
          创建备份
        </button>
      </div>

      <!-- 备份概览卡片 -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
        <div class="card">
          <div class="flex items-center">
            <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center">
              <span class="iconify text-blue-500 text-xl" data-icon="mdi:calendar-clock"></span>
            </div>
            <div class="ml-4">
              <div class="text-gray-500 text-sm dark:text-gray-400">上次备份时间</div>
              <div class="text-lg font-bold dark:text-white">2025-05-12 03:15</div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="flex items-center">
            <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center">
              <span class="iconify text-green-500 text-xl" data-icon="mdi:check-circle"></span>
            </div>
            <div class="ml-4">
              <div class="text-gray-500 text-sm dark:text-gray-400">备份状态</div>
              <div class="text-lg font-bold dark:text-white">正常</div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="flex items-center">
            <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center">
              <span class="iconify text-purple-500 text-xl" data-icon="mdi:harddisk"></span>
            </div>
            <div class="ml-4">
              <div class="text-gray-500 text-sm dark:text-gray-400">总备份大小</div>
              <div class="text-lg font-bold dark:text-white">42.8 GB</div>
            </div>
          </div>
        </div>
      </div>

      <!-- 备份设置卡片 -->
      <div class="card mb-6">
        <h2 class="text-lg font-semibold mb-4 dark:text-white">备份设置</h2>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div>
            <div class="mb-4">
              <div class="flex justify-between items-center mb-2">
                <label class="text-sm font-medium text-gray-700 dark:text-gray-300">自动备份</label>
                <label class="switch">
                  <input type="checkbox" id="autoBackupSwitch" checked="">
                  <span class="slider"></span>
                </label>
              </div>
              <select id="backupFrequency" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <option value="daily">每日备份</option>
                <option value="weekly" selected="">每周备份</option>
                <option value="monthly">每月备份</option>
              </select>
              <p class="text-xs text-gray-500 mt-1 dark:text-gray-400">系统将在每周一凌晨3点自动执行备份</p>
            </div>
            
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">备份保留策略</label>
              <select id="retentionPolicy" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <option value="7days">保留最近7天</option>
                <option value="30days" selected="">保留最近30天</option>
                <option value="90days">保留最近90天</option>
                <option value="unlimited">无限期保留</option>
              </select>
              <p class="text-xs text-gray-500 mt-1 dark:text-gray-400">超过保留期的备份将被自动删除</p>
            </div>
          </div>
          
          <div>
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">备份存储位置</label>
              <select id="storageLocation" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <option value="local" selected="">本地存储</option>
                <option value="cloud">云存储</option>
                <option value="both">本地+云存储</option>
              </select>
            </div>
            
            <div id="cloudStorageSettings" class="mb-4">
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">云存储配置</label>
              <select id="cloudProvider" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white mb-2">
                <option value="aws">亚马逊 S3</option>
                <option value="azure">微软 Azure</option>
                <option value="gcp">谷歌云存储</option>
                <option value="aliyun" selected="">阿里云 OSS</option>
                <option value="qcloud">腾讯云 COS</option>
              </select>
              <input type="text" placeholder="存储桶名称" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
            </div>
          </div>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">备份内容选择</label>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <div class="flex items-center">
              <input type="checkbox" id="backupDatabase" checked="" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
              <label for="backupDatabase" class="ml-2 text-sm text-gray-700 dark:text-gray-300">数据库</label>
            </div>
            <div class="flex items-center">
              <input type="checkbox" id="backupFiles" checked="" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
              <label for="backupFiles" class="ml-2 text-sm text-gray-700 dark:text-gray-300">用户文件</label>
            </div>
            <div class="flex items-center">
              <input type="checkbox" id="backupMedia" checked="" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
              <label for="backupMedia" class="ml-2 text-sm text-gray-700 dark:text-gray-300">媒体文件</label>
            </div>
            <div class="flex items-center">
              <input type="checkbox" id="backupLogs" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
              <label for="backupLogs" class="ml-2 text-sm text-gray-700 dark:text-gray-300">系统日志</label>
            </div>
            <div class="flex items-center">
              <input type="checkbox" id="backupConfig" checked="" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
              <label for="backupConfig" class="ml-2 text-sm text-gray-700 dark:text-gray-300">系统配置</label>
            </div>
          </div>
        </div>
        
        <div class="flex justify-end space-x-3 mt-6">
          <button type="button" id="cancelSettingsBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            取消
          </button>
          <button type="button" id="saveSettingsBtn" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
            保存设置
          </button>
        </div>
      </div>

      <!-- 备份历史记录 -->
      <div class="card">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-lg font-semibold dark:text-white">备份历史</h2>
          <div class="flex space-x-2">
            <button id="refreshListBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 py-1 px-3 rounded-lg flex items-center text-sm dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600">
              <span class="iconify mr-1" data-icon="mdi:refresh"></span> 刷新
            </button>
            <select id="filterBackups" class="text-sm border border-gray-300 rounded px-3 py-1 dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <option value="all" selected="">全部备份</option>
              <option value="auto">自动备份</option>
              <option value="manual">手动备份</option>
            </select>
          </div>
        </div>
        
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th>备份ID</th>
                <th>备份时间</th>
                <th>备份类型</th>
                <th>备份大小</th>
                <th>存储位置</th>
                <th>状态</th>
                <th class="text-right">操作</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>BKP10025</td>
                <td>2025-05-12 03:15</td>
                <td>自动</td>
                <td>8.3 GB</td>
                <td>本地 + 云存储</td>
                <td>
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                    完成
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-backup-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-backup-id="BKP10025">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="restore-backup-btn text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300" data-backup-id="BKP10025">
                      <span class="iconify" data-icon="mdi:backup-restore"></span>
                    </button>
                    <button class="delete-backup-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-backup-id="BKP10025">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>BKP10024</td>
                <td>2025-05-05 03:15</td>
                <td>自动</td>
                <td>8.2 GB</td>
                <td>本地 + 云存储</td>
                <td>
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                    完成
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-backup-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-backup-id="BKP10024">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="restore-backup-btn text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300" data-backup-id="BKP10024">
                      <span class="iconify" data-icon="mdi:backup-restore"></span>
                    </button>
                    <button class="delete-backup-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-backup-id="BKP10024">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>BKP10023</td>
                <td>2025-05-01 11:32</td>
                <td>手动</td>
                <td>8.1 GB</td>
                <td>本地</td>
                <td>
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                    完成
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-backup-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-backup-id="BKP10023">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="restore-backup-btn text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300" data-backup-id="BKP10023">
                      <span class="iconify" data-icon="mdi:backup-restore"></span>
                    </button>
                    <button class="delete-backup-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-backup-id="BKP10023">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>BKP10022</td>
                <td>2025-04-28 03:15</td>
                <td>自动</td>
                <td>8.1 GB</td>
                <td>本地 + 云存储</td>
                <td>
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                    完成
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-backup-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-backup-id="BKP10022">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="restore-backup-btn text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300" data-backup-id="BKP10022">
                      <span class="iconify" data-icon="mdi:backup-restore"></span>
                    </button>
                    <button class="delete-backup-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-backup-id="BKP10022">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td>BKP10021</td>
                <td>2025-04-21 03:15</td>
                <td>自动</td>
                <td>8.0 GB</td>
                <td>本地 + 云存储</td>
                <td>
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                    完成
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-backup-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-backup-id="BKP10021">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="restore-backup-btn text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300" data-backup-id="BKP10021">
                      <span class="iconify" data-icon="mdi:backup-restore"></span>
                    </button>
                    <button class="delete-backup-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-backup-id="BKP10021">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- 底部工具栏 -->
        <div class="mt-4 flex flex-col sm:flex-row justify-between items-center">
          <div class="text-sm text-gray-500 dark:text-gray-400 mb-4 sm:mb-0">
            显示 1 到 5，共 12 条记录
          </div>

          <!-- 分页 -->
          <div class="flex items-center">
            <button class="pagination-item text-gray-600 dark:text-gray-400">
              <span class="iconify" data-icon="mdi:chevron-left"></span>
            </button>
            <button class="pagination-item active">1</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">2</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">3</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">
              <span class="iconify" data-icon="mdi:chevron-right"></span>
            </button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- 创建备份模态框 -->
  <div id="backupModal" class="modal">
    <div class="modal-content">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold">创建备份</h3>
          <button id="closeBackupModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <form id="backupForm">
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">备份名称 <span class="text-red-500">*</span></label>
            <input type="text" id="backupName" name="backupName" required="" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white" value="备份-2025-05-13">
          </div>
          
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">备注</label>
            <textarea id="backupDescription" name="backupDescription" rows="2" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white"></textarea>
          </div>
          
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">存储位置</label>
            <select id="backupLocation" name="backupLocation" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <option value="local" selected="">本地存储</option>
              <option value="cloud">云存储</option>
              <option value="both">本地+云存储</option>
            </select>
          </div>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">备份内容</label>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
              <div class="flex items-center">
                <input type="checkbox" id="backupDatabaseModal" checked="" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                <label for="backupDatabaseModal" class="ml-2 text-sm text-gray-700 dark:text-gray-300">数据库</label>
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="backupFilesModal" checked="" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                <label for="backupFilesModal" class="ml-2 text-sm text-gray-700 dark:text-gray-300">用户文件</label>
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="backupMediaModal" checked="" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                <label for="backupMediaModal" class="ml-2 text-sm text-gray-700 dark:text-gray-300">媒体文件</label>
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="backupLogsModal" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                <label for="backupLogsModal" class="ml-2 text-sm text-gray-700 dark:text-gray-300">系统日志</label>
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="backupConfigModal" checked="" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                <label for="backupConfigModal" class="ml-2 text-sm text-gray-700 dark:text-gray-300">系统配置</label>
              </div>
            </div>
          </div>

          <div class="flex justify-end space-x-3 mt-6">
            <button type="button" id="cancelBackupBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
              取消
            </button>
            <button type="submit" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
              开始备份
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- 备份进度模态框 -->
  <div id="progressModal" class="modal">
    <div class="modal-content" style="max-width: 450px;">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold">备份进行中</h3>
          <button id="closeProgressModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <div class="mb-6">
          <div class="flex justify-between mb-1">
            <span class="text-sm text-gray-700 dark:text-gray-300">数据库备份</span>
            <span class="text-sm text-gray-700 dark:text-gray-300" id="dbProgressText">100%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-value" style="width: 100%"></div>
          </div>
        </div>

        <div class="mb-6">
          <div class="flex justify-between mb-1">
            <span class="text-sm text-gray-700 dark:text-gray-300">文件备份</span>
            <span class="text-sm text-gray-700 dark:text-gray-300" id="fileProgressText">65%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-value" style="width: 65%"></div>
          </div>
        </div>

        <div class="mb-6">
          <div class="flex justify-between mb-1">
            <span class="text-sm text-gray-700 dark:text-gray-300">总进度</span>
            <span class="text-sm text-gray-700 dark:text-gray-300" id="totalProgressText">40%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-value" style="width: 40%"></div>
          </div>
        </div>

        <div class="flex items-center justify-center">
          <span class="text-sm text-gray-500 dark:text-gray-400">预计剩余时间：3分钟</span>
        </div>

        <div class="flex justify-center mt-6">
          <button type="button" id="cancelProgressBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            取消备份
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 查看备份详情模态框 -->
  <div id="viewBackupModal" class="modal">
    <div class="modal-content">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold">备份详情</h3>
          <button id="closeViewBackupModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <div class="mb-6">
          <div class="grid grid-cols-2 gap-4">
            <div>
              <div class="text-sm text-gray-500 dark:text-gray-400">备份ID</div>
              <div class="text-sm font-medium dark:text-white">BKP10025</div>
            </div>
            <div>
              <div class="text-sm text-gray-500 dark:text-gray-400">备份名称</div>
              <div class="text-sm font-medium dark:text-white">每周备份-2025-05-12</div>
            </div>
            <div>
              <div class="text-sm text-gray-500 dark:text-gray-400">备份时间</div>
              <div class="text-sm font-medium dark:text-white">2025-05-12 03:15</div>
            </div>
            <div>
              <div class="text-sm text-gray-500 dark:text-gray-400">备份类型</div>
              <div class="text-sm font-medium dark:text-white">自动</div>
            </div>
            <div>
              <div class="text-sm text-gray-500 dark:text-gray-400">备份大小</div>
              <div class="text-sm font-medium dark:text-white">8.3 GB</div>
            </div>
            <div>
              <div class="text-sm text-gray-500 dark:text-gray-400">存储位置</div>
              <div class="text-sm font-medium dark:text-white">本地 + 阿里云OSS</div>
            </div>
            <div>
              <div class="text-sm text-gray-500 dark:text-gray-400">状态</div>
              <div class="text-sm font-medium dark:text-white">
                <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                  完成
                </span>
              </div>
            </div>
            <div>
              <div class="text-sm text-gray-500 dark:text-gray-400">创建者</div>
              <div class="text-sm font-medium dark:text-white">系统</div>
            </div>
          </div>
        </div>

        <div class="mb-6">
          <div class="text-sm text-gray-500 dark:text-gray-400 mb-2">备份内容</div>
          <div class="grid grid-cols-2 gap-2 text-sm">
            <div class="flex items-center">
              <span class="iconify text-green-500 mr-1" data-icon="mdi:check-circle"></span>
              <span>数据库 (2.1 GB)</span>
            </div>
            <div class="flex items-center">
              <span class="iconify text-green-500 mr-1" data-icon="mdi:check-circle"></span>
              <span>用户文件 (3.4 GB)</span>
            </div>
            <div class="flex items-center">
              <span class="iconify text-green-500 mr-1" data-icon="mdi:check-circle"></span>
              <span>媒体文件 (2.6 GB)</span>
            </div>
            <div class="flex items-center">
              <span class="iconify text-green-500 mr-1" data-icon="mdi:check-circle"></span>
              <span>系统配置 (0.2 GB)</span>
            </div>
          </div>
        </div>

        <div class="flex justify-end space-x-2">
          <button type="button" id="downloadBackupBtn" class="px-3 py-1.5 border border-gray-300 bg-white hover:bg-gray-50 text-gray-700 rounded text-sm flex items-center dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            <span class="iconify mr-1" data-icon="mdi:download"></span>
            下载备份
          </button>
          <button type="button" id="restoreFromViewBtn" class="px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded text-sm flex items-center">
            <span class="iconify mr-1" data-icon="mdi:backup-restore"></span>
            从此备份恢复
          </button>
          <button type="button" id="closeViewBackupBtn" class="px-3 py-1.5 border border-gray-300 bg-white hover:bg-gray-50 text-gray-700 rounded text-sm dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            关闭
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 恢复确认模态框 -->
  <div id="restoreModal" class="modal">
    <div class="modal-content" style="max-width: 450px;">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold">确认恢复</h3>
          <button class="close-restore-modal text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <div class="mb-6">
          <div class="flex items-center p-4 mb-4 text-yellow-800 rounded-lg bg-yellow-50 dark:bg-yellow-900 dark:text-yellow-300">
            <span class="iconify text-xl mr-2" data-icon="mdi:alert"></span>
            <div>
              <div class="font-medium">警告：数据将被覆盖</div>
              <div class="text-sm">恢复操作将使用备份数据覆盖当前系统数据。此操作不可逆。</div>
            </div>
          </div>
          
          <p class="text-gray-700 dark:text-gray-300 mb-4">您确定要从以下备份恢复系统吗？</p>
          
          <div class="bg-gray-50 p-3 rounded dark:bg-gray-800">
            <div class="mb-1"><strong>备份ID:</strong> <span id="restoreBackupId">BKP10025</span></div>
            <div class="mb-1"><strong>备份时间:</strong> <span id="restoreBackupTime">2025-05-12 03:15</span></div>
            <div><strong>备份大小:</strong> <span id="restoreBackupSize">8.3 GB</span></div>
          </div>
        </div>

        <div class="mb-4">
          <div class="flex items-center">
            <input type="checkbox" id="confirmRestoreCheck" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
            <label for="confirmRestoreCheck" class="ml-2 text-sm text-gray-700 dark:text-gray-300">我了解此操作将覆盖当前数据且不可撤销</label>
          </div>
        </div>

        <div class="flex justify-end space-x-3">
          <button type="button" class="close-restore-modal px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            取消
          </button>
          <button type="button" id="confirmRestoreBtn" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg" disabled="">
            确认恢复
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 删除确认模态框 -->
  <div id="deleteModal" class="modal">
    <div class="modal-content" style="max-width: 400px;">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold">确认删除</h3>
          <button class="close-delete-modal text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <div class="mb-6">
          <p class="text-gray-700 dark:text-gray-300">您确定要删除此备份吗？此操作不可撤销。</p>
          <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">备份ID: <span id="deleteBackupId">BKP10025</span></p>
        </div>

        <div class="flex justify-end space-x-3">
          <button type="button" class="close-delete-modal px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            取消
          </button>
          <button type="button" id="confirmDeleteBtn" class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg">
            确认删除
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 主题切换
      const themeToggle = document.querySelector('.theme-toggle');
      themeToggle.addEventListener('click', function() {
        const html = document.querySelector('html');
        if (html.classList.contains('dark')) {
          html.classList.remove('dark');
          localStorage.setItem('theme', 'light');
        } else {
          html.classList.add('dark');
          localStorage.setItem('theme', 'dark');
        }
      });
      
      // 检查本地存储的主题设置
      if (localStorage.getItem('theme') === 'dark') {
        document.querySelector('html').classList.add('dark');
      }
      
      // 自动备份开关
      const autoBackupSwitch = document.getElementById('autoBackupSwitch');
      const backupFrequency = document.getElementById('backupFrequency');
      
      autoBackupSwitch.addEventListener('change', function() {
        backupFrequency.disabled = !this.checked;
        if (!this.checked) {
          backupFrequency.classList.add('opacity-50');
        } else {
          backupFrequency.classList.remove('opacity-50');
        }
      });
      
      // 创建备份模态框
      const backupModal = document.getElementById('backupModal');
      const createBackupBtn = document.getElementById('createBackupBtn');
      const closeBackupModal = document.getElementById('closeBackupModal');
      const cancelBackupBtn = document.getElementById('cancelBackupBtn');
      const backupForm = document.getElementById('backupForm');
      
      // 显示模态框
      createBackupBtn.addEventListener('click', function() {
        backupModal.classList.add('active');
      });
      
      // 关闭模态框
      closeBackupModal.addEventListener('click', function() {
        backupModal.classList.remove('active');
      });
      
      cancelBackupBtn.addEventListener('click', function() {
        backupModal.classList.remove('active');
      });
      
      // 表单提交
      backupForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // 关闭备份模态框
        backupModal.classList.remove('active');
        
        // 显示备份进度模态框
        const progressModal = document.getElementById('progressModal');
        progressModal.classList.add('active');
        
        // 模拟备份进度
        simulateBackupProgress();
      });
      
      // 进度模态框
      const closeProgressModal = document.getElementById('closeProgressModal');
      const cancelProgressBtn = document.getElementById('cancelProgressBtn');
      
      closeProgressModal.addEventListener('click', function() {
        if (confirm('取消备份将导致备份不完整，确定要取消吗？')) {
          document.getElementById('progressModal').classList.remove('active');
        }
      });
      
      cancelProgressBtn.addEventListener('click', function() {
        if (confirm('取消备份将导致备份不完整，确定要取消吗？')) {
          document.getElementById('progressModal').classList.remove('active');
        }
      });
      
      // 模拟备份进度
      function simulateBackupProgress() {
        const dbProgressText = document.getElementById('dbProgressText');
        const fileProgressText = document.getElementById('fileProgressText');
        const totalProgressText = document.getElementById('totalProgressText');
        const progressBars = document.querySelectorAll('.progress-value');
        
        // 已经是100%的数据库进度保持不变
        
        // 文件进度模拟
        let fileProgress = 65;
        let totalProgress = 40;
        
        const interval = setInterval(() => {
          if (fileProgress < 100) {
            fileProgress += 5;
            fileProgressText.textContent = fileProgress + '%';
            progressBars[1].style.width = fileProgress + '%';
          }
          
          if (totalProgress < 100) {
            totalProgress += 3;
            if (totalProgress > 100) totalProgress = 100;
            totalProgressText.textContent = totalProgress + '%';
            progressBars[2].style.width = totalProgress + '%';
          }
          
          if (fileProgress >= 100 && totalProgress >= 100) {
            clearInterval(interval);
            
            // 备份完成后关闭进度模态框
            setTimeout(() => {
              document.getElementById('progressModal').classList.remove('active');
              alert('备份已成功完成！');
              
              // 刷新备份列表（实际应用中应该从服务器获取最新数据）
              // 这里只是简单地刷新页面
              // location.reload();
            }, 500);
          }
        }, 300);
      }
      
      // 查看备份详情
      const viewBackupModal = document.getElementById('viewBackupModal');
      const viewButtons = document.querySelectorAll('.view-backup-btn');
      const closeViewBackupModal = document.getElementById('closeViewBackupModal');
      const closeViewBackupBtn = document.getElementById('closeViewBackupBtn');
      
      viewButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          const backupId = this.getAttribute('data-backup-id');
          console.log('查看备份:', backupId);
          
          // 实际应用中应该从服务器获取备份详情
          // 这里只是显示模态框
          viewBackupModal.classList.add('active');
        });
      });
      
      closeViewBackupModal.addEventListener('click', function() {
        viewBackupModal.classList.remove('active');
      });
      
      closeViewBackupBtn.addEventListener('click', function() {
        viewBackupModal.classList.remove('active');
      });
      
      // 恢复备份
      const restoreModal = document.getElementById('restoreModal');
      const restoreButtons = document.querySelectorAll('.restore-backup-btn');
      const closeRestoreModal = document.querySelectorAll('.close-restore-modal');
      const confirmRestoreBtn = document.getElementById('confirmRestoreBtn');
      const confirmRestoreCheck = document.getElementById('confirmRestoreCheck');
      const restoreFromViewBtn = document.getElementById('restoreFromViewBtn');
      
      restoreButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          const backupId = this.getAttribute('data-backup-id');
          console.log('恢复备份:', backupId);
          
          // 更新恢复模态框中的备份信息
          document.getElementById('restoreBackupId').textContent = backupId;
          // 根据备份ID获取其他信息，此处使用硬编码值
          
          restoreModal.classList.add('active');
        });
      });
      
      // 从详情页面恢复按钮
      restoreFromViewBtn.addEventListener('click', function() {
        // 先关闭详情模态框
        viewBackupModal.classList.remove('active');
        
        // 然后打开恢复确认模态框
        document.getElementById('restoreBackupId').textContent = 'BKP10025';
        restoreModal.classList.add('active');
      });
      
      closeRestoreModal.forEach(btn => {
        btn.addEventListener('click', function() {
          restoreModal.classList.remove('active');
        });
      });
      
      // 勾选确认框才能启用恢复按钮
      confirmRestoreCheck.addEventListener('change', function() {
        confirmRestoreBtn.disabled = !this.checked;
      });
      
      confirmRestoreBtn.addEventListener('click', function() {
        // 实际应用中应该执行恢复逻辑
        alert('系统将开始恢复过程，这可能需要几分钟时间。恢复完成后，系统将自动重启。');
        
        // 关闭模态框
        restoreModal.classList.remove('active');
      });
      
      // 删除备份
      const deleteModal = document.getElementById('deleteModal');
      const deleteButtons = document.querySelectorAll('.delete-backup-btn');
      const closeDeleteModal = document.querySelectorAll('.close-delete-modal');
      const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
      
      deleteButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          const backupId = this.getAttribute('data-backup-id');
          console.log('删除备份:', backupId);
          
          // 更新删除模态框中的备份ID
          document.getElementById('deleteBackupId').textContent = backupId;
          
          deleteModal.classList.add('active');
        });
      });
      
      closeDeleteModal.forEach(btn => {
        btn.addEventListener('click', function() {
          deleteModal.classList.remove('active');
        });
      });
      
      confirmDeleteBtn.addEventListener('click', function() {
        // 实际应用中应该执行删除逻辑
        console.log('确认删除备份:', document.getElementById('deleteBackupId').textContent);
        
        // 关闭模态框
        deleteModal.classList.remove('active');
        
        // 提示删除成功
        alert('备份已成功删除');
        
        // 刷新备份列表（实际应用中应该从服务器获取最新数据）
        // 这里只是简单地刷新页面
        // location.reload();
      });
      
      // 备份设置
      const storageLocation = document.getElementById('storageLocation');
      const cloudStorageSettings = document.getElementById('cloudStorageSettings');
      
      storageLocation.addEventListener('change', function() {
        if (this.value === 'cloud' || this.value === 'both') {
          cloudStorageSettings.classList.remove('opacity-50');
          cloudStorageSettings.querySelectorAll('select, input').forEach(el => el.disabled = false);
        } else {
          cloudStorageSettings.classList.add('opacity-50');
          cloudStorageSettings.querySelectorAll('select, input').forEach(el => el.disabled = true);
        }
      });
      
      // 初始化时如果选择的不是云存储，禁用云存储设置
      if (storageLocation.value === 'local') {
        cloudStorageSettings.classList.add('opacity-50');
        cloudStorageSettings.querySelectorAll('select, input').forEach(el => el.disabled = true);
      }
      
      // 保存设置
      const saveSettingsBtn = document.getElementById('saveSettingsBtn');
      
      saveSettingsBtn.addEventListener('click', function() {
        // 实际应用中应该保存设置到服务器
        alert('设置已保存');
      });
      
      // 刷新备份列表
      const refreshListBtn = document.getElementById('refreshListBtn');
      
      refreshListBtn.addEventListener('click', function() {
        // 实际应用中应该从服务器获取最新数据
        alert('正在刷新备份列表...');
        // 模拟刷新
        setTimeout(() => {
          alert('备份列表已刷新');
        }, 500);
      });
      
      // 下载备份
      const downloadBackupBtn = document.getElementById('downloadBackupBtn');
      
      downloadBackupBtn.addEventListener('click', function() {
        // 实际应用中应该触发备份文件的下载
        alert('准备下载备份文件，这可能需要一些时间...');
      });
      
      // 备份过滤
      const filterBackups = document.getElementById('filterBackups');
      
      filterBackups.addEventListener('change', function() {
        // 实际应用中应该根据选择的过滤条件过滤备份列表
        console.log('筛选备份:', this.value);
      });
    });
  </script>




  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>系统设置 - 通讯软件后台管理系统</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        fontFamily: {
          sans: ['Inter', 'sans-serif'],
        },
        extend: {
          colors: {
            primary: '#3b82f6',
            success: '#10b981',
            warning: '#f59e0b',
            error: '#ef4444',
            background: {
              light: '#f8fafc',
              dark: '#1f2937'
            }
          }
        }
      },
      darkMode: 'class',
    }
  </script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
      height: 100%;
      margin: 0;
      padding: 0;
      color: #1f2937;
    }
    .dark body {
      background-color: #111827;
      color: #f3f4f6;
    }
    .dashboard-container {
      max-width: 1440px;
      min-height: 100vh;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 240px 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas: 
        "sidebar topbar"
        "sidebar main";
    }
    .sidebar {
      grid-area: sidebar;
      border-right: 1px solid #e5e7eb;
      background: #f8fafc;
      padding: 24px 0;
    }
    .dark .sidebar {
      background: #1f2937;
      border-right: 1px solid #374151;
    }
    .topbar {
      grid-area: topbar;
      background: #ffffff;
      border-bottom: 1px solid #e5e7eb;
      padding: 16px 32px;
    }
    .dark .topbar {
      background: #1f2937;
      border-bottom: 1px solid #374151;
    }
    .main-content {
      grid-area: main;
      background: #f9fafb;
      padding: 24px;
      overflow-y: auto;
    }
    .dark .main-content {
      background: #111827;
    }
    .card {
      background: #ffffff;
      border-radius: 8px;
      padding: 20px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }
    .dark .card {
      background: #1f2937;
      border: 1px solid #374151;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
    }
    .nav-item {
      padding: 12px 24px;
      font-size: 14px;
      color: #4b5563;
      border-left: 3px solid transparent;
      transition: all 0.2s;
    }
    .dark .nav-item {
      color: #d1d5db;
    }
    .nav-item:hover, .nav-item.active {
      background: #f1f5f9;
      border-left: 3px solid #3b82f6;
      color: #3b82f6;
    }
    .dark .nav-item:hover, .dark .nav-item.active {
      background: #1a2435;
    }
    .notification-dot {
      top: -2px;
      right: -2px;
      width: 8px;
      height: 8px;
      background-color: #ef4444;
    }
    .settings-nav {
      border-right: 1px solid #e5e7eb;
    }
    .dark .settings-nav {
      border-right: 1px solid #374151;
    }
    .settings-nav-item {
      padding: 10px 16px;
      border-radius: 6px;
      margin-bottom: 4px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .settings-nav-item:hover {
      background-color: #f3f4f6;
    }
    .dark .settings-nav-item:hover {
      background-color: #1e293b;
    }
    .settings-nav-item.active {
      background-color: #3b82f6;
      color: white;
    }
    .switch {
      position: relative;
      display: inline-block;
      width: 36px;
      height: 20px;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 20px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 2px;
      bottom: 2px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #3b82f6;
    }
    input:focus + .slider {
      box-shadow: 0 0 1px #3b82f6;
    }
    input:checked + .slider:before {
      transform: translateX(16px);
    }
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .modal.active {
      opacity: 1;
      pointer-events: auto;
    }
    .modal-content {
      background: white;
      border-radius: 8px;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      transform: translateY(20px);
      transition: transform 0.3s;
    }
    .dark .modal-content {
      background: #1f2937;
    }
    .modal.active .modal-content {
      transform: translateY(0);
    }
    @media (max-width: 1024px) {
      .dashboard-container {
        grid-template-columns: 200px 1fr;
      }
    }
    @media (max-width: 768px) {
      .dashboard-container {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "topbar"
          "main";
      }
      .sidebar {
        display: none;
      }
    }
  </style>


  <div class="dashboard-container">
    <!-- 左侧导航 -->
    <div class="sidebar">
      <div class="flex items-center px-6 mb-8">
        <span class="iconify text-2xl text-primary" data-icon="mdi:application"></span>
        <h1 class="text-xl font-bold ml-3 dark:text-white">通讯管理系统</h1>
      </div>
      <nav class="space-y-1">
        <a href="index.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:home"></span> 仪表盘
        </a>
        <a href="user-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-group"></span> 用户管理
        </a>
        <a href="message-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-processing"></span> 消息管理
        </a>
        <a href="group-chat-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-text"></span> 群聊管理
        </a>
        <a href="file-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:file-document"></span> 文件管理
        </a>
        <a href="data-analysis.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:chart-line"></span> 数据分析
        </a>
        <a href="system-settings.html" class="nav-item flex items-center active">
          <span class="iconify mr-3" data-icon="mdi:cog"></span> 系统设置
        </a>
        <a href="data-backup.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:content-save"></span> 数据备份
        </a>
        <a href="profile.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-circle"></span> 个人中心
        </a>
      </nav>
    </div>

    <!-- 顶部栏 -->
    <div class="topbar flex items-center justify-between">
      <div class="relative w-1/3">
        <input type="text" placeholder="搜索系统功能..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
        <span class="iconify absolute left-3 top-2.5 text-gray-400" data-icon="mdi:magnify"></span>
      </div>
      
      <div class="flex items-center space-x-6">
        <button class="theme-toggle">
          <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:theme-light-dark"></span>
        </button>
        
        <div class="relative">
          <button class="notification-btn">
            <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:bell-outline"></span>
            <span class="notification-dot absolute rounded-full"></span>
          </button>
        </div>
        
        <div class="flex items-center">
          <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center">
            <span class="iconify text-white" data-icon="mdi:account"></span>
          </div>
          <span class="ml-2 font-medium dark:text-white">管理员</span>
        </div>
      </div>
    </div>

    <!-- 主内容区 -->
    <main class="main-content">
      <div class="mb-6">
        <h1 class="text-2xl font-bold dark:text-white">系统设置</h1>
        <p class="text-gray-500 text-sm mt-1 dark:text-gray-400">管理和配置通讯平台的各项设置</p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
        <!-- 左侧设置导航 -->
        <div class="md:col-span-1">
          <div class="card">
            <div class="settings-nav pr-2">
              <div class="settings-nav-item active" data-tab="general">
                <span class="iconify mr-2" data-icon="mdi:tune"></span>
                通用设置
              </div>
              <div class="settings-nav-item" data-tab="notification">
                <span class="iconify mr-2" data-icon="mdi:bell"></span>
                通知设置
              </div>
              <div class="settings-nav-item" data-tab="security">
                <span class="iconify mr-2" data-icon="mdi:shield"></span>
                安全设置
              </div>
              <div class="settings-nav-item" data-tab="privacy">
                <span class="iconify mr-2" data-icon="mdi:eye-off"></span>
                隐私设置
              </div>
              <div class="settings-nav-item" data-tab="message">
                <span class="iconify mr-2" data-icon="mdi:message-settings"></span>
                消息设置
              </div>
              <div class="settings-nav-item" data-tab="files">
                <span class="iconify mr-2" data-icon="mdi:file-settings"></span>
                文件设置
              </div>
              <div class="settings-nav-item" data-tab="backup">
                <span class="iconify mr-2" data-icon="mdi:backup-restore"></span>
                备份设置
              </div>
              <div class="settings-nav-item" data-tab="appearance">
                <span class="iconify mr-2" data-icon="mdi:palette"></span>
                界面设置
              </div>
              <div class="settings-nav-item" data-tab="logs">
                <span class="iconify mr-2" data-icon="mdi:clipboard-text-clock"></span>
                日志设置
              </div>
              <div class="settings-nav-item" data-tab="api">
                <span class="iconify mr-2" data-icon="mdi:api"></span>
                API设置
              </div>
            </div>
          </div>
        </div>

        <!-- 右侧设置内容 -->
        <div class="md:col-span-3">
          <!-- 通用设置 -->
          <div id="general-settings" class="card tab-content">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">通用设置</h2>
            
            <div class="space-y-6">
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center mb-2">
                  <div>
                    <h3 class="font-medium">平台名称</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">设置平台显示的名称</p>
                  </div>
                  <div class="w-1/3">
                    <input type="text" value="通讯管理系统" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center mb-2">
                  <div>
                    <h3 class="font-medium">默认语言</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">设置系统默认语言</p>
                  </div>
                  <div class="w-1/3">
                    <select class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                      <option selected="">简体中文</option>
                      <option>繁體中文</option>
                      <option>English</option>
                      <option>日本語</option>
                      <option>한국어</option>
                    </select>
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center mb-2">
                  <div>
                    <h3 class="font-medium">时区设置</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">设置系统默认时区</p>
                  </div>
                  <div class="w-1/3">
                    <select class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                      <option selected="">(GMT+08:00) 北京，香港，上海</option>
                      <option>(GMT+09:00) 东京，首尔</option>
                      <option>(GMT+00:00) 格林威治标准时间</option>
                      <option>(GMT-08:00) 太平洋时间</option>
                    </select>
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center mb-2">
                  <div>
                    <h3 class="font-medium">日期格式</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">设置日期显示格式</p>
                  </div>
                  <div class="w-1/3">
                    <select class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                      <option selected="">YYYY-MM-DD</option>
                      <option>DD/MM/YYYY</option>
                      <option>MM/DD/YYYY</option>
                      <option>YYYY年MM月DD日</option>
                    </select>
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center mb-2">
                  <div>
                    <h3 class="font-medium">默认主题</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">设置系统默认显示主题</p>
                  </div>
                  <div class="w-1/3">
                    <select class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                      <option selected="">浅色</option>
                      <option>深色</option>
                      <option>跟随系统</option>
                    </select>
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">启用消息历史</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">允许用户查看历史消息记录</p>
                  </div>
                  <div>
                    <label class="switch">
                      <input type="checkbox" checked="">
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">维护模式</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">开启维护模式，限制用户访问</p>
                  </div>
                  <div>
                    <label class="switch">
                      <input type="checkbox">
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="mt-6 flex justify-end">
              <button type="button" class="mr-3 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
                取消
              </button>
              <button type="button" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
                保存设置
              </button>
            </div>
          </div>
          
          <!-- 通知设置 -->
          <div id="notification-settings" class="card tab-content hidden">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">通知设置</h2>
            
            <div class="space-y-6">
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">系统通知</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">接收系统更新和维护通知</p>
                  </div>
                  <div>
                    <label class="switch">
                      <input type="checkbox" checked="">
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">新用户注册通知</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">当有新用户注册时接收通知</p>
                  </div>
                  <div>
                    <label class="switch">
                      <input type="checkbox" checked="">
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">异常登录通知</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">检测到异常登录行为时发送通知</p>
                  </div>
                  <div>
                    <label class="switch">
                      <input type="checkbox" checked="">
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">系统报告</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">定期接收系统状态和性能报告</p>
                  </div>
                  <div>
                    <label class="switch">
                      <input type="checkbox">
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center mb-2">
                  <div>
                    <h3 class="font-medium">系统报告频率</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">设置接收系统报告的频率</p>
                  </div>
                  <div class="w-1/3">
                    <select class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                      <option>每日</option>
                      <option selected="">每周</option>
                      <option>每月</option>
                    </select>
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">电子邮件通知</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">通过电子邮件接收重要通知</p>
                  </div>
                  <div>
                    <label class="switch">
                      <input type="checkbox" checked="">
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="mt-6 flex justify-end">
              <button type="button" class="mr-3 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
                取消
              </button>
              <button type="button" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
                保存设置
              </button>
            </div>
          </div>
          
          <!-- 安全设置 -->
          <div id="security-settings" class="card tab-content hidden">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">安全设置</h2>
            
            <div class="space-y-6">
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center mb-2">
                  <div>
                    <h3 class="font-medium">密码策略</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">设置用户密码的复杂度要求</p>
                  </div>
                  <div class="w-1/3">
                    <select class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                      <option>低 (至少6个字符)</option>
                      <option selected="">中 (至少8个字符，包含数字)</option>
                      <option>高 (至少10个字符，包含数字、大小写和特殊字符)</option>
                    </select>
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center mb-2">
                  <div>
                    <h3 class="font-medium">密码有效期</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">设置密码过期时间</p>
                  </div>
                  <div class="w-1/3">
                    <select class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                      <option>从不</option>
                      <option>30天</option>
                      <option selected="">90天</option>
                      <option>180天</option>
                    </select>
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">双因素认证</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">要求管理员启用双因素认证</p>
                  </div>
                  <div>
                    <label class="switch">
                      <input type="checkbox" checked="">
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">登录失败锁定</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">多次登录失败后锁定账户</p>
                  </div>
                  <div>
                    <label class="switch">
                      <input type="checkbox" checked="">
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center mb-2">
                  <div>
                    <h3 class="font-medium">登录失败次数</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">触发账户锁定的失败登录次数</p>
                  </div>
                  <div class="w-1/3">
                    <input type="number" value="5" min="1" max="10" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center mb-2">
                  <div>
                    <h3 class="font-medium">会话超时</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">用户无操作后自动登出的时间（分钟）</p>
                  </div>
                  <div class="w-1/3">
                    <input type="number" value="30" min="5" max="120" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                  </div>
                </div>
              </div>
              
              <div class="border-b pb-4 border-gray-200 dark:border-gray-700">
                <div class="flex justify-between items-center">
                  <div>
                    <h3 class="font-medium">IP访问限制</h3>
                    <p class="text-sm text-gray-500 dark:text-gray-400">启用IP地址白名单</p>
                  </div>
                  <div>
                    <label class="switch">
                      <input type="checkbox">
                      <span class="slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="mt-6 flex justify-end">
              <button type="button" class="mr-3 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
                取消
              </button>
              <button type="button" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
                保存设置
              </button>
            </div>
          </div>
          
          <!-- 其他设置内容（隐藏） -->
          <div id="privacy-settings" class="card tab-content hidden">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">隐私设置</h2>
            <p>隐私相关设置内容将在此显示...</p>
          </div>
          
          <div id="message-settings" class="card tab-content hidden">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">消息设置</h2>
            <p>消息相关设置内容将在此显示...</p>
          </div>
          
          <div id="files-settings" class="card tab-content hidden">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">文件设置</h2>
            <p>文件相关设置内容将在此显示...</p>
          </div>
          
          <div id="backup-settings" class="card tab-content hidden">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">备份设置</h2>
            <p>备份相关设置内容将在此显示...</p>
          </div>
          
          <div id="appearance-settings" class="card tab-content hidden">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">界面设置</h2>
            <p>界面相关设置内容将在此显示...</p>
          </div>
          
          <div id="logs-settings" class="card tab-content hidden">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">日志设置</h2>
            <p>日志相关设置内容将在此显示...</p>
          </div>
          
          <div id="api-settings" class="card tab-content hidden">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">API设置</h2>
            <p>API相关设置内容将在此显示...</p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- 确认保存设置模态框 -->
  <div id="saveSettingsModal" class="modal">
    <div class="modal-content" style="max-width: 400px;">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold">保存设置</h3>
          <button class="close-modal text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <div class="mb-6">
          <p class="text-gray-700 dark:text-gray-300">您确定要保存更改吗？部分设置更改可能需要重启系统才能生效。</p>
        </div>

        <div class="flex justify-end space-x-3">
          <button type="button" class="close-modal px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            取消
          </button>
          <button type="button" id="confirmSaveBtn" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
            确认保存
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 主题切换
      const themeToggle = document.querySelector('.theme-toggle');
      themeToggle.addEventListener('click', function() {
        const html = document.querySelector('html');
        if (html.classList.contains('dark')) {
          html.classList.remove('dark');
          localStorage.setItem('theme', 'light');
        } else {
          html.classList.add('dark');
          localStorage.setItem('theme', 'dark');
        }
      });
      
      // 检查本地存储的主题设置
      if (localStorage.getItem('theme') === 'dark') {
        document.querySelector('html').classList.add('dark');
      }
      
      // 设置导航切换
      const settingsNavItems = document.querySelectorAll('.settings-nav-item');
      const tabContents = document.querySelectorAll('.tab-content');
      
      settingsNavItems.forEach(item => {
        item.addEventListener('click', function() {
          const tabName = this.getAttribute('data-tab');
          
          // 更新导航项样式
          settingsNavItems.forEach(nav => nav.classList.remove('active'));
          this.classList.add('active');
          
          // 显示对应的内容区块
          tabContents.forEach(tab => {
            if (tab.id === tabName + '-settings') {
              tab.classList.remove('hidden');
            } else {
              tab.classList.add('hidden');
            }
          });
        });
      });
      
      // 保存设置模态框
      const saveSettingsModal = document.getElementById('saveSettingsModal');
      const saveButtons = document.querySelectorAll('button.px-4.py-2.bg-primary');
      const closeModalButtons = document.querySelectorAll('.close-modal');
      const confirmSaveBtn = document.getElementById('confirmSaveBtn');
      
      saveButtons.forEach(button => {
        button.addEventListener('click', function() {
          saveSettingsModal.classList.add('active');
        });
      });
      
      closeModalButtons.forEach(button => {
        button.addEventListener('click', function() {
          saveSettingsModal.classList.remove('active');
        });
      });
      
      confirmSaveBtn.addEventListener('click', function() {
        // 这里添加保存设置的逻辑
        console.log('保存设置');
        
        // 模拟保存成功
        saveSettingsModal.classList.remove('active');
        
        // 显示保存成功的提示
        alert('设置已成功保存');
      });
    });
  </script>




  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>数据分析 - 通讯软件后台管理系统</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        fontFamily: {
          sans: ['Inter', 'sans-serif'],
        },
        extend: {
          colors: {
            primary: '#3b82f6',
            success: '#10b981',
            warning: '#f59e0b',
            error: '#ef4444',
            background: {
              light: '#f8fafc',
              dark: '#1f2937'
            }
          }
        }
      },
      darkMode: 'class',
    }
  </script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
      height: 100%;
      margin: 0;
      padding: 0;
      color: #1f2937;
    }
    .dark body {
      background-color: #111827;
      color: #f3f4f6;
    }
    .dashboard-container {
      max-width: 1440px;
      min-height: 100vh;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 240px 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas: 
        "sidebar topbar"
        "sidebar main";
    }
    .sidebar {
      grid-area: sidebar;
      border-right: 1px solid #e5e7eb;
      background: #f8fafc;
      padding: 24px 0;
    }
    .dark .sidebar {
      background: #1f2937;
      border-right: 1px solid #374151;
    }
    .topbar {
      grid-area: topbar;
      background: #ffffff;
      border-bottom: 1px solid #e5e7eb;
      padding: 16px 32px;
    }
    .dark .topbar {
      background: #1f2937;
      border-bottom: 1px solid #374151;
    }
    .main-content {
      grid-area: main;
      background: #f9fafb;
      padding: 24px;
      overflow-y: auto;
    }
    .dark .main-content {
      background: #111827;
    }
    .card {
      background: #ffffff;
      border-radius: 8px;
      padding: 20px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }
    .dark .card {
      background: #1f2937;
      border: 1px solid #374151;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
    }
    .nav-item {
      padding: 12px 24px;
      font-size: 14px;
      color: #4b5563;
      border-left: 3px solid transparent;
      transition: all 0.2s;
    }
    .dark .nav-item {
      color: #d1d5db;
    }
    .nav-item:hover, .nav-item.active {
      background: #f1f5f9;
      border-left: 3px solid #3b82f6;
      color: #3b82f6;
    }
    .dark .nav-item:hover, .dark .nav-item.active {
      background: #1a2435;
    }
    .notification-dot {
      top: -2px;
      right: -2px;
      width: 8px;
      height: 8px;
      background-color: #ef4444;
    }
    .chart-container {
      width: 100%;
      height: 300px;
    }
    .tab-button {
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.2s;
    }
    .tab-button.active {
      background-color: #3b82f6;
      color: white;
    }
    .dark .tab-button.active {
      background-color: #2563eb;
    }
    .data-filter-panel {
      transition: all 0.3s ease;
      max-height: 0;
      overflow: hidden;
    }
    .data-filter-panel.expanded {
      max-height: 500px;
    }
    @media (max-width: 1024px) {
      .dashboard-container {
        grid-template-columns: 200px 1fr;
      }
    }
    @media (max-width: 768px) {
      .dashboard-container {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "topbar"
          "main";
      }
      .sidebar {
        display: none;
      }
    }
  </style>


  <div class="dashboard-container">
    <!-- 左侧导航 -->
    <div class="sidebar">
      <div class="flex items-center px-6 mb-8">
        <span class="iconify text-2xl text-primary" data-icon="mdi:application"></span>
        <h1 class="text-xl font-bold ml-3 dark:text-white">通讯管理系统</h1>
      </div>
      <nav class="space-y-1">
        <a href="index.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:home"></span> 仪表盘
        </a>
        <a href="user-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-group"></span> 用户管理
        </a>
        <a href="message-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-processing"></span> 消息管理
        </a>
        <a href="group-chat-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-text"></span> 群聊管理
        </a>
        <a href="file-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:file-document"></span> 文件管理
        </a>
        <a href="data-analysis.html" class="nav-item flex items-center active">
          <span class="iconify mr-3" data-icon="mdi:chart-line"></span> 数据分析
        </a>
        <a href="system-settings.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:cog"></span> 系统设置
        </a>
        <a href="data-backup.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:content-save"></span> 数据备份
        </a>
        <a href="profile.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-circle"></span> 个人中心
        </a>
      </nav>
    </div>

    <!-- 顶部栏 -->
    <div class="topbar flex items-center justify-between">
      <div class="relative w-1/3">
        <input type="text" placeholder="搜索系统功能..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
        <span class="iconify absolute left-3 top-2.5 text-gray-400" data-icon="mdi:magnify"></span>
      </div>
      
      <div class="flex items-center space-x-6">
        <button class="theme-toggle">
          <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:theme-light-dark"></span>
        </button>
        
        <div class="relative">
          <button class="notification-btn">
            <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:bell-outline"></span>
            <span class="notification-dot absolute rounded-full"></span>
          </button>
        </div>
        
        <div class="flex items-center">
          <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center">
            <span class="iconify text-white" data-icon="mdi:account"></span>
          </div>
          <span class="ml-2 font-medium dark:text-white">管理员</span>
        </div>
      </div>
    </div>

    <!-- 主内容区 -->
    <main class="main-content">
      <div class="mb-6 flex justify-between items-center">
        <div>
          <h1 class="text-2xl font-bold dark:text-white">数据分析</h1>
          <p class="text-gray-500 text-sm mt-1 dark:text-gray-400">洞察通讯平台运营数据和用户行为</p>
        </div>
        <button id="exportDataBtn" class="bg-primary hover:bg-blue-600 text-white py-2 px-4 rounded-lg flex items-center">
          <span class="iconify mr-2" data-icon="mdi:export"></span>
          导出报表
        </button>
      </div>

      <!-- 分析类型选项卡 -->
      <div class="card mb-6">
        <div class="flex flex-wrap gap-2 mb-6">
          <button class="tab-button active" data-tab="overview">总体概览</button>
          <button class="tab-button" data-tab="users">用户分析</button>
          <button class="tab-button" data-tab="messages">消息分析</button>
          <button class="tab-button" data-tab="groups">群组分析</button>
          <button class="tab-button" data-tab="files">文件分析</button>
        </div>

        <!-- 数据筛选控制区域 -->
        <div class="mb-4">
          <button id="toggleFilterPanel" class="flex items-center text-gray-700 dark:text-gray-300 text-sm">
            <span class="iconify mr-1" data-icon="mdi:filter"></span>
            数据筛选
            <span class="iconify ml-1" data-icon="mdi:chevron-down"></span>
          </button>
          <div id="dataFilterPanel" class="data-filter-panel mt-2">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
              <div class="md:col-span-2">
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">时间范围</label>
                <div class="flex items-center gap-2">
                  <input type="date" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                  <span>至</span>
                  <input type="date" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                </div>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">数据粒度</label>
                <select class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                  <option value="day">按日</option>
                  <option value="week">按周</option>
                  <option value="month">按月</option>
                  <option value="quarter">按季度</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">用户分组</label>
                <select class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                  <option value="all">全部用户</option>
                  <option value="new">新用户</option>
                  <option value="active">活跃用户</option>
                  <option value="inactive">非活跃用户</option>
                </select>
              </div>
            </div>
            <div class="flex justify-end mt-4">
              <button id="resetFiltersBtn" class="mr-2 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600">
                重置
              </button>
              <button id="applyFiltersBtn" class="bg-primary hover:bg-blue-600 text-white py-2 px-4 rounded-lg">
                应用
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- 数据总览面板 -->
      <div id="overview-panel" class="tab-panel">
        <!-- 关键指标卡片 -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
          <div class="card flex items-center">
            <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center">
              <span class="iconify text-blue-500 text-xl" data-icon="mdi:account-group"></span>
            </div>
            <div class="ml-4">
              <div class="text-gray-500 text-sm dark:text-gray-400">日活用户</div>
              <div class="text-2xl font-bold dark:text-white">18,459</div>
              <div class="text-xs text-green-500">↑ 12.5% 同比上周</div>
            </div>
          </div>
          
          <div class="card flex items-center">
            <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center">
              <span class="iconify text-green-500 text-xl" data-icon="mdi:account-plus"></span>
            </div>
            <div class="ml-4">
              <div class="text-gray-500 text-sm dark:text-gray-400">新增用户</div>
              <div class="text-2xl font-bold dark:text-white">358</div>
              <div class="text-xs text-green-500">↑ 5.2% 同比上周</div>
            </div>
          </div>
          
          <div class="card flex items-center">
            <div class="w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center">
              <span class="iconify text-orange-500 text-xl" data-icon="mdi:message-text-outline"></span>
            </div>
            <div class="ml-4">
              <div class="text-gray-500 text-sm dark:text-gray-400">日均消息量</div>
              <div class="text-2xl font-bold dark:text-white">154,832</div>
              <div class="text-xs text-green-500">↑ 8.7% 同比上周</div>
            </div>
          </div>
          
          <div class="card flex items-center">
            <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center">
              <span class="iconify text-purple-500 text-xl" data-icon="mdi:account-multiple-check"></span>
            </div>
            <div class="ml-4">
              <div class="text-gray-500 text-sm dark:text-gray-400">留存率</div>
              <div class="text-2xl font-bold dark:text-white">78.3%</div>
              <div class="text-xs text-red-500">↓ 1.2% 同比上周</div>
            </div>
          </div>
        </div>

        <!-- 趋势图表 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
          <div class="card">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold dark:text-white">用户活跃度趋势</h2>
              <select class="text-sm border border-gray-300 rounded px-3 py-1 dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <option>近7天</option>
                <option selected="">近30天</option>
                <option>近90天</option>
              </select>
            </div>
            <div class="chart-container" id="user-activity-chart"></div>
          </div>
          
          <div class="card">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold dark:text-white">消息量趋势</h2>
              <select class="text-sm border border-gray-300 rounded px-3 py-1 dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <option>近7天</option>
                <option selected="">近30天</option>
                <option>近90天</option>
              </select>
            </div>
            <div class="chart-container" id="message-trend-chart"></div>
          </div>
        </div>

        <!-- 地域分布 -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
          <div class="card">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold dark:text-white">用户地域分布</h2>
              <select class="text-sm border border-gray-300 rounded px-3 py-1 dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <option>全国</option>
                <option selected="">省份</option>
                <option>城市</option>
              </select>
            </div>
            <div class="chart-container" id="user-geo-chart"></div>
          </div>
          
          <div class="card">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold dark:text-white">设备占比</h2>
              <div></div>
            </div>
            <div class="chart-container" id="device-chart"></div>
          </div>
        </div>
      </div>

      <!-- 用户分析面板 -->
      <div id="users-panel" class="tab-panel hidden">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
          <div class="card">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">用户性别比例</h2>
            <div class="h-60" id="gender-chart"></div>
          </div>
          <div class="card">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">用户年龄分布</h2>
            <div class="h-60" id="age-chart"></div>
          </div>
          <div class="card">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">用户活跃程度</h2>
            <div class="h-60" id="activity-level-chart"></div>
          </div>
        </div>
        
        <div class="card mb-6">
          <h2 class="text-lg font-semibold mb-4 dark:text-white">用户增长漏斗</h2>
          <div class="chart-container" id="user-funnel-chart"></div>
        </div>
        
        <div class="card">
          <h2 class="text-lg font-semibold mb-4 dark:text-white">用户留存热力图</h2>
          <div class="chart-container" id="retention-heatmap"></div>
        </div>
      </div>
      
      <!-- 消息分析面板 -->
      <div id="messages-panel" class="tab-panel hidden">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
          <div class="card">
            <div class="text-center">
              <div class="text-gray-500 text-sm dark:text-gray-400">平均每日发送消息</div>
              <div class="text-3xl font-bold mt-2 dark:text-white">154,832</div>
              <div class="text-xs text-green-500 mt-1">↑ 8.7% 同比上周</div>
            </div>
          </div>
          <div class="card">
            <div class="text-center">
              <div class="text-gray-500 text-sm dark:text-gray-400">人均消息数</div>
              <div class="text-3xl font-bold mt-2 dark:text-white">12.6</div>
              <div class="text-xs text-green-500 mt-1">↑ 2.1% 同比上周</div>
            </div>
          </div>
          <div class="card">
            <div class="text-center">
              <div class="text-gray-500 text-sm dark:text-gray-400">图片消息占比</div>
              <div class="text-3xl font-bold mt-2 dark:text-white">23.4%</div>
              <div class="text-xs text-red-500 mt-1">↓ 0.8% 同比上周</div>
            </div>
          </div>
          <div class="card">
            <div class="text-center">
              <div class="text-gray-500 text-sm dark:text-gray-400">视频消息占比</div>
              <div class="text-3xl font-bold mt-2 dark:text-white">8.7%</div>
              <div class="text-xs text-green-500 mt-1">↑ 1.3% 同比上周</div>
            </div>
          </div>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
          <div class="card">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">消息类型分布</h2>
            <div class="chart-container" id="message-type-chart"></div>
          </div>
          <div class="card">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">消息发送时间热力图</h2>
            <div class="chart-container" id="message-time-heatmap"></div>
          </div>
        </div>
        
        <div class="card">
          <h2 class="text-lg font-semibold mb-4 dark:text-white">热门会话排行</h2>
          <div class="overflow-x-auto">
            <table class="min-w-full">
              <thead>
                <tr class="text-left text-gray-500 dark:text-gray-400">
                  <th class="py-2 px-4">排名</th>
                  <th class="py-2 px-4">会话名称</th>
                  <th class="py-2 px-4">消息量</th>
                  <th class="py-2 px-4">活跃用户数</th>
                  <th class="py-2 px-4">平均回复速度</th>
                </tr>
              </thead>
              <tbody>
                <tr class="border-t border-gray-200 dark:border-gray-700">
                  <td class="py-3 px-4">1</td>
                  <td class="py-3 px-4">项目研发群</td>
                  <td class="py-3 px-4">12,458</td>
                  <td class="py-3 px-4">24</td>
                  <td class="py-3 px-4">1分钟</td>
                </tr>
                <tr class="border-t border-gray-200 dark:border-gray-700">
                  <td class="py-3 px-4">2</td>
                  <td class="py-3 px-4">市场部</td>
                  <td class="py-3 px-4">8,932</td>
                  <td class="py-3 px-4">12</td>
                  <td class="py-3 px-4">2分钟</td>
                </tr>
                <tr class="border-t border-gray-200 dark:border-gray-700">
                  <td class="py-3 px-4">3</td>
                  <td class="py-3 px-4">公司公告</td>
                  <td class="py-3 px-4">7,845</td>
                  <td class="py-3 px-4">58</td>
                  <td class="py-3 px-4">5分钟</td>
                </tr>
                <tr class="border-t border-gray-200 dark:border-gray-700">
                  <td class="py-3 px-4">4</td>
                  <td class="py-3 px-4">技术支持</td>
                  <td class="py-3 px-4">6,721</td>
                  <td class="py-3 px-4">8</td>
                  <td class="py-3 px-4">45秒</td>
                </tr>
                <tr class="border-t border-gray-200 dark:border-gray-700">
                  <td class="py-3 px-4">5</td>
                  <td class="py-3 px-4">产品设计讨论组</td>
                  <td class="py-3 px-4">5,368</td>
                  <td class="py-3 px-4">15</td>
                  <td class="py-3 px-4">2分钟</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- 群组分析面板 -->
      <div id="groups-panel" class="tab-panel hidden">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6">
          <div class="card">
            <div class="text-center">
              <div class="text-gray-500 text-sm dark:text-gray-400">总群聊数量</div>
              <div class="text-3xl font-bold mt-2 dark:text-white">4,372</div>
              <div class="text-xs text-green-500 mt-1">↑ 4.2% 同比上月</div>
            </div>
          </div>
          <div class="card">
            <div class="text-center">
              <div class="text-gray-500 text-sm dark:text-gray-400">人均加入群聊</div>
              <div class="text-3xl font-bold mt-2 dark:text-white">3.8</div>
              <div class="text-xs text-green-500 mt-1">↑ 0.2 同比上月</div>
            </div>
          </div>
          <div class="card">
            <div class="text-center">
              <div class="text-gray-500 text-sm dark:text-gray-400">群活跃率</div>
              <div class="text-3xl font-bold mt-2 dark:text-white">65.1%</div>
              <div class="text-xs text-green-500 mt-1">↑ 2.3% 同比上月</div>
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
          <div class="card">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">群聊规模分布</h2>
            <div class="chart-container" id="group-size-chart"></div>
          </div>
          <div class="card">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">群聊活跃度分布</h2>
            <div class="chart-container" id="group-activity-chart"></div>
          </div>
        </div>
        
        <div class="card mb-6">
          <h2 class="text-lg font-semibold mb-4 dark:text-white">群聊生命周期</h2>
          <div class="chart-container" id="group-lifecycle-chart"></div>
        </div>
      </div>

      <!-- 文件分析面板 -->
      <div id="files-panel" class="tab-panel hidden">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
          <div class="card">
            <div class="text-center">
              <div class="text-gray-500 text-sm dark:text-gray-400">总存储使用</div>
              <div class="text-3xl font-bold mt-2 dark:text-white">86.2GB</div>
              <div class="text-xs text-gray-500 mt-1">总容量: 200GB</div>
            </div>
          </div>
          <div class="card">
            <div class="text-center">
              <div class="text-gray-500 text-sm dark:text-gray-400">图片存储</div>
              <div class="text-3xl font-bold mt-2 dark:text-white">32.5GB</div>
              <div class="text-xs text-gray-500 mt-1">占比: 37.7%</div>
            </div>
          </div>
          <div class="card">
            <div class="text-center">
              <div class="text-gray-500 text-sm dark:text-gray-400">视频存储</div>
              <div class="text-3xl font-bold mt-2 dark:text-white">41.8GB</div>
              <div class="text-xs text-gray-500 mt-1">占比: 48.5%</div>
            </div>
          </div>
          <div class="card">
            <div class="text-center">
              <div class="text-gray-500 text-sm dark:text-gray-400">文档存储</div>
              <div class="text-3xl font-bold mt-2 dark:text-white">11.9GB</div>
              <div class="text-xs text-gray-500 mt-1">占比: 13.8%</div>
            </div>
          </div>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
          <div class="card">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">文件类型分布</h2>
            <div class="chart-container" id="file-type-chart"></div>
          </div>
          <div class="card">
            <h2 class="text-lg font-semibold mb-4 dark:text-white">存储空间增长趋势</h2>
            <div class="chart-container" id="storage-growth-chart"></div>
          </div>
        </div>
        
        <div class="card">
          <h2 class="text-lg font-semibold mb-4 dark:text-white">文件热门程度</h2>
          <div class="overflow-x-auto">
            <table class="min-w-full">
              <thead>
                <tr class="text-left text-gray-500 dark:text-gray-400">
                  <th class="py-2 px-4">排名</th>
                  <th class="py-2 px-4">文件名称</th>
                  <th class="py-2 px-4">类型</th>
                  <th class="py-2 px-4">大小</th>
                  <th class="py-2 px-4">访问次数</th>
                  <th class="py-2 px-4">下载次数</th>
                </tr>
              </thead>
              <tbody>
                <tr class="border-t border-gray-200 dark:border-gray-700">
                  <td class="py-3 px-4">1</td>
                  <td class="py-3 px-4">产品演示视频.mp4</td>
                  <td class="py-3 px-4">视频</td>
                  <td class="py-3 px-4">24.8 MB</td>
                  <td class="py-3 px-4">423</td>
                  <td class="py-3 px-4">218</td>
                </tr>
                <tr class="border-t border-gray-200 dark:border-gray-700">
                  <td class="py-3 px-4">2</td>
                  <td class="py-3 px-4">财务报表Q2.pdf</td>
                  <td class="py-3 px-4">PDF</td>
                  <td class="py-3 px-4">3.2 MB</td>
                  <td class="py-3 px-4">387</td>
                  <td class="py-3 px-4">145</td>
                </tr>
                <tr class="border-t border-gray-200 dark:border-gray-700">
                  <td class="py-3 px-4">3</td>
                  <td class="py-3 px-4">会议照片.jpg</td>
                  <td class="py-3 px-4">图片</td>
                  <td class="py-3 px-4">2.4 MB</td>
                  <td class="py-3 px-4">352</td>
                  <td class="py-3 px-4">127</td>
                </tr>
                <tr class="border-t border-gray-200 dark:border-gray-700">
                  <td class="py-3 px-4">4</td>
                  <td class="py-3 px-4">项目计划书.docx</td>
                  <td class="py-3 px-4">文档</td>
                  <td class="py-3 px-4">1.8 MB</td>
                  <td class="py-3 px-4">289</td>
                  <td class="py-3 px-4">176</td>
                </tr>
                <tr class="border-t border-gray-200 dark:border-gray-700">
                  <td class="py-3 px-4">5</td>
                  <td class="py-3 px-4">销售数据统计.xlsx</td>
                  <td class="py-3 px-4">Excel</td>
                  <td class="py-3 px-4">1.2 MB</td>
                  <td class="py-3 px-4">245</td>
                  <td class="py-3 px-4">132</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 主题切换
      const themeToggle = document.querySelector('.theme-toggle');
      themeToggle.addEventListener('click', function() {
        const html = document.querySelector('html');
        if (html.classList.contains('dark')) {
          html.classList.remove('dark');
          localStorage.setItem('theme', 'light');
        } else {
          html.classList.add('dark');
          localStorage.setItem('theme', 'dark');
        }
        
        // 重新渲染所有图表以适应主题变化
        renderAllCharts();
      });
      
      // 检查本地存储的主题设置
      if (localStorage.getItem('theme') === 'dark') {
        document.querySelector('html').classList.add('dark');
      }
      
      // 筛选面板展开/收起
      const toggleFilterPanel = document.getElementById('toggleFilterPanel');
      const dataFilterPanel = document.getElementById('dataFilterPanel');
      
      toggleFilterPanel.addEventListener('click', function() {
        dataFilterPanel.classList.toggle('expanded');
        const chevronIcon = this.querySelector('[data-icon="mdi:chevron-down"]');
        if (dataFilterPanel.classList.contains('expanded')) {
          chevronIcon.setAttribute('data-icon', 'mdi:chevron-up');
        } else {
          chevronIcon.setAttribute('data-icon', 'mdi:chevron-down');
        }
      });
      
      // 选项卡切换
      const tabButtons = document.querySelectorAll('.tab-button');
      const tabPanels = document.querySelectorAll('.tab-panel');
      
      tabButtons.forEach(button => {
        button.addEventListener('click', function() {
          const tabName = this.getAttribute('data-tab');
          
          // 切换按钮样式
          tabButtons.forEach(btn => btn.classList.remove('active'));
          this.classList.add('active');
          
          // 切换面板显示
          tabPanels.forEach(panel => {
            if (panel.id === tabName + '-panel') {
              panel.classList.remove('hidden');
            } else {
              panel.classList.add('hidden');
            }
          });
          
          // 重新渲染当前面板的图表
          renderChartsForTab(tabName);
        });
      });
      
      // 初始化渲染总览面板的图表
      renderChartsForTab('overview');
      
      // 窗口大小变化时重新渲染图表
      window.addEventListener('resize', function() {
        const activeTab = document.querySelector('.tab-button.active').getAttribute('data-tab');
        renderChartsForTab(activeTab);
      });
      
      // 为导出按钮添加事件
      document.getElementById('exportDataBtn').addEventListener('click', function() {
        alert('正在准备导出数据，请稍候...');
      });
      
      // 筛选器重置按钮
      document.getElementById('resetFiltersBtn').addEventListener('click', function() {
        // 重置筛选器逻辑
        alert('已重置所有筛选条件');
      });
      
      // 筛选器应用按钮
      document.getElementById('applyFiltersBtn').addEventListener('click', function() {
        // 应用筛选逻辑
        alert('正在应用筛选条件，加载数据中...');
        // 这里应该根据筛选条件重新加载数据和渲染图表
        const activeTab = document.querySelector('.tab-button.active').getAttribute('data-tab');
        renderChartsForTab(activeTab);
      });
    });

    // 根据当前选项卡渲染相应的图表
    function renderChartsForTab(tabName) {
      switch(tabName) {
        case 'overview':
          renderOverviewCharts();
          break;
        case 'users':
          renderUserCharts();
          break;
        case 'messages':
          renderMessageCharts();
          break;
        case 'groups':
          renderGroupCharts();
          break;
        case 'files':
          renderFileCharts();
          break;
      }
    }

    // 渲染所有图表（主题切换时调用）
    function renderAllCharts() {
      renderOverviewCharts();
      renderUserCharts();
      renderMessageCharts();
      renderGroupCharts();
      renderFileCharts();
    }

    // 渲染总览面板的图表
    function renderOverviewCharts() {
      // 用户活跃度趋势图
      if (document.getElementById('user-activity-chart')) {
        const isDarkMode = document.documentElement.classList.contains('dark');
        const textColor = isDarkMode ? '#d1d5db' : '#4b5563';
        const borderColor = isDarkMode ? '#374151' : '#e5e7eb';
        
        const userActivityChart = echarts.init(document.getElementById('user-activity-chart'));
        userActivityChart.setOption({
          tooltip: {
            trigger: 'axis'
          },
          legend: {
            data: ['日活用户', '周活用户', '月活用户'],
            textStyle: {
              color: textColor
            }
          },
          grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
          },
          xAxis: {
            type: 'category',
            boundaryGap: false,
            data: ['1日', '5日', '10日', '15日', '20日', '25日', '30日'],
            axisLine: {
              lineStyle: {
                color: borderColor
              }
            },
            axisLabel: {
              color: textColor
            }
          },
          yAxis: {
            type: 'value',
            axisLine: {
              lineStyle: {
                color: borderColor
              }
            },
            axisLabel: {
              color: textColor
            },
            splitLine: {
              lineStyle: {
                color: borderColor,
                opacity: 0.3
              }
            }
          },
          series: [
            {
              name: '日活用户',
              type: 'line',
              stack: 'Total',
              areaStyle: {
                opacity: 0.2
              },
              emphasis: {
                focus: 'series'
              },
              data: [15000, 16200, 17800, 18400, 18900, 19200, 18459]
            },
            {
              name: '周活用户',
              type: 'line',
              stack: 'Total',
              areaStyle: {
                opacity: 0.2
              },
              emphasis: {
                focus: 'series'
              },
              data: [21000, 22300, 23100, 24200, 25100, 26400, 27200]
            },
            {
              name: '月活用户',
              type: 'line',
              stack: 'Total',
              areaStyle: {
                opacity: 0.2
              },
              emphasis: {
                focus: 'series'
              },
              data: [28000, 28500, 29000, 29500, 30200, 31500, 32458]
            }
          ]
        });
      }
      
      // 消息量趋势图
      if (document.getElementById('message-trend-chart')) {
        const isDarkMode = document.documentElement.classList.contains('dark');
        const textColor = isDarkMode ? '#d1d5db' : '#4b5563';
        const borderColor = isDarkMode ? '#374151' : '#e5e7eb';
        
        const messageTrendChart = echarts.init(document.getElementById('message-trend-chart'));
        messageTrendChart.setOption({
          tooltip: {
            trigger: 'axis',
            axisPointer: {
              type: 'shadow'
            }
          },
          legend: {
            data: ['文本消息', '图片消息', '视频消息', '文件消息'],
            textStyle: {
              color: textColor
            }
          },
          grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
          },
          xAxis: [
            {
              type: 'category',
              data: ['1日', '5日', '10日', '15日', '20日', '25日', '30日'],
              axisLine: {
                lineStyle: {
                  color: borderColor
                }
              },
              axisLabel: {
                color: textColor
              }
            }
          ],
          yAxis: [
            {
              type: 'value',
              axisLine: {
                lineStyle: {
                  color: borderColor
                }
              },
              axisLabel: {
                color: textColor
              },
              splitLine: {
                lineStyle: {
                  color: borderColor,
                  opacity: 0.3
                }
              }
            }
          ],
          series: [
            {
              name: '文本消息',
              type: 'bar',
              stack: 'total',
              emphasis: {
                focus: 'series'
              },
              data: [102000, 108500, 114200, 121500, 128300, 135000, 142300]
            },
            {
              name: '图片消息',
              type: 'bar',
              stack: 'total',
              emphasis: {
                focus: 'series'
              },
              data: [30500, 32400, 34600, 37200, 39500, 41800, 44000]
            },
            {
              name: '视频消息',
              type: 'bar',
              stack: 'total',
              emphasis: {
                focus: 'series'
              },
              data: [15200, 15800, 16500, 17300, 18100, 18900, 19700]
            },
            {
              name: '文件消息',
              type: 'bar',
              stack: 'total',
              emphasis: {
                focus: 'series'
              },
              data: [8500, 8900, 9300, 9700, 10200, 10700, 11300]
            }
          ]
        });
      }
      
      // 用户地域分布图
      if (document.getElementById('user-geo-chart')) {
        const isDarkMode = document.documentElement.classList.contains('dark');
        const textColor = isDarkMode ? '#d1d5db' : '#4b5563';
        const borderColor = isDarkMode ? '#374151' : '#e5e7eb';
        
        const userGeoChart = echarts.init(document.getElementById('user-geo-chart'));
        userGeoChart.setOption({
          tooltip: {
            trigger: 'item',
            formatter: '{b}: {c} ({d}%)'
          },
          legend: {
            orient: 'vertical',
            left: 'left',
            textStyle: {
              color: textColor
            }
          },
          series: [
            {
              name: '用户分布',
              type: 'pie',
              radius: '70%',
              center: ['60%', '50%'],
              data: [
                { value: 8925, name: '华东' },
                { value: 6784, name: '华北' },
                { value: 5426, name: '华南' },
                { value: 4321, name: '西南' },
                { value: 3622, name: '华中' },
                { value: 2156, name: '西北' },
                { value: 1224, name: '东北' }
              ],
              emphasis: {
                itemStyle: {
                  shadowBlur: 10,
                  shadowOffsetX: 0,
                  shadowColor: 'rgba(0, 0, 0, 0.5)'
                }
              }
            }
          ]
        });
      }
      
      // 设备占比图
      if (document.getElementById('device-chart')) {
        const isDarkMode = document.documentElement.classList.contains('dark');
        const textColor = isDarkMode ? '#d1d5db' : '#4b5563';
        const borderColor = isDarkMode ? '#374151' : '#e5e7eb';
        
        const deviceChart = echarts.init(document.getElementById('device-chart'));
        deviceChart.setOption({
          tooltip: {
            trigger: 'item',
            formatter: '{b}: {c} ({d}%)'
          },
          legend: {
            orient: 'vertical',
            left: 'left',
            textStyle: {
              color: textColor
            }
          },
          series: [
            {
              name: '设备占比',
              type: 'pie',
              radius: ['40%', '70%'],
              center: ['60%', '50%'],
              avoidLabelOverlap: false,
              label: {
                show: false,
                position: 'center'
              },
              emphasis: {
                label: {
                  show: true,
                  fontSize: '18',
                  fontWeight: 'bold'
                }
              },
              labelLine: {
                show: false
              },
              data: [
                { value: 18456, name: '安卓手机' },
                { value: 12358, name: '苹果手机' },
                { value: 834, name: '平板' },
                { value: 642, name: 'Windows电脑' },
                { value: 168, name: 'Mac电脑' }
              ]
            }
          ]
        });
      }
    }

    // 渲染用户分析面板的图表
    function renderUserCharts() {
      // 由于相应的DOM可能不在视图中，需要先检查元素是否存在
      if (!document.getElementById('gender-chart')) return;
      
      const isDarkMode = document.documentElement.classList.contains('dark');
      const textColor = isDarkMode ? '#d1d5db' : '#4b5563';
      const borderColor = isDarkMode ? '#374151' : '#e5e7eb';
      
      // 性别比例
      const genderChart = echarts.init(document.getElementById('gender-chart'));
      genderChart.setOption({
        tooltip: {
          trigger: 'item'
        },
        legend: {
          bottom: '0%',
          left: 'center',
          textStyle: {
            color: textColor
          }
        },
        series: [
          {
            name: '性别比例',
            type: 'pie',
            radius: ['40%', '70%'],
            avoidLabelOverlap: false,
            itemStyle: {
              borderRadius: 10,
              borderColor: isDarkMode ? '#1f2937' : '#fff',
              borderWidth: 2
            },
            label: {
              show: false,
              position: 'center'
            },
            emphasis: {
              label: {
                show: true,
                fontSize: '18',
                fontWeight: 'bold'
              }
            },
            labelLine: {
              show: false
            },
            data: [
              { value: 17684, name: '男性' },
              { value: 14152, name: '女性' },
              { value: 622, name: '未知' }
            ]
          }
        ]
      });
      
      // 年龄分布
      const ageChart = echarts.init(document.getElementById('age-chart'));
      ageChart.setOption({
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          }
        },
        grid: {
          left: '3%',
          right: '4%',
          bottom: '10%',
          containLabel: true
        },
        xAxis: [
          {
            type: 'category',
            data: ['<18岁', '18-24岁', '25-34岁', '35-44岁', '45-54岁', '>55岁'],
            axisTick: {
              alignWithLabel: true
            },
            axisLine: {
              lineStyle: {
                color: borderColor
              }
            },
            axisLabel: {
              color: textColor
            }
          }
        ],
        yAxis: [
          {
            type: 'value',
            axisLine: {
              lineStyle: {
                color: borderColor
              }
            },
            axisLabel: {
              color: textColor
            },
            splitLine: {
              lineStyle: {
                color: borderColor,
                opacity: 0.3
              }
            }
          }
        ],
        series: [
          {
            name: '用户数',
            type: 'bar',
            barWidth: '60%',
            data: [2560, 8935, 12450, 5840, 1984, 689]
          }
        ]
      });
      
      // 用户活跃程度
      const activityLevelChart = echarts.init(document.getElementById('activity-level-chart'));
      activityLevelChart.setOption({
        tooltip: {
          trigger: 'item'
        },
        legend: {
          bottom: '0%',
          left: 'center',
          textStyle: {
            color: textColor
          }
        },
        series: [
          {
            name: '活跃程度',
            type: 'pie',
            radius: '70%',
            data: [
              { value: 14568, name: '高活跃' },
              { value: 8254, name: '中活跃' },
              { value: 6352, name: '低活跃' },
              { value: 3284, name: '沉默用户' }
            ],
            emphasis: {
              itemStyle: {
                shadowBlur: 10,
                shadowOffsetX: 0,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
              }
            }
          }
        ]
      });
      
      // 用户增长漏斗
      const userFunnelChart = echarts.init(document.getElementById('user-funnel-chart'));
      userFunnelChart.setOption({
        tooltip: {
          trigger: 'item',
          formatter: '{b}: {c}'
        },
        legend: {
          top: 'bottom',
          textStyle: {
            color: textColor
          }
        },
        series: [
          {
            name: '用户漏斗',
            type: 'funnel',
            left: '10%',
            top: 10,
            bottom: 60,
            width: '80%',
            min: 0,
            max: 100,
            minSize: '0%',
            maxSize: '100%',
            sort: 'descending',
            gap: 2,
            label: {
              show: true,
              position: 'inside'
            },
            labelLine: {
              length: 10,
              lineStyle: {
                width: 1,
                type: 'solid'
              }
            },
            itemStyle: {
              borderColor: isDarkMode ? '#1f2937' : '#fff',
              borderWidth: 1
            },
            emphasis: {
              label: {
                fontSize: 20
              }
            },
            data: [
              { value: 35862, name: '浏览量' },
              { value: 20458, name: '注册量' },
              { value: 12589, name: '活跃用户' },
              { value: 8954, name: '留存用户' },
              { value: 3254, name: '付费用户' }
            ]
          }
        ]
      });
      
      // 用户留存热力图
      const retentionHeatmap = echarts.init(document.getElementById('retention-heatmap'));
      retentionHeatmap.setOption({
        tooltip: {
          position: 'top'
        },
        grid: {
          top: '8%',
          left: '3%',
          right: '4%',
          bottom: '8%',
          containLabel: true
        },
        xAxis: {
          type: 'category',
          data: ['1天后', '3天后', '7天后', '14天后', '30天后'],
          splitArea: {
            show: true
          },
          axisLine: {
            lineStyle: {
              color: borderColor
            }
          },
          axisLabel: {
            color: textColor
          }
        },
        yAxis: {
          type: 'category',
          data: ['第1周', '第2周', '第3周', '第4周', '第5周'],
          splitArea: {
            show: true
          },
          axisLine: {
            lineStyle: {
              color: borderColor
            }
          },
          axisLabel: {
            color: textColor
          }
        },
        visualMap: {
          min: 0,
          max: 100,
          calculable: true,
          orient: 'horizontal',
          left: 'center',
          bottom: '0%',
          textStyle: {
            color: textColor
          }
        },
        series: [
          {
            name: '留存率',
            type: 'heatmap',
            data: [
              [0, 0, 100],
              [0, 1, 85],
              [0, 2, 72],
              [0, 3, 63],
              [0, 4, 48],
              [1, 0, 100],
              [1, 1, 82],
              [1, 2, 68],
              [1, 3, 59],
              [1, 4, 45],
              [2, 0, 100],
              [2, 1, 87],
              [2, 2, 74],
              [2, 3, 65],
              [2, 4, 52],
              [3, 0, 100],
              [3, 1, 84],
              [3, 2, 71],
              [3, 3, 62],
              [3, 4, 47],
              [4, 0, 100],
              [4, 1, 88],
              [4, 2, 75],
              [4, 3, 66],
              [4, 4, 54]
            ],
            label: {
              show: true
            },
            emphasis: {
              itemStyle: {
                shadowBlur: 10,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
              }
            }
          }
        ]
      });
    }

    // 渲染消息分析面板的图表
    function renderMessageCharts() {
      if (!document.getElementById('message-type-chart')) return;
      
      const isDarkMode = document.documentElement.classList.contains('dark');
      const textColor = isDarkMode ? '#d1d5db' : '#4b5563';
      const borderColor = isDarkMode ? '#374151' : '#e5e7eb';
      
      // 消息类型分布
      const messageTypeChart = echarts.init(document.getElementById('message-type-chart'));
      messageTypeChart.setOption({
        tooltip: {
          trigger: 'item'
        },
        legend: {
          orient: 'vertical',
          left: 'left',
          textStyle: {
            color: textColor
          }
        },
        series: [
          {
            name: '消息类型',
            type: 'pie',
            radius: '70%',
            center: ['60%', '50%'],
            data: [
              { value: 68.5, name: '文本消息' },
              { value: 23.4, name: '图片消息' },
              { value: 8.7, name: '视频消息' },
              { value: 5.2, name: '文件消息' },
              { value: 2.1, name: '语音消息' },
              { value: 1.1, name: '其他类型' }
            ],
            emphasis: {
              itemStyle: {
                shadowBlur: 10,
                shadowOffsetX: 0,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
              }
            }
          }
        ]
      });
      
      // 消息发送时间热力图
      const hours = ['0', '1', '2', '3', '4', '5', '6',
        '7', '8', '9', '10', '11',
        '12', '13', '14', '15', '16', '17',
        '18', '19', '20', '21', '22', '23'];
      const days = ['周一', '周二', '周三', '周四', '周五', '周六', '周日'];
      
      const messageTimeHeatmap = echarts.init(document.getElementById('message-time-heatmap'));
      messageTimeHeatmap.setOption({
        tooltip: {
          position: 'top'
        },
        grid: {
          top: '8%',
          left: '3%',
          right: '4%',
          bottom: '8%',
          containLabel: true
        },
        xAxis: {
          type: 'category',
          data: hours,
          splitArea: {
            show: true
          },
          axisLine: {
            lineStyle: {
              color: borderColor
            }
          },
          axisLabel: {
            color: textColor
          }
        },
        yAxis: {
          type: 'category',
          data: days,
          splitArea: {
            show: true
          },
          axisLine: {
            lineStyle: {
              color: borderColor
            }
          },
          axisLabel: {
            color: textColor
          }
        },
        visualMap: {
          min: 0,
          max: 10,
          calculable: true,
          orient: 'horizontal',
          left: 'center',
          bottom: '0%',
          textStyle: {
            color: textColor
          }
        },
        series: [{
          name: '消息量',
          type: 'heatmap',
          data: [
            [0, 0, 2], [1, 0, 1], [2, 0, 0.5], [3, 0, 0.2], [4, 0, 0.1], [5, 0, 0.3], [6, 0, 1],
            [7, 0, 3], [8, 0, 5], [9, 0, 7], [10, 0, 8], [11, 0, 7], [12, 0, 6], [13, 0, 7],
            [14, 0, 8], [15, 0, 7], [16, 0, 6], [17, 0, 5], [18, 0, 4], [19, 0, 3], [20, 0, 4],
            [21, 0, 5], [22, 0, 4], [23, 0, 3],
            
            [0, 1, 2.5], [1, 1, 1.2], [2, 1, 0.6], [3, 1, 0.3], [4, 1, 0.2], [5, 1, 0.4], [6, 1, 1.2],
            [7, 1, 3.2], [8, 1, 5.3], [9, 1, 7.2], [10, 1, 8.3], [11, 1, 7.4], [12, 1, 6.2], [13, 1, 7.3],
            [14, 1, 8.2], [15, 1, 7.3], [16, 1, 6.1], [17, 1, 5.2], [18, 1, 4.3], [19, 1, 3.2], [20, 1, 4.1],
            [21, 1, 5.2], [22, 1, 4.3], [23, 1, 3.1],
            
            [0, 2, 2.2], [1, 2, 1.1], [2, 2, 0.4], [3, 2, 0.2], [4, 2, 0.1], [5, 2, 0.3], [6, 2, 1.1],
            [7, 2, 3.1], [8, 2, 5.2], [9, 2, 7.1], [10, 2, 8.2], [11, 2, 7.3], [12, 2, 6.1], [13, 2, 7.2],
            [14, 2, 8.1], [15, 2, 7.2], [16, 2, 6.3], [17, 2, 5.1], [18, 2, 4.2], [19, 2, 3.1], [20, 2, 4.2],
            [21, 2, 5.1], [22, 2, 4.2], [23, 2, 3.2],
            
            [0, 3, 2.3], [1, 3, 1.2], [2, 3, 0.5], [3, 3, 0.3], [4, 3, 0.2], [5, 3, 0.4], [6, 3, 1.2],
            [7, 3, 3.3], [8, 3, 5.4], [9, 3, 7.3], [10, 3, 8.4], [11, 3, 7.5], [12, 3, 6.3], [13, 3, 7.4],
            [14, 3, 8.3], [15, 3, 7.4], [16, 3, 6.2], [17, 3, 5.3], [18, 3, 4.4], [19, 3, 3.3], [20, 3, 4.2],
            [21, 3, 5.3], [22, 3, 4.4], [23, 3, 3.2],
            
            [0, 4, 2.4], [1, 4, 1.3], [2, 4, 0.6], [3, 4, 0.4], [4, 4, 0.2], [5, 4, 0.5], [6, 4, 1.3],
            [7, 4, 3.4], [8, 4, 5.5], [9, 4, 7.4], [10, 4, 8.5], [11, 4, 7.6], [12, 4, 6.4], [13, 4, 7.5],
            [14, 4, 8.4], [15, 4, 7.5], [16, 4, 6.3], [17, 4, 5.4], [18, 4, 4.5], [19, 4, 5.6], [20, 4, 6.7],
            [21, 4, 7.8], [22, 4, 6.9], [23, 4, 5.0],
            
            [0, 5, 5.6], [1, 5, 4.7], [2, 5, 3.8], [3, 5, 2.9], [4, 5, 2.0], [5, 5, 2.1], [6, 5, 2.2],
            [7, 5, 3.3], [8, 5, 4.4], [9, 5, 5.5], [10, 5, 6.6], [11, 5, 7.7], [12, 5, 8.8], [13, 5, 9.9],
            [14, 5, 9.0], [15, 5, 8.1], [16, 5, 7.2], [17, 5, 6.3], [18, 5, 7.4], [19, 5, 8.5], [20, 5, 9.6],
            [21, 5, 10.7], [22, 5, 9.8], [23, 5, 8.9],
            
            [0, 6, 6.0], [1, 6, 5.1], [2, 6, 4.2], [3, 6, 3.3], [4, 6, 2.4], [5, 6, 2.5], [6, 6, 2.6],
            [7, 6, 3.7], [8, 6, 4.8], [9, 6, 5.9], [10, 6, 7.0], [11, 6, 8.1], [12, 6, 9.2], [13, 6, 10.3],
            [14, 6, 9.4], [15, 6, 8.5], [16, 6, 7.6], [17, 6, 6.7], [18, 6, 7.8], [19, 6, 8.9], [20, 6, 10.0],
            [21, 6, 9.1], [22, 6, 8.2], [23, 6, 7.3]
          ],
          label: {
            show: false
          },
          emphasis: {
            itemStyle: {
              shadowBlur: 10,
              shadowColor: 'rgba(0, 0, 0, 0.5)'
            }
          }
        }]
      });
    }

    // 渲染群组分析面板的图表
    function renderGroupCharts() {
      if (!document.getElementById('group-size-chart')) return;
      
      const isDarkMode = document.documentElement.classList.contains('dark');
      const textColor = isDarkMode ? '#d1d5db' : '#4b5563';
      const borderColor = isDarkMode ? '#374151' : '#e5e7eb';
      
      // 群聊规模分布
      const groupSizeChart = echarts.init(document.getElementById('group-size-chart'));
      groupSizeChart.setOption({
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          }
        },
        legend: {
          data: ['群聊数量'],
          textStyle: {
            color: textColor
          }
        },
        grid: {
          left: '3%',
          right: '4%',
          bottom: '3%',
          containLabel: true
        },
        xAxis: [
          {
            type: 'category',
            data: ['<10人', '10-50人', '51-100人', '101-200人', '>200人'],
            axisLine: {
              lineStyle: {
                color: borderColor
              }
            },
            axisLabel: {
              color: textColor
            }
          }
        ],
        yAxis: [
          {
            type: 'value',
            axisLine: {
              lineStyle: {
                color: borderColor
              }
            },
            axisLabel: {
              color: textColor
            },
            splitLine: {
              lineStyle: {
                color: borderColor,
                opacity: 0.3
              }
            }
          }
        ],
        series: [
          {
            name: '群聊数量',
            type: 'bar',
            barWidth: '60%',
            data: [1245, 1876, 843, 312, 96]
          }
        ]
      });
      
      // 群聊活跃度分布
      const groupActivityChart = echarts.init(document.getElementById('group-activity-chart'));
      groupActivityChart.setOption({
        tooltip: {
          trigger: 'item'
        },
        legend: {
          orient: 'vertical',
          left: 'left',
          textStyle: {
            color: textColor
          }
        },
        series: [
          {
            name: '群聊活跃度',
            type: 'pie',
            radius: '70%',
            center: ['60%', '50%'],
            data: [
              { value: 2845, name: '高度活跃' },
              { value: 923, name: '中度活跃' },
              { value: 436, name: '低度活跃' },
              { value: 168, name: '沉默群聊' }
            ],
            emphasis: {
              itemStyle: {
                shadowBlur: 10,
                shadowOffsetX: 0,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
              }
            }
          }
        ]
      });
      
      // 群聊生命周期
      const groupLifecycleChart = echarts.init(document.getElementById('group-lifecycle-chart'));
      groupLifecycleChart.setOption({
        tooltip: {
          trigger: 'axis'
        },
        legend: {
          data: ['消息量', '成员数'],
          textStyle: {
            color: textColor
          }
        },
        grid: {
          left: '3%',
          right: '4%',
          bottom: '3%',
          containLabel: true
        },
        xAxis: {
          type: 'category',
          boundaryGap: false,
          data: ['创建期', '成长期', '稳定期', '衰退期', '沉默期'],
          axisLine: {
            lineStyle: {
              color: borderColor
            }
          },
          axisLabel: {
            color: textColor
          }
        },
        yAxis: [
          {
            type: 'value',
            name: '消息量',
            position: 'left',
            axisLine: {
              lineStyle: {
                color: '#3b82f6'
              }
            },
            axisLabel: {
              formatter: '{value}',
              color: textColor
            },
            splitLine: {
              lineStyle: {
                color: borderColor,
                opacity: 0.3
              }
            }
          },
          {
            type: 'value',
            name: '成员数',
            position: 'right',
            axisLine: {
              lineStyle: {
                color: '#10b981'
              }
            },
            axisLabel: {
              formatter: '{value}',
              color: textColor
            },
            splitLine: {
              show: false
            }
          }
        ],
        series: [
          {
            name: '消息量',
            type: 'line',
            yAxisIndex: 0,
            data: [1200, 3500, 5200, 2800, 600],
            smooth: true,
            lineStyle: {
              width: 3
            }
          },
          {
            name: '成员数',
            type: 'line',
            yAxisIndex: 1,
            data: [5, 42, 85, 65, 32],
            smooth: true,
            lineStyle: {
              width: 3
            }
          }
        ]
      });
    }

    // 渲染文件分析面板的图表
    function renderFileCharts() {
      if (!document.getElementById('file-type-chart')) return;
      
      const isDarkMode = document.documentElement.classList.contains('dark');
      const textColor = isDarkMode ? '#d1d5db' : '#4b5563';
      const borderColor = isDarkMode ? '#374151' : '#e5e7eb';
      
      // 文件类型分布
      const fileTypeChart = echarts.init(document.getElementById('file-type-chart'));
      fileTypeChart.setOption({
        tooltip: {
          trigger: 'item'
        },
        legend: {
          orient: 'vertical',
          left: 'left',
          textStyle: {
            color: textColor
          }
        },
        series: [
          {
            name: '文件类型',
            type: 'pie',
            radius: '70%',
            center: ['60%', '50%'],
            data: [
              { value: 32.5, name: '图片' },
              { value: 41.8, name: '视频' },
              { value: 8.4, name: '文档' },
              { value: 3.5, name: '其他' }
            ],
            emphasis: {
              itemStyle: {
                shadowBlur: 10,
                shadowOffsetX: 0,
                shadowColor: 'rgba(0, 0, 0, 0.5)'
              }
            }
          }
        ]
      });
      
      // 存储空间增长趋势
      const storageGrowthChart = echarts.init(document.getElementById('storage-growth-chart'));
      storageGrowthChart.setOption({
        tooltip: {
          trigger: 'axis'
        },
        legend: {
          data: ['总存储空间', '图片', '视频', '文档', '其他'],
          textStyle: {
            color: textColor
          }
        },
        grid: {
          left: '3%',
          right: '4%',
          bottom: '3%',
          containLabel: true
        },
        xAxis: {
          type: 'category',
          boundaryGap: false,
          data: ['1月', '2月', '3月', '4月', '5月'],
          axisLine: {
            lineStyle: {
              color: borderColor
            }
          },
          axisLabel: {
            color: textColor
          }
        },
        yAxis: {
          type: 'value',
          axisLine: {
            lineStyle: {
              color: borderColor
            }
          },
          axisLabel: {
            color: textColor,
            formatter: '{value} GB'
          },
          splitLine: {
            lineStyle: {
              color: borderColor,
              opacity: 0.3
            }
          }
        },
        series: [
          {
            name: '总存储空间',
            type: 'line',
            stack: 'Total',
            data: [45.8, 58.2, 67.5, 78.1, 86.2],
            areaStyle: {}
          },
          {
            name: '图片',
            type: 'line',
            stack: 'Types',
            data: [18.3, 22.1, 25.6, 29.5, 32.5],
            areaStyle: {}
          },
          {
            name: '视频',
            type: 'line',
            stack: 'Types',
            data: [22.6, 28.4, 32.9, 38.2, 41.8],
            areaStyle: {}
          },
          {
            name: '文档',
            type: 'line',
            stack: 'Types',
            data: [3.8, 5.4, 6.5, 7.6, 8.4],
            areaStyle: {}
          },
          {
            name: '其他',
            type: 'line',
            stack: 'Types',
            data: [1.1, 2.3, 2.5, 2.8, 3.5],
            areaStyle: {}
          }
        ]
      });
    }
  </script>




  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>文件管理 - 通讯软件后台管理系统</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        fontFamily: {
          sans: ['Inter', 'sans-serif'],
        },
        extend: {
          colors: {
            primary: '#3b82f6',
            success: '#10b981',
            warning: '#f59e0b',
            error: '#ef4444',
            background: {
              light: '#f8fafc',
              dark: '#1f2937'
            }
          }
        }
      },
      darkMode: 'class',
    }
  </script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
      height: 100%;
      margin: 0;
      padding: 0;
      color: #1f2937;
    }
    .dark body {
      background-color: #111827;
      color: #f3f4f6;
    }
    .dashboard-container {
      max-width: 1440px;
      min-height: 100vh;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 240px 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas: 
        "sidebar topbar"
        "sidebar main";
    }
    .sidebar {
      grid-area: sidebar;
      border-right: 1px solid #e5e7eb;
      background: #f8fafc;
      padding: 24px 0;
    }
    .dark .sidebar {
      background: #1f2937;
      border-right: 1px solid #374151;
    }
    .topbar {
      grid-area: topbar;
      background: #ffffff;
      border-bottom: 1px solid #e5e7eb;
      padding: 16px 32px;
    }
    .dark .topbar {
      background: #1f2937;
      border-bottom: 1px solid #374151;
    }
    .main-content {
      grid-area: main;
      background: #f9fafb;
      padding: 24px;
      overflow-y: auto;
    }
    .dark .main-content {
      background: #111827;
    }
    .card {
      background: #ffffff;
      border-radius: 8px;
      padding: 20px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }
    .dark .card {
      background: #1f2937;
      border: 1px solid #374151;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
    }
    .nav-item {
      padding: 12px 24px;
      font-size: 14px;
      color: #4b5563;
      border-left: 3px solid transparent;
      transition: all 0.2s;
    }
    .dark .nav-item {
      color: #d1d5db;
    }
    .nav-item:hover, .nav-item.active {
      background: #f1f5f9;
      border-left: 3px solid #3b82f6;
      color: #3b82f6;
    }
    .dark .nav-item:hover, .dark .nav-item.active {
      background: #1a2435;
    }
    .notification-dot {
      top: -2px;
      right: -2px;
      width: 8px;
      height: 8px;
      background-color: #ef4444;
    }
    .table-responsive {
      overflow-x: auto;
    }
    .table {
      min-width: 100%;
      border-collapse: separate;
      border-spacing: 0;
    }
    .table th {
      text-align: left;
      padding: 12px 16px;
      font-weight: 500;
      border-bottom: 1px solid #e5e7eb;
      color: #6b7280;
    }
    .dark .table th {
      color: #9ca3af;
      border-bottom: 1px solid #374151;
    }
    .table td {
      padding: 12px 16px;
      border-bottom: 1px solid #e5e7eb;
      vertical-align: middle;
    }
    .dark .table td {
      border-bottom: 1px solid #374151;
    }
    .table tr:hover {
      background-color: #f9fafb;
    }
    .dark .table tr:hover {
      background-color: #1e293b;
    }
    .status-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 2px 8px;
      border-radius: 9999px;
      font-size: 12px;
    }
    .pagination-item {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border-radius: 4px;
      margin: 0 2px;
      cursor: pointer;
    }
    .pagination-item.active {
      background-color: #3b82f6;
      color: white;
    }
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .modal.active {
      opacity: 1;
      pointer-events: auto;
    }
    .modal-content {
      background: white;
      border-radius: 8px;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      transform: translateY(20px);
      transition: transform 0.3s;
    }
    .dark .modal-content {
      background: #1f2937;
    }
    .modal.active .modal-content {
      transform: translateY(0);
    }
    .file-card {
      transition: all 0.2s;
      cursor: pointer;
    }
    .file-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .file-icon {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
    }
    .file-progress {
      height: 4px;
      border-radius: 2px;
      overflow: hidden;
    }
    .file-preview {
      height: 160px;
      border-radius: 6px;
      overflow: hidden;
    }
    .file-preview img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    @media (max-width: 1024px) {
      .dashboard-container {
        grid-template-columns: 200px 1fr;
      }
    }
    @media (max-width: 768px) {
      .dashboard-container {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "topbar"
          "main";
      }
      .sidebar {
        display: none;
      }
    }
  </style>


  <div class="dashboard-container">
    <!-- 左侧导航 -->
    <div class="sidebar">
      <div class="flex items-center px-6 mb-8">
        <span class="iconify text-2xl text-primary" data-icon="mdi:application"></span>
        <h1 class="text-xl font-bold ml-3 dark:text-white">通讯管理系统</h1>
      </div>
      <nav class="space-y-1">
        <a href="index.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:home"></span> 仪表盘
        </a>
        <a href="user-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-group"></span> 用户管理
        </a>
        <a href="message-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-processing"></span> 消息管理
        </a>
        <a href="group-chat-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-text"></span> 群聊管理
        </a>
        <a href="file-management.html" class="nav-item flex items-center active">
          <span class="iconify mr-3" data-icon="mdi:file-document"></span> 文件管理
        </a>
        <a href="data-analysis.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:chart-line"></span> 数据分析
        </a>
        <a href="system-settings.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:cog"></span> 系统设置
        </a>
        <a href="data-backup.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:content-save"></span> 数据备份
        </a>
        <a href="profile.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-circle"></span> 个人中心
        </a>
      </nav>
    </div>

    <!-- 顶部栏 -->
    <div class="topbar flex items-center justify-between">
      <div class="relative w-1/3">
        <input type="text" placeholder="搜索系统功能..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
        <span class="iconify absolute left-3 top-2.5 text-gray-400" data-icon="mdi:magnify"></span>
      </div>
      
      <div class="flex items-center space-x-6">
        <button class="theme-toggle">
          <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:theme-light-dark"></span>
        </button>
        
        <div class="relative">
          <button class="notification-btn">
            <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:bell-outline"></span>
            <span class="notification-dot absolute rounded-full"></span>
          </button>
        </div>
        
        <div class="flex items-center">
          <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center">
            <span class="iconify text-white" data-icon="mdi:account"></span>
          </div>
          <span class="ml-2 font-medium dark:text-white">管理员</span>
        </div>
      </div>
    </div>

    <!-- 主内容区 -->
    <main class="main-content">
      <div class="mb-6 flex justify-between items-center">
        <div>
          <h1 class="text-2xl font-bold dark:text-white">文件管理</h1>
          <p class="text-gray-500 text-sm mt-1 dark:text-gray-400">管理平台上的所有文件资源</p>
        </div>
        <div class="flex space-x-2">
          <button id="createFolderBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600">
            <span class="iconify mr-2" data-icon="mdi:folder-plus"></span>
            新建文件夹
          </button>
          <button id="uploadFileBtn" class="bg-primary hover:bg-blue-600 text-white py-2 px-4 rounded-lg flex items-center">
            <span class="iconify mr-2" data-icon="mdi:cloud-upload"></span>
            上传文件
          </button>
        </div>
      </div>

      <!-- 存储使用情况 -->
      <div class="card mb-6">
        <div class="flex flex-col md:flex-row justify-between">
          <div class="mb-4 md:mb-0">
            <h2 class="text-lg font-semibold dark:text-white">存储空间使用情况</h2>
            <p class="text-gray-500 text-sm dark:text-gray-400">总容量: 200GB</p>
          </div>
          <div class="w-full md:w-1/2 lg:w-1/3">
            <div class="flex justify-between mb-1">
              <span class="text-sm text-gray-500 dark:text-gray-400">已使用: 86.2GB (43.1%)</span>
              <span class="text-sm text-gray-500 dark:text-gray-400">可用: 113.8GB</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700">
              <div class="bg-primary h-2.5 rounded-full" style="width: 43.1%"></div>
            </div>
          </div>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-6">
          <div class="stat-card flex items-center">
            <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center">
              <span class="iconify text-blue-500 text-xl" data-icon="mdi:image"></span>
            </div>
            <div class="ml-3">
              <div class="text-gray-500 text-sm dark:text-gray-400">图片</div>
              <div class="font-semibold dark:text-white">32.5 GB</div>
            </div>
          </div>
          <div class="stat-card flex items-center">
            <div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center">
              <span class="iconify text-purple-500 text-xl" data-icon="mdi:video"></span>
            </div>
            <div class="ml-3">
              <div class="text-gray-500 text-sm dark:text-gray-400">视频</div>
              <div class="font-semibold dark:text-white">41.8 GB</div>
            </div>
          </div>
          <div class="stat-card flex items-center">
            <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center">
              <span class="iconify text-green-500 text-xl" data-icon="mdi:file-document"></span>
            </div>
            <div class="ml-3">
              <div class="text-gray-500 text-sm dark:text-gray-400">文档</div>
              <div class="font-semibold dark:text-white">8.4 GB</div>
            </div>
          </div>
          <div class="stat-card flex items-center">
            <div class="w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center">
              <span class="iconify text-orange-500 text-xl" data-icon="mdi:folder"></span>
            </div>
            <div class="ml-3">
              <div class="text-gray-500 text-sm dark:text-gray-400">其他</div>
              <div class="font-semibold dark:text-white">3.5 GB</div>
            </div>
          </div>
        </div>
      </div>

      <!-- 文件导航和过滤 -->
      <div class="card mb-6">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4">
          <div class="flex items-center mb-4 md:mb-0 overflow-x-auto whitespace-nowrap">
            <button class="text-primary hover:underline">我的文件</button>
            <span class="mx-2 text-gray-400">/</span>
            <button class="text-primary hover:underline">共享文件</button>
            <span class="mx-2 text-gray-400">/</span>
            <button class="text-primary hover:underline">项目文档</button>
          </div>
          <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 w-full md:w-auto">
            <div class="relative">
              <input type="text" id="fileSearchInput" placeholder="搜索文件..." class="w-full sm:w-auto pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <span class="iconify absolute left-3 top-2.5 text-gray-400" data-icon="mdi:magnify"></span>
            </div>
            <select id="fileTypeFilter" class="py-2 px-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <option value="all">所有文件</option>
              <option value="image">图片</option>
              <option value="video">视频</option>
              <option value="document">文档</option>
              <option value="audio">音频</option>
            </select>
          </div>
        </div>

        <!-- 文件视图切换 -->
        <div class="flex justify-between items-center mb-4">
          <div class="flex items-center space-x-4">
            <button id="gridViewBtn" class="p-1.5 rounded bg-primary text-white">
              <span class="iconify" data-icon="mdi:view-grid"></span>
            </button>
            <button id="listViewBtn" class="p-1.5 rounded hover:bg-gray-100 text-gray-700 dark:hover:bg-gray-700 dark:text-gray-300">
              <span class="iconify" data-icon="mdi:view-list"></span>
            </button>
          </div>
          <select id="sortFiles" class="text-sm border border-gray-300 rounded px-3 py-1.5 dark:bg-gray-800 dark:border-gray-600 dark:text-white">
            <option value="name_asc">名称 (A-Z)</option>
            <option value="name_desc">名称 (Z-A)</option>
            <option value="date_desc" selected="">日期 (最新)</option>
            <option value="date_asc">日期 (最旧)</option>
            <option value="size_desc">大小 (降序)</option>
            <option value="size_asc">大小 (升序)</option>
          </select>
        </div>

        <!-- 网格视图 -->
        <div id="gridView" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4 mb-4">
          <!-- 文件夹 -->
          <div class="file-card card p-3">
            <div class="flex items-center justify-center mb-2">
              <div class="file-icon bg-blue-100 dark:bg-blue-900">
                <span class="iconify text-2xl text-blue-500" data-icon="mdi:folder"></span>
              </div>
            </div>
            <div class="text-center">
              <p class="font-medium truncate dark:text-white">项目文档</p>
              <p class="text-xs text-gray-500 dark:text-gray-400">12 个文件</p>
            </div>
          </div>
          
          <div class="file-card card p-3">
            <div class="flex items-center justify-center mb-2">
              <div class="file-icon bg-blue-100 dark:bg-blue-900">
                <span class="iconify text-2xl text-blue-500" data-icon="mdi:folder"></span>
              </div>
            </div>
            <div class="text-center">
              <p class="font-medium truncate dark:text-white">用户头像</p>
              <p class="text-xs text-gray-500 dark:text-gray-400">36 个文件</p>
            </div>
          </div>
          
          <!-- 图片文件 -->
          <div class="file-card card p-3">
            <div class="file-preview mb-2 relative">
              <img src="https://via.placeholder.com/150" alt="会议照片" class="w-full h-full object-cover rounded">
              <div class="absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-10 transition-opacity rounded"></div>
            </div>
            <div>
              <p class="font-medium truncate dark:text-white">会议照片.jpg</p>
              <div class="flex justify-between items-center">
                <p class="text-xs text-gray-500 dark:text-gray-400">2.4 MB</p>
                <p class="text-xs text-gray-500 dark:text-gray-400">今天</p>
              </div>
            </div>
          </div>
          
          <!-- 文档文件 -->
          <div class="file-card card p-3">
            <div class="flex items-center justify-center mb-2">
              <div class="file-icon bg-green-100 dark:bg-green-900">
                <span class="iconify text-2xl text-green-500" data-icon="mdi:file-document"></span>
              </div>
            </div>
            <div>
              <p class="font-medium truncate dark:text-white">项目计划书.docx</p>
              <div class="flex justify-between items-center">
                <p class="text-xs text-gray-500 dark:text-gray-400">1.8 MB</p>
                <p class="text-xs text-gray-500 dark:text-gray-400">昨天</p>
              </div>
            </div>
          </div>
          
          <!-- PDF文件 -->
          <div class="file-card card p-3">
            <div class="flex items-center justify-center mb-2">
              <div class="file-icon bg-red-100 dark:bg-red-900">
                <span class="iconify text-2xl text-red-500" data-icon="mdi:file-pdf-box"></span>
              </div>
            </div>
            <div>
              <p class="font-medium truncate dark:text-white">财务报表Q2.pdf</p>
              <div class="flex justify-between items-center">
                <p class="text-xs text-gray-500 dark:text-gray-400">3.2 MB</p>
                <p class="text-xs text-gray-500 dark:text-gray-400">3天前</p>
              </div>
            </div>
          </div>
          
          <!-- 视频文件 -->
          <div class="file-card card p-3">
            <div class="flex items-center justify-center mb-2">
              <div class="file-icon bg-purple-100 dark:bg-purple-900">
                <span class="iconify text-2xl text-purple-500" data-icon="mdi:file-video"></span>
              </div>
            </div>
            <div>
              <p class="font-medium truncate dark:text-white">产品演示视频.mp4</p>
              <div class="flex justify-between items-center">
                <p class="text-xs text-gray-500 dark:text-gray-400">24.8 MB</p>
                <p class="text-xs text-gray-500 dark:text-gray-400">1周前</p>
              </div>
            </div>
          </div>
          
          <!-- Excel文件 -->
          <div class="file-card card p-3">
            <div class="flex items-center justify-center mb-2">
              <div class="file-icon bg-green-100 dark:bg-green-900">
                <span class="iconify text-2xl text-green-500" data-icon="mdi:file-excel"></span>
              </div>
            </div>
            <div>
              <p class="font-medium truncate dark:text-white">销售数据统计.xlsx</p>
              <div class="flex justify-between items-center">
                <p class="text-xs text-gray-500 dark:text-gray-400">1.2 MB</p>
                <p class="text-xs text-gray-500 dark:text-gray-400">2周前</p>
              </div>
            </div>
          </div>
          
          <!-- 音频文件 -->
          <div class="file-card card p-3">
            <div class="flex items-center justify-center mb-2">
              <div class="file-icon bg-yellow-100 dark:bg-yellow-900">
                <span class="iconify text-2xl text-yellow-500" data-icon="mdi:file-music"></span>
              </div>
            </div>
            <div>
              <p class="font-medium truncate dark:text-white">会议录音.mp3</p>
              <div class="flex justify-between items-center">
                <p class="text-xs text-gray-500 dark:text-gray-400">5.6 MB</p>
                <p class="text-xs text-gray-500 dark:text-gray-400">2周前</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 列表视图 (默认隐藏) -->
        <div id="listView" class="hidden">
          <div class="table-responsive">
            <table class="table">
              <thead>
                <tr>
                  <th class="w-12">
                    <input type="checkbox" id="selectAllFiles" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                  </th>
                  <th>名称</th>
                  <th>大小</th>
                  <th>类型</th>
                  <th>修改日期</th>
                  <th>所有者</th>
                  <th class="text-right">操作</th>
                </tr>
              </thead>
              <tbody>
                <!-- 文件夹 -->
                <tr>
                  <td><input type="checkbox" class="file-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                  <td class="flex items-center">
                    <span class="iconify text-blue-500 mr-2" data-icon="mdi:folder"></span>
                    项目文档
                  </td>
                  <td>--</td>
                  <td>文件夹</td>
                  <td>2025-05-10 15:30</td>
                  <td>管理员</td>
                  <td>
                    <div class="flex justify-end space-x-2">
                      <button class="file-action-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300">
                        <span class="iconify" data-icon="mdi:pencil"></span>
                      </button>
                      <button class="file-action-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300">
                        <span class="iconify" data-icon="mdi:delete"></span>
                      </button>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td><input type="checkbox" class="file-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                  <td class="flex items-center">
                    <span class="iconify text-blue-500 mr-2" data-icon="mdi:folder"></span>
                    用户头像
                  </td>
                  <td>--</td>
                  <td>文件夹</td>
                  <td>2025-05-08 10:15</td>
                  <td>管理员</td>
                  <td>
                    <div class="flex justify-end space-x-2">
                      <button class="file-action-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300">
                        <span class="iconify" data-icon="mdi:pencil"></span>
                      </button>
                      <button class="file-action-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300">
                        <span class="iconify" data-icon="mdi:delete"></span>
                      </button>
                    </div>
                  </td>
                </tr>
                <!-- 图片文件 -->
                <tr>
                  <td><input type="checkbox" class="file-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                  <td class="flex items-center">
                    <span class="iconify text-blue-500 mr-2" data-icon="mdi:file-image"></span>
                    会议照片.jpg
                  </td>
                  <td>2.4 MB</td>
                  <td>图片</td>
                  <td>2025-05-13 09:45</td>
                  <td>张三</td>
                  <td>
                    <div class="flex justify-end space-x-2">
                      <button class="file-action-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300">
                        <span class="iconify" data-icon="mdi:eye"></span>
                      </button>
                      <button class="file-action-btn text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300">
                        <span class="iconify" data-icon="mdi:download"></span>
                      </button>
                      <button class="file-action-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300">
                        <span class="iconify" data-icon="mdi:delete"></span>
                      </button>
                    </div>
                  </td>
                </tr>
                <!-- 文档文件 -->
                <tr>
                  <td><input type="checkbox" class="file-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                  <td class="flex items-center">
                    <span class="iconify text-green-500 mr-2" data-icon="mdi:file-document"></span>
                    项目计划书.docx
                  </td>
                  <td>1.8 MB</td>
                  <td>文档</td>
                  <td>2025-05-12 14:20</td>
                  <td>李四</td>
                  <td>
                    <div class="flex justify-end space-x-2">
                      <button class="file-action-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300">
                        <span class="iconify" data-icon="mdi:eye"></span>
                      </button>
                      <button class="file-action-btn text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300">
                        <span class="iconify" data-icon="mdi:download"></span>
                      </button>
                      <button class="file-action-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300">
                        <span class="iconify" data-icon="mdi:delete"></span>
                      </button>
                    </div>
                  </td>
                </tr>
                <!-- PDF文件 -->
                <tr>
                  <td><input type="checkbox" class="file-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                  <td class="flex items-center">
                    <span class="iconify text-red-500 mr-2" data-icon="mdi:file-pdf-box"></span>
                    财务报表Q2.pdf
                  </td>
                  <td>3.2 MB</td>
                  <td>PDF</td>
                  <td>2025-05-10 09:15</td>
                  <td>王五</td>
                  <td>
                    <div class="flex justify-end space-x-2">
                      <button class="file-action-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300">
                        <span class="iconify" data-icon="mdi:eye"></span>
                      </button>
                      <button class="file-action-btn text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300">
                        <span class="iconify" data-icon="mdi:download"></span>
                      </button>
                      <button class="file-action-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300">
                        <span class="iconify" data-icon="mdi:delete"></span>
                      </button>
                    </div>
                  </td>
                </tr>
                <!-- 视频文件 -->
                <tr>
                  <td><input type="checkbox" class="file-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                  <td class="flex items-center">
                    <span class="iconify text-purple-500 mr-2" data-icon="mdi:file-video"></span>
                    产品演示视频.mp4
                  </td>
                  <td>24.8 MB</td>
                  <td>视频</td>
                  <td>2025-05-06 16:40</td>
                  <td>赵六</td>
                  <td>
                    <div class="flex justify-end space-x-2">
                      <button class="file-action-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300">
                        <span class="iconify" data-icon="mdi:eye"></span>
                      </button>
                      <button class="file-action-btn text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300">
                        <span class="iconify" data-icon="mdi:download"></span>
                      </button>
                      <button class="file-action-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300">
                        <span class="iconify" data-icon="mdi:delete"></span>
                      </button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- 底部工具栏 -->
        <div class="mt-4 flex flex-col sm:flex-row justify-between items-center">
          <div class="flex items-center mb-4 sm:mb-0">
            <button id="batchDeleteBtn" class="bg-red-500 hover:bg-red-600 text-white py-1.5 px-3 rounded text-sm flex items-center">
              <span class="iconify mr-1" data-icon="mdi:delete"></span> 批量删除
            </button>
            <button id="batchDownloadBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 py-1.5 px-3 rounded text-sm flex items-center ml-2 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600">
              <span class="iconify mr-1" data-icon="mdi:download"></span> 下载
            </button>
            <button id="batchMoveBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 py-1.5 px-3 rounded text-sm flex items-center ml-2 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600">
              <span class="iconify mr-1" data-icon="mdi:folder-move"></span> 移动到
            </button>
            <div class="ml-4 text-sm text-gray-500 dark:text-gray-400">
              共 <span id="totalFiles">128</span> 个文件
            </div>
          </div>

          <!-- 分页 -->
          <div class="flex items-center">
            <button class="pagination-item text-gray-600 dark:text-gray-400">
              <span class="iconify" data-icon="mdi:chevron-left"></span>
            </button>
            <button class="pagination-item active">1</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">2</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">3</button>
            <span class="mx-1">...</span>
            <button class="pagination-item text-gray-600 dark:text-gray-400">10</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">
              <span class="iconify" data-icon="mdi:chevron-right"></span>
            </button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- 上传文件模态框 -->
  <div id="uploadModal" class="modal">
    <div class="modal-content">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold">上传文件</h3>
          <button id="closeUploadModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <div class="mb-6 border-2 border-dashed border-gray-300 rounded-lg p-6 text-center dark:border-gray-600">
          <div class="mb-4">
            <span class="iconify text-4xl text-gray-400" data-icon="mdi:cloud-upload"></span>
          </div>
          <p class="mb-2 text-gray-700 dark:text-gray-300">将文件拖放到此处或</p>
          <button class="bg-primary hover:bg-blue-600 text-white py-2 px-4 rounded-lg">
            选择文件
          </button>
          <input type="file" multiple="" class="hidden" id="fileInput">
        </div>

        <!-- 上传列表 -->
        <div class="space-y-4 mb-6">
          <div>
            <div class="flex justify-between mb-1">
              <p class="text-sm font-medium">产品说明书.pdf</p>
              <span class="text-xs text-gray-500">2.4 MB</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700">
              <div class="bg-primary h-1.5 rounded-full" style="width: 45%"></div>
            </div>
          </div>
          <div>
            <div class="flex justify-between mb-1">
              <p class="text-sm font-medium">会议记录.docx</p>
              <span class="text-xs text-gray-500">1.2 MB</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700">
              <div class="bg-green-500 h-1.5 rounded-full" style="width: 100%"></div>
            </div>
          </div>
          <div>
            <div class="flex justify-between mb-1">
              <p class="text-sm font-medium">设计稿.psd</p>
              <span class="text-xs text-gray-500">8.7 MB</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-1.5 dark:bg-gray-700">
              <div class="bg-red-500 h-1.5 rounded-full" style="width: 25%"></div>
            </div>
            <p class="text-xs text-red-500 mt-1">上传失败，请重试</p>
          </div>
        </div>

        <div class="flex justify-between items-center">
          <div class="text-sm text-gray-500 dark:text-gray-400">
            正在上传 2/3 个文件
          </div>
          <div>
            <button type="button" id="cancelUploadBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
              取消
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 新建文件夹模态框 -->
  <div id="folderModal" class="modal">
    <div class="modal-content" style="max-width: 400px;">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold">新建文件夹</h3>
          <button id="closeFolderModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <form id="folderForm">
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">文件夹名称 <span class="text-red-500">*</span></label>
            <input type="text" id="folderName" required="" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
          </div>

          <div class="flex justify-end space-x-3 mt-6">
            <button type="button" id="cancelFolderBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
              取消
            </button>
            <button type="submit" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
              创建
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- 删除确认模态框 -->
  <div id="deleteModal" class="modal">
    <div class="modal-content" style="max-width: 400px;">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold">确认删除</h3>
          <button class="close-delete-modal text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <div class="mb-6">
          <p class="text-gray-700 dark:text-gray-300">您确定要删除选中的文件/文件夹吗？此操作不可撤销。</p>
          <p id="deleteFileList" class="mt-2 text-sm text-gray-500 dark:text-gray-400">将删除：<span id="deleteCount"></span> 个项目</p>
        </div>

        <div class="flex justify-end space-x-3">
          <button type="button" class="close-delete-modal px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            取消
          </button>
          <button type="button" id="confirmDeleteBtn" class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg">
            确认删除
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 主题切换
      const themeToggle = document.querySelector('.theme-toggle');
      themeToggle.addEventListener('click', function() {
        const html = document.querySelector('html');
        if (html.classList.contains('dark')) {
          html.classList.remove('dark');
          localStorage.setItem('theme', 'light');
        } else {
          html.classList.add('dark');
          localStorage.setItem('theme', 'dark');
        }
      });
      
      // 检查本地存储的主题设置
      if (localStorage.getItem('theme') === 'dark') {
        document.querySelector('html').classList.add('dark');
      }
      
      // 视图切换功能
      const gridViewBtn = document.getElementById('gridViewBtn');
      const listViewBtn = document.getElementById('listViewBtn');
      const gridView = document.getElementById('gridView');
      const listView = document.getElementById('listView');
      
      gridViewBtn.addEventListener('click', function() {
        gridView.classList.remove('hidden');
        listView.classList.add('hidden');
        gridViewBtn.classList.add('bg-primary', 'text-white');
        gridViewBtn.classList.remove('hover:bg-gray-100', 'text-gray-700', 'dark:hover:bg-gray-700', 'dark:text-gray-300');
        listViewBtn.classList.remove('bg-primary', 'text-white');
        listViewBtn.classList.add('hover:bg-gray-100', 'text-gray-700', 'dark:hover:bg-gray-700', 'dark:text-gray-300');
      });
      
      listViewBtn.addEventListener('click', function() {
        gridView.classList.add('hidden');
        listView.classList.remove('hidden');
        listViewBtn.classList.add('bg-primary', 'text-white');
        listViewBtn.classList.remove('hover:bg-gray-100', 'text-gray-700', 'dark:hover:bg-gray-700', 'dark:text-gray-300');
        gridViewBtn.classList.remove('bg-primary', 'text-white');
        gridViewBtn.classList.add('hover:bg-gray-100', 'text-gray-700', 'dark:hover:bg-gray-700', 'dark:text-gray-300');
      });
      
      // 上传文件模态框
      const uploadModal = document.getElementById('uploadModal');
      const uploadFileBtn = document.getElementById('uploadFileBtn');
      const closeUploadModal = document.getElementById('closeUploadModal');
      const cancelUploadBtn = document.getElementById('cancelUploadBtn');
      const fileInput = document.getElementById('fileInput');
      
      uploadFileBtn.addEventListener('click', function() {
        uploadModal.classList.add('active');
      });
      
      closeUploadModal.addEventListener('click', function() {
        uploadModal.classList.remove('active');
      });
      
      cancelUploadBtn.addEventListener('click', function() {
        uploadModal.classList.remove('active');
      });
      
      // 文件选择区域点击触发文件选择
      const uploadArea = document.querySelector('.border-dashed');
      uploadArea.addEventListener('click', function(e) {
        if (e.target.tagName !== 'BUTTON') {
          fileInput.click();
        }
      });
      
      // 文件拖放功能
      uploadArea.addEventListener('dragover', function(e) {
        e.preventDefault();
        uploadArea.classList.add('border-primary');
      });
      
      uploadArea.addEventListener('dragleave', function() {
        uploadArea.classList.remove('border-primary');
      });
      
      uploadArea.addEventListener('drop', function(e) {
        e.preventDefault();
        uploadArea.classList.remove('border-primary');
        // 这里可以处理拖放的文件
        const files = e.dataTransfer.files;
        console.log('拖放的文件:', files);
      });
      
      // 新建文件夹模态框
      const folderModal = document.getElementById('folderModal');
      const createFolderBtn = document.getElementById('createFolderBtn');
      const closeFolderModal = document.getElementById('closeFolderModal');
      const cancelFolderBtn = document.getElementById('cancelFolderBtn');
      const folderForm = document.getElementById('folderForm');
      
      createFolderBtn.addEventListener('click', function() {
        folderModal.classList.add('active');
      });
      
      closeFolderModal.addEventListener('click', function() {
        folderModal.classList.remove('active');
      });
      
      cancelFolderBtn.addEventListener('click', function() {
        folderModal.classList.remove('active');
      });
      
      folderForm.addEventListener('submit', function(e) {
        e.preventDefault();
        // 这里可以添加表单验证和提交逻辑
        console.log('创建文件夹:', document.getElementById('folderName').value);
        
        // 模拟成功提交后关闭模态框
        folderModal.classList.remove('active');
      });
      
      // 删除确认模态框
      const deleteModal = document.getElementById('deleteModal');
      const closeDeleteModal = document.querySelectorAll('.close-delete-modal');
      const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
      const deleteCount = document.getElementById('deleteCount');
      const batchDeleteBtn = document.getElementById('batchDeleteBtn');
      const fileActionBtns = document.querySelectorAll('.file-action-btn');
      
      // 单个文件删除按钮
      fileActionBtns.forEach(btn => {
        if (btn.querySelector('.iconify').getAttribute('data-icon') === 'mdi:delete') {
          btn.addEventListener('click', function() {
            deleteCount.textContent = "1";
            deleteModal.classList.add('active');
          });
        }
      });
      
      // 批量删除按钮
      batchDeleteBtn.addEventListener('click', function() {
        const selectedFiles = document.querySelectorAll('.file-select:checked');
        if (selectedFiles.length === 0) {
          alert('请至少选择一个文件');
          return;
        }
        
        deleteCount.textContent = selectedFiles.length;
        deleteModal.classList.add('active');
      });
      
      // 关闭删除确认模态框
      closeDeleteModal.forEach(btn => {
        btn.addEventListener('click', function() {
          deleteModal.classList.remove('active');
        });
      });
      
      // 确认删除按钮
      confirmDeleteBtn.addEventListener('click', function() {
        // 这里添加删除逻辑
        console.log('确认删除');
        
        // 模拟删除成功后关闭模态框
        deleteModal.classList.remove('active');
      });
      
      // 全选功能
      const selectAllFiles = document.getElementById('selectAllFiles');
      const fileCheckboxes = document.querySelectorAll('.file-select');
      
      if (selectAllFiles) {
        selectAllFiles.addEventListener('change', function() {
          fileCheckboxes.forEach(checkbox => {
            checkbox.checked = this.checked;
          });
        });
      }
      
      // 文件搜索功能
      const fileSearchInput = document.getElementById('fileSearchInput');
      const fileTypeFilter = document.getElementById('fileTypeFilter');
      
      if (fileSearchInput) {
        fileSearchInput.addEventListener('input', function() {
          console.log('搜索:', this.value);
          // 这里添加搜索逻辑
        });
      }
      
      if (fileTypeFilter) {
        fileTypeFilter.addEventListener('change', function() {
          console.log('文件类型筛选:', this.value);
          // 这里添加筛选逻辑
        });
      }
      
      // 文件排序功能
      const sortFiles = document.getElementById('sortFiles');
      
      if (sortFiles) {
        sortFiles.addEventListener('change', function() {
          console.log('排序方式:', this.value);
          // 这里添加排序逻辑
        });
      }
    });
  </script>




  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>群聊管理 - 通讯软件后台管理系统</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        fontFamily: {
          sans: ['Inter', 'sans-serif'],
        },
        extend: {
          colors: {
            primary: '#3b82f6',
            success: '#10b981',
            warning: '#f59e0b',
            error: '#ef4444',
            background: {
              light: '#f8fafc',
              dark: '#1f2937'
            }
          }
        }
      },
      darkMode: 'class',
    }
  </script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
      height: 100%;
      margin: 0;
      padding: 0;
      color: #1f2937;
    }
    .dark body {
      background-color: #111827;
      color: #f3f4f6;
    }
    .dashboard-container {
      max-width: 1440px;
      min-height: 100vh;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 240px 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas: 
        "sidebar topbar"
        "sidebar main";
    }
    .sidebar {
      grid-area: sidebar;
      border-right: 1px solid #e5e7eb;
      background: #f8fafc;
      padding: 24px 0;
    }
    .dark .sidebar {
      background: #1f2937;
      border-right: 1px solid #374151;
    }
    .topbar {
      grid-area: topbar;
      background: #ffffff;
      border-bottom: 1px solid #e5e7eb;
      padding: 16px 32px;
    }
    .dark .topbar {
      background: #1f2937;
      border-bottom: 1px solid #374151;
    }
    .main-content {
      grid-area: main;
      background: #f9fafb;
      padding: 24px;
      overflow-y: auto;
    }
    .dark .main-content {
      background: #111827;
    }
    .card {
      background: #ffffff;
      border-radius: 8px;
      padding: 20px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }
    .dark .card {
      background: #1f2937;
      border: 1px solid #374151;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
    }
    .nav-item {
      padding: 12px 24px;
      font-size: 14px;
      color: #4b5563;
      border-left: 3px solid transparent;
      transition: all 0.2s;
    }
    .dark .nav-item {
      color: #d1d5db;
    }
    .nav-item:hover, .nav-item.active {
      background: #f1f5f9;
      border-left: 3px solid #3b82f6;
      color: #3b82f6;
    }
    .dark .nav-item:hover, .dark .nav-item.active {
      background: #1a2435;
    }
    .notification-dot {
      top: -2px;
      right: -2px;
      width: 8px;
      height: 8px;
      background-color: #ef4444;
    }
    .table-responsive {
      overflow-x: auto;
    }
    .table {
      min-width: 100%;
      border-collapse: separate;
      border-spacing: 0;
    }
    .table th {
      text-align: left;
      padding: 12px 16px;
      font-weight: 500;
      border-bottom: 1px solid #e5e7eb;
      color: #6b7280;
    }
    .dark .table th {
      color: #9ca3af;
      border-bottom: 1px solid #374151;
    }
    .table td {
      padding: 12px 16px;
      border-bottom: 1px solid #e5e7eb;
      vertical-align: middle;
    }
    .dark .table td {
      border-bottom: 1px solid #374151;
    }
    .table tr:hover {
      background-color: #f9fafb;
    }
    .dark .table tr:hover {
      background-color: #1e293b;
    }
    .status-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 2px 8px;
      border-radius: 9999px;
      font-size: 12px;
    }
    .pagination-item {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border-radius: 4px;
      margin: 0 2px;
      cursor: pointer;
    }
    .pagination-item.active {
      background-color: #3b82f6;
      color: white;
    }
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .modal.active {
      opacity: 1;
      pointer-events: auto;
    }
    .modal-content {
      background: white;
      border-radius: 8px;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      transform: translateY(20px);
      transition: transform 0.3s;
    }
    .dark .modal-content {
      background: #1f2937;
    }
    .modal.active .modal-content {
      transform: translateY(0);
    }
    .chart-container {
      width: 100%;
      height: 250px;
    }
    .member-preview {
      max-width: 150px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    @media (max-width: 1024px) {
      .dashboard-container {
        grid-template-columns: 200px 1fr;
      }
    }
    @media (max-width: 768px) {
      .dashboard-container {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "topbar"
          "main";
      }
      .sidebar {
        display: none;
      }
    }
  </style>


  <div class="dashboard-container">
    <!-- 左侧导航 -->
    <div class="sidebar">
      <div class="flex items-center px-6 mb-8">
        <span class="iconify text-2xl text-primary" data-icon="mdi:application"></span>
        <h1 class="text-xl font-bold ml-3 dark:text-white">通讯管理系统</h1>
      </div>
      <nav class="space-y-1">
        <a href="index.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:home"></span> 仪表盘
        </a>
        <a href="user-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-group"></span> 用户管理
        </a>
        <a href="message-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-processing"></span> 消息管理
        </a>
        <a href="group-chat-management.html" class="nav-item flex items-center active">
          <span class="iconify mr-3" data-icon="mdi:message-text"></span> 群聊管理
        </a>
        <a href="#" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:file-document"></span> 文件管理
        </a>
        <a href="data-analysis.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:chart-line"></span> 数据分析
        </a>
        <a href="system-settings.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:cog"></span> 系统设置
        </a>
        <a href="data-backup.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:content-save"></span> 数据备份
        </a>
        <a href="profile.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-circle"></span> 个人中心
        </a>
      </nav>
    </div>

    <!-- 顶部栏 -->
    <div class="topbar flex items-center justify-between">
      <div class="relative w-1/3">
        <input type="text" placeholder="搜索系统功能..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
        <span class="iconify absolute left-3 top-2.5 text-gray-400" data-icon="mdi:magnify"></span>
      </div>
      
      <div class="flex items-center space-x-6">
        <button class="theme-toggle">
          <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:theme-light-dark"></span>
        </button>
        
        <div class="relative">
          <button class="notification-btn">
            <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:bell-outline"></span>
            <span class="notification-dot absolute rounded-full"></span>
          </button>
        </div>
        
        <div class="flex items-center">
          <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center">
            <span class="iconify text-white" data-icon="mdi:account"></span>
          </div>
          <span class="ml-2 font-medium dark:text-white">管理员</span>
        </div>
      </div>
    </div>

    <!-- 主内容区 -->
    <main class="main-content">
      <div class="mb-6 flex justify-between items-center">
        <div>
          <h1 class="text-2xl font-bold dark:text-white">群聊管理</h1>
          <p class="text-gray-500 text-sm mt-1 dark:text-gray-400">管理所有系统群聊和相关设置</p>
        </div>
        <button id="createGroupBtn" class="bg-primary hover:bg-blue-600 text-white py-2 px-4 rounded-lg flex items-center">
          <span class="iconify mr-2" data-icon="mdi:plus"></span>
          创建群聊
        </button>
      </div>

      <!-- 群聊统计卡片 -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
        <div class="card">
          <div class="flex items-center">
            <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center">
              <span class="iconify text-blue-500 text-xl" data-icon="mdi:account-group"></span>
            </div>
            <div class="ml-4">
              <div class="text-gray-500 text-sm dark:text-gray-400">群聊总数</div>
              <div class="text-2xl font-bold dark:text-white">4,372</div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="flex items-center">
            <div class="w-12 h-12 rounded-full bg-green-100 flex items-center justify-center">
              <span class="iconify text-green-500 text-xl" data-icon="mdi:account-multiple-check"></span>
            </div>
            <div class="ml-4">
              <div class="text-gray-500 text-sm dark:text-gray-400">活跃群聊</div>
              <div class="text-2xl font-bold dark:text-white">2,845</div>
            </div>
          </div>
        </div>
        <div class="card">
          <div class="flex items-center">
            <div class="w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center">
              <span class="iconify text-orange-500 text-xl" data-icon="mdi:message-text-outline"></span>
            </div>
            <div class="ml-4">
              <div class="text-gray-500 text-sm dark:text-gray-400">今日群消息</div>
              <div class="text-2xl font-bold dark:text-white">28,432</div>
            </div>
          </div>
        </div>
      </div>

      <!-- 过滤和搜索区域 -->
      <div class="card mb-6">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div class="md:col-span-2">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">群聊搜索</label>
            <div class="relative">
              <input type="text" id="groupSearchInput" placeholder="搜索群名称/群ID..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <span class="iconify absolute left-3 top-2.5 text-gray-400" data-icon="mdi:magnify"></span>
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">群聊状态</label>
            <select id="statusFilter" class="w-full py-2 px-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <option value="all">全部状态</option>
              <option value="active">活跃</option>
              <option value="inactive">非活跃</option>
              <option value="restricted">受限</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">创建时间</label>
            <select id="timeFilter" class="w-full py-2 px-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <option value="all">全部时间</option>
              <option value="today">今天</option>
              <option value="7days">近7天</option>
              <option value="30days">近30天</option>
              <option value="90days">近90天</option>
            </select>
          </div>
        </div>
        <div class="mt-4 flex justify-end">
          <button id="resetFilterBtn" class="mr-2 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600">
            重置
          </button>
          <button id="searchBtn" class="bg-primary hover:bg-blue-600 text-white py-2 px-4 rounded-lg">
            搜索
          </button>
        </div>
      </div>

      <!-- 群聊列表 -->
      <div class="card">
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th class="w-12">
                  <input type="checkbox" id="selectAll" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                </th>
                <th>群聊ID</th>
                <th>群名称</th>
                <th>成员数量</th>
                <th>群主</th>
                <th>创建时间</th>
                <th>状态</th>
                <th class="text-right">操作</th>
              </tr>
            </thead>
            <tbody id="groupTableBody">
              <tr>
                <td><input type="checkbox" class="group-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>GID10001</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-2">
                    <span class="text-blue-500 font-medium">研</span>
                  </div>
                  项目研发群
                </td>
                <td>24</td>
                <td>张三</td>
                <td>2025-04-15 09:30</td>
                <td>
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                    活跃
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-group-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-group-id="GID10001">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="edit-group-btn text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300" data-group-id="GID10001">
                      <span class="iconify" data-icon="mdi:pencil"></span>
                    </button>
                    <button class="delete-group-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-group-id="GID10001">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" class="group-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>GID10002</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center mr-2">
                    <span class="text-purple-500 font-medium">市</span>
                  </div>
                  市场部
                </td>
                <td>12</td>
                <td>李四</td>
                <td>2025-04-10 14:20</td>
                <td>
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                    活跃
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-group-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-group-id="GID10002">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="edit-group-btn text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300" data-group-id="GID10002">
                      <span class="iconify" data-icon="mdi:pencil"></span>
                    </button>
                    <button class="delete-group-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-group-id="GID10002">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" class="group-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>GID10003</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center mr-2">
                    <span class="text-green-500 font-medium">技</span>
                  </div>
                  技术支持
                </td>
                <td>8</td>
                <td>王五</td>
                <td>2025-04-05 11:45</td>
                <td>
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                    活跃
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-group-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-group-id="GID10003">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="edit-group-btn text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300" data-group-id="GID10003">
                      <span class="iconify" data-icon="mdi:pencil"></span>
                    </button>
                    <button class="delete-group-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-group-id="GID10003">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" class="group-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>GID10004</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-red-100 flex items-center justify-center mr-2">
                    <span class="text-red-500 font-medium">公</span>
                  </div>
                  公司公告
                </td>
                <td>58</td>
                <td>管理员</td>
                <td>2025-03-20 09:00</td>
                <td>
                  <span class="status-badge bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">
                    受限
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-group-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-group-id="GID10004">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="edit-group-btn text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300" data-group-id="GID10004">
                      <span class="iconify" data-icon="mdi:pencil"></span>
                    </button>
                    <button class="delete-group-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-group-id="GID10004">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" class="group-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>GID10005</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center mr-2">
                    <span class="text-yellow-500 font-medium">产</span>
                  </div>
                  产品设计讨论组
                </td>
                <td>15</td>
                <td>赵六</td>
                <td>2025-03-15 16:30</td>
                <td>
                  <span class="status-badge bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300">
                    非活跃
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-group-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-group-id="GID10005">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="edit-group-btn text-green-500 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300" data-group-id="GID10005">
                      <span class="iconify" data-icon="mdi:pencil"></span>
                    </button>
                    <button class="delete-group-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-group-id="GID10005">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- 底部工具栏 -->
        <div class="mt-4 flex flex-col sm:flex-row justify-between items-center">
          <div class="flex items-center mb-4 sm:mb-0">
            <button id="batchDeleteBtn" class="bg-red-500 hover:bg-red-600 text-white py-1.5 px-3 rounded text-sm flex items-center">
              <span class="iconify mr-1" data-icon="mdi:delete"></span> 批量删除
            </button>
            <button id="batchMessageBtn" class="bg-primary hover:bg-blue-600 text-white py-1.5 px-3 rounded text-sm flex items-center ml-2">
              <span class="iconify mr-1" data-icon="mdi:message-text"></span> 发送通知
            </button>
            <div class="ml-4 text-sm text-gray-500 dark:text-gray-400">
              共 <span id="totalGroups">4,372</span> 条数据
            </div>
          </div>

          <!-- 分页 -->
          <div class="flex items-center">
            <button class="pagination-item text-gray-600 dark:text-gray-400">
              <span class="iconify" data-icon="mdi:chevron-left"></span>
            </button>
            <button class="pagination-item active">1</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">2</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">3</button>
            <span class="mx-1">...</span>
            <button class="pagination-item text-gray-600 dark:text-gray-400">50</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">
              <span class="iconify" data-icon="mdi:chevron-right"></span>
            </button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- 创建/编辑群聊模态框 -->
  <div id="groupModal" class="modal">
    <div class="modal-content">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold" id="modalTitle">创建新群聊</h3>
          <button id="closeModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <form id="groupForm">
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">群聊名称 <span class="text-red-500">*</span></label>
            <input type="text" id="groupName" name="groupName" required="" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
          </div>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">群聊描述</label>
            <textarea id="groupDesc" name="groupDesc" rows="3" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white"></textarea>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">群主 <span class="text-red-500">*</span></label>
              <select id="groupOwner" name="groupOwner" required="" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <option value="">请选择群主</option>
                <option value="UID10001">张三 (UID10001)</option>
                <option value="UID10002">李四 (UID10002)</option>
                <option value="UID10003">王五 (UID10003)</option>
                <option value="UID10004">赵六 (UID10004)</option>
                <option value="UID10005">陈七 (UID10005)</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">群聊状态</label>
              <select id="groupStatus" name="groupStatus" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <option value="active">活跃</option>
                <option value="inactive">非活跃</option>
                <option value="restricted">受限</option>
              </select>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">最大成员数</label>
              <input type="number" id="maxMembers" name="maxMembers" min="2" max="1000" value="200" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">入群验证</label>
              <select id="joinVerification" name="joinVerification" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <option value="none">无需验证</option>
                <option value="owner">群主审核</option>
                <option value="admin">管理员审核</option>
                <option value="answer">回答问题</option>
              </select>
            </div>
          </div>

          <div id="verificationQuestionContainer" class="mb-4 hidden">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">验证问题</label>
            <input type="text" id="verificationQuestion" name="verificationQuestion" placeholder="请输入验证问题" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white mb-2">
            <input type="text" id="verificationAnswer" name="verificationAnswer" placeholder="请输入答案" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
          </div>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">群聊设置</label>
            <div class="space-y-2 mt-2">
              <div class="flex items-center">
                <input type="checkbox" id="allowMemberInvite" name="allowMemberInvite" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                <label for="allowMemberInvite" class="ml-2 text-sm text-gray-700 dark:text-gray-300">允许成员邀请</label>
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="allowMemberEdit" name="allowMemberEdit" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                <label for="allowMemberEdit" class="ml-2 text-sm text-gray-700 dark:text-gray-300">允许成员编辑群资料</label>
              </div>
              <div class="flex items-center">
                <input type="checkbox" id="historyVisible" name="historyVisible" checked="" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                <label for="historyVisible" class="ml-2 text-sm text-gray-700 dark:text-gray-300">新成员可见历史消息</label>
              </div>
            </div>
          </div>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">初始成员</label>
            <div class="border border-gray-300 rounded-lg p-2 dark:border-gray-600">
              <div class="flex flex-wrap gap-2 mb-2" id="selectedMembers">
                <!-- 选中的成员标签将在这里显示 -->
              </div>
              <input type="text" id="memberSearch" placeholder="搜索用户添加..." class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <div class="mt-2 max-h-32 overflow-y-auto hidden" id="memberSearchResults">
                <!-- 搜索结果将在这里显示 -->
              </div>
            </div>
          </div>

          <div class="flex justify-end space-x-3 mt-6">
            <button type="button" id="cancelBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
              取消
            </button>
            <button type="submit" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
              确认
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- 查看群聊详情模态框 -->
  <div id="viewGroupModal" class="modal">
    <div class="modal-content">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold">群聊详情</h3>
          <button id="closeViewModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <div class="flex items-center mb-6">
          <div class="w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center mr-4">
            <span class="text-blue-500 text-xl font-medium" id="groupInitial">研</span>
          </div>
          <div>
            <h3 class="text-xl font-semibold dark:text-white" id="viewGroupName">项目研发群</h3>
            <p class="text-sm text-gray-500 dark:text-gray-400" id="viewGroupId">群ID: GID10001</p>
          </div>
        </div>

        <div class="mb-6">
          <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">群聊描述</h4>
          <p class="text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-800 p-3 rounded" id="viewGroupDesc">该群用于项目研发团队的日常沟通和协作，讨论技术方案和开发进度。</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
          <div>
            <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">基本信息</h4>
            <div class="bg-gray-50 dark:bg-gray-800 p-3 rounded">
              <div class="grid grid-cols-3 gap-2 text-sm">
                <div class="text-gray-500 dark:text-gray-400">创建时间:</div>
                <div class="col-span-2" id="viewCreateTime">2025-04-15 09:30</div>
                
                <div class="text-gray-500 dark:text-gray-400">群主:</div>
                <div class="col-span-2" id="viewGroupOwner">张三</div>
                
                <div class="text-gray-500 dark:text-gray-400">成员数:</div>
                <div class="col-span-2" id="viewMemberCount">24/200</div>
                
                <div class="text-gray-500 dark:text-gray-400">状态:</div>
                <div class="col-span-2" id="viewGroupStatus">
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">活跃</span>
                </div>
              </div>
            </div>
          </div>
          <div>
            <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">群聊设置</h4>
            <div class="bg-gray-50 dark:bg-gray-800 p-3 rounded">
              <div class="grid grid-cols-3 gap-2 text-sm">
                <div class="text-gray-500 dark:text-gray-400">入群验证:</div>
                <div class="col-span-2" id="viewJoinVerification">需群主审核</div>
                
                <div class="text-gray-500 dark:text-gray-400">成员邀请:</div>
                <div class="col-span-2" id="viewMemberInvite">允许</div>
                
                <div class="text-gray-500 dark:text-gray-400">编辑群资料:</div>
                <div class="col-span-2" id="viewMemberEdit">仅群主</div>
                
                <div class="text-gray-500 dark:text-gray-400">历史消息:</div>
                <div class="col-span-2" id="viewHistoryVisible">对新成员可见</div>
              </div>
            </div>
          </div>
        </div>

        <div class="mb-6">
          <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">群活跃度</h4>
          <div class="chart-container" id="activity-chart"></div>
        </div>

        <div class="mb-6">
          <div class="flex justify-between items-center mb-2">
            <h4 class="text-sm font-medium text-gray-700 dark:text-gray-300">群成员列表</h4>
            <span class="text-xs text-gray-500 dark:text-gray-400" id="viewMembersInfo">共24名成员</span>
          </div>
          <div class="bg-gray-50 dark:bg-gray-800 rounded p-3 max-h-48 overflow-y-auto" id="membersList">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-2">
                  <span class="text-blue-500 font-medium">张</span>
                </div>
                <div>
                  <div class="text-sm">张三 <span class="text-xs text-primary">(群主)</span></div>
                  <div class="text-xs text-gray-500 dark:text-gray-400">UID10001</div>
                </div>
              </div>
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center mr-2">
                  <span class="text-purple-500 font-medium">李</span>
                </div>
                <div>
                  <div class="text-sm">李四 <span class="text-xs text-green-500">(管理员)</span></div>
                  <div class="text-xs text-gray-500 dark:text-gray-400">UID10002</div>
                </div>
              </div>
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center mr-2">
                  <span class="text-orange-500 font-medium">王</span>
                </div>
                <div>
                  <div class="text-sm">王五</div>
                  <div class="text-xs text-gray-500 dark:text-gray-400">UID10003</div>
                </div>
              </div>
              <div class="flex items-center">
                <div class="w-8 h-8 rounded-full bg-red-100 flex items-center justify-center mr-2">
                  <span class="text-red-500 font-medium">赵</span>
                </div>
                <div>
                  <div class="text-sm">赵六</div>
                  <div class="text-xs text-gray-500 dark:text-gray-400">UID10004</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="flex justify-end space-x-2">
          <button type="button" id="sendNotificationBtn" class="px-3 py-1.5 bg-primary hover:bg-blue-600 text-white rounded text-sm">
            发送群通知
          </button>
          <button type="button" id="manageBtn" class="px-3 py-1.5 border border-gray-300 bg-white hover:bg-gray-50 text-gray-700 rounded text-sm dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            管理群聊
          </button>
          <button type="button" id="closeViewModalBtn" class="px-3 py-1.5 border border-gray-300 bg-white hover:bg-gray-50 text-gray-700 rounded text-sm dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            关闭
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 删除确认模态框 -->
  <div id="deleteModal" class="modal">
    <div class="modal-content" style="max-width: 400px;">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold">确认删除</h3>
          <button class="close-delete-modal text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <div class="mb-6">
          <p class="text-gray-700 dark:text-gray-300">您确定要删除选中的群聊吗？此操作不可撤销，所有群聊历史消息和文件也将被删除。</p>
          <p id="deleteGroupList" class="mt-2 text-sm text-gray-500 dark:text-gray-400">将删除：<span id="deleteCount"></span> 个群聊</p>
        </div>

        <div class="flex justify-end space-x-3">
          <button type="button" class="close-delete-modal px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            取消
          </button>
          <button type="button" id="confirmDeleteBtn" class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg">
            确认删除
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 发送通知模态框 -->
  <div id="notificationModal" class="modal">
    <div class="modal-content">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold" id="notificationModalTitle">发送群聊通知</h3>
          <button id="closeNotificationModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <form id="notificationForm">
          <div id="selectedGroupsContainer" class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">选中群聊</label>
            <div class="flex flex-wrap gap-2 mb-2" id="selectedGroups">
              <!-- 选中的群聊标签将在这里显示 -->
            </div>
          </div>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">通知标题 <span class="text-red-500">*</span></label>
            <input type="text" id="notificationTitle" name="notificationTitle" required="" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
          </div>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">通知内容 <span class="text-red-500">*</span></label>
            <textarea id="notificationContent" name="notificationContent" rows="5" required="" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white"></textarea>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">通知级别</label>
              <select id="notificationLevel" name="notificationLevel" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <option value="normal">普通</option>
                <option value="important">重要</option>
                <option value="urgent">紧急</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">发送时间</label>
              <select id="sendTime" name="sendTime" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <option value="now">立即发送</option>
                <option value="schedule">定时发送</option>
              </select>
            </div>
          </div>

          <div id="scheduleTimeContainer" class="mb-4 hidden">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">计划发送时间 <span class="text-red-500">*</span></label>
            <input type="datetime-local" id="scheduleTime" name="scheduleTime" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
          </div>

          <div class="flex items-center mb-4">
            <input type="checkbox" id="pinNotification" name="pinNotification" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
            <label for="pinNotification" class="ml-2 text-sm text-gray-700 dark:text-gray-300">置顶通知</label>
          </div>

          <div class="flex justify-end space-x-3 mt-6">
            <button type="button" id="cancelNotificationBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
              取消
            </button>
            <button type="submit" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
              发送
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 主题切换
      const themeToggle = document.querySelector('.theme-toggle');
      themeToggle.addEventListener('click', function() {
        const html = document.querySelector('html');
        if (html.classList.contains('dark')) {
          html.classList.remove('dark');
          localStorage.setItem('theme', 'light');
        } else {
          html.classList.add('dark');
          localStorage.setItem('theme', 'dark');
        }
        
        // 重新渲染图表
        if (window.activityChart) {
          window.activityChart.dispose();
          initActivityChart();
        }
      });
      
      // 检查本地存储的主题设置
      if (localStorage.getItem('theme') === 'dark') {
        document.querySelector('html').classList.add('dark');
      }
      
      // 创建/编辑群聊模态框
      const groupModal = document.getElementById('groupModal');
      const createGroupBtn = document.getElementById('createGroupBtn');
      const closeModal = document.getElementById('closeModal');
      const cancelBtn = document.getElementById('cancelBtn');
      const modalTitle = document.getElementById('modalTitle');
      const groupForm = document.getElementById('groupForm');
      
      // 验证问题显示/隐藏
      const joinVerification = document.getElementById('joinVerification');
      const verificationQuestionContainer = document.getElementById('verificationQuestionContainer');
      
      joinVerification.addEventListener('change', function() {
        if (this.value === 'answer') {
          verificationQuestionContainer.classList.remove('hidden');
        } else {
          verificationQuestionContainer.classList.add('hidden');
        }
      });
      
      // 打开创建群聊模态框
      createGroupBtn.addEventListener('click', function() {
        modalTitle.textContent = '创建新群聊';
        groupForm.reset();
        verificationQuestionContainer.classList.add('hidden');
        document.getElementById('selectedMembers').innerHTML = '';
        groupModal.classList.add('active');
      });
      
      // 关闭模态框
      closeModal.addEventListener('click', function() {
        groupModal.classList.remove('active');
      });
      
      cancelBtn.addEventListener('click', function() {
        groupModal.classList.remove('active');
      });
      
      // 表单提交
      groupForm.addEventListener('submit', function(e) {
        e.preventDefault();
        // 这里可以添加表单验证和提交逻辑
        console.log('群聊表单提交');
        
        // 模拟成功提交后关闭模态框
        groupModal.classList.remove('active');
      });
      
      // 成员搜索功能
      const memberSearch = document.getElementById('memberSearch');
      const memberSearchResults = document.getElementById('memberSearchResults');
      const selectedMembers = document.getElementById('selectedMembers');
      
      // 模拟用户数据
      const users = [
        { id: 'UID10001', name: '张三', initial: '张' },
        { id: 'UID10002', name: '李四', initial: '李' },
        { id: 'UID10003', name: '王五', initial: '王' },
        { id: 'UID10004', name: '赵六', initial: '赵' },
        { id: 'UID10005', name: '陈七', initial: '陈' }
      ];
      
      memberSearch.addEventListener('focus', function() {
        memberSearchResults.classList.remove('hidden');
        renderSearchResults('');
      });
      
      memberSearch.addEventListener('input', function() {
        renderSearchResults(this.value);
      });
      
      function renderSearchResults(query) {
        let results = users;
        if (query) {
          results = users.filter(user => user.name.includes(query) || user.id.includes(query));
        }
        
        memberSearchResults.innerHTML = '';
        results.forEach(user => {
          const div = document.createElement('div');
          div.className = 'flex items-center p-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer';
          div.innerHTML = `
            <div class="w-6 h-6 rounded-full bg-blue-100 flex items-center justify-center mr-2">
              <span class="text-blue-500 text-xs font-medium">${user.initial}</span>
            </div>
            <div class="text-sm">${user.name} <span class="text-xs text-gray-500">(${user.id})</span></div>
          `;
          
          div.addEventListener('click', function() {
            addMember(user);
            memberSearch.value = '';
            memberSearchResults.classList.add('hidden');
          });
          
          memberSearchResults.appendChild(div);
        });
      }
      
      function addMember(user) {
        // 检查是否已添加
        const existing = document.querySelector(`[data-user-id="${user.id}"]`);
        if (existing) return;
        
        const tag = document.createElement('div');
        tag.className = 'flex items-center bg-blue-100 text-blue-800 text-sm rounded-full px-3 py-1 dark:bg-blue-900 dark:text-blue-300';
        tag.setAttribute('data-user-id', user.id);
        tag.innerHTML = `
          ${user.name}
          <span class="ml-1 cursor-pointer" onclick="this.parentElement.remove()">
            <span class="iconify" data-icon="mdi:close"></span>
          </span>
        `;
        
        selectedMembers.appendChild(tag);
      }
      
      // 点击其他区域隐藏搜索结果
      document.addEventListener('click', function(e) {
        if (!memberSearch.contains(e.target) && !memberSearchResults.contains(e.target)) {
          memberSearchResults.classList.add('hidden');
        }
      });
      
      // 查看群聊详情
      const viewGroupModal = document.getElementById('viewGroupModal');
      const closeViewModal = document.getElementById('closeViewModal');
      const closeViewModalBtn = document.getElementById('closeViewModalBtn');
      const viewButtons = document.querySelectorAll('.view-group-btn');
      
      // 初始化活跃度图表
      function initActivityChart() {
        if (!document.getElementById('activity-chart')) return;
        
        window.activityChart = echarts.init(document.getElementById('activity-chart'));
        window.activityChart.setOption({
          tooltip: {
            trigger: 'axis'
          },
          grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
          },
          xAxis: {
            type: 'category',
            data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日']
          },
          yAxis: {
            type: 'value'
          },
          series: [
            {
              name: '消息数量',
              type: 'line',
              smooth: true,
              data: [120, 132, 101, 134, 90, 30, 20],
              itemStyle: {
                color: '#3b82f6'
              },
              areaStyle: {
                color: {
                  type: 'linear',
                  x: 0,
                  y: 0,
                  x2: 0,
                  y2: 1,
                  colorStops: [{
                    offset: 0, color: 'rgba(59, 130, 246, 0.5)'
                  }, {
                    offset: 1, color: 'rgba(59, 130, 246, 0.05)'
                  }]
                }
              }
            },
            {
              name: '活跃人数',
              type: 'line',
              smooth: true,
              data: [20, 22, 21, 24, 18, 10, 8],
              itemStyle: {
                color: '#10b981'
              }
            }
          ]
        });
        
        // 响应窗口调整
        window.addEventListener('resize', function() {
          if (window.activityChart) {
            window.activityChart.resize();
          }
        });
      }
      
      viewButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          const groupId = this.getAttribute('data-group-id');
          console.log('查看群聊:', groupId);
          
          viewGroupModal.classList.add('active');
          
          // 延迟一下初始化图表，确保DOM已经渲染
          setTimeout(() => {
            initActivityChart();
          }, 100);
        });
      });
      
      closeViewModal.addEventListener('click', function() {
        viewGroupModal.classList.remove('active');
      });
      
      closeViewModalBtn.addEventListener('click', function() {
        viewGroupModal.classList.remove('active');
      });
      
      // 发送通知模态框
      const notificationModal = document.getElementById('notificationModal');
      const closeNotificationModal = document.getElementById('closeNotificationModal');
      const cancelNotificationBtn = document.getElementById('cancelNotificationBtn');
      const sendNotificationBtn = document.getElementById('sendNotificationBtn');
      const notificationForm = document.getElementById('notificationForm');
      const batchMessageBtn = document.getElementById('batchMessageBtn');
      
      // 发送时间选择逻辑
      const sendTime = document.getElementById('sendTime');
      const scheduleTimeContainer = document.getElementById('scheduleTimeContainer');
      
      sendTime.addEventListener('change', function() {
        if (this.value === 'schedule') {
          scheduleTimeContainer.classList.remove('hidden');
        } else {
          scheduleTimeContainer.classList.add('hidden');
        }
      });
      
      // 发送通知给单个群聊
      sendNotificationBtn.addEventListener('click', function() {
        const groupName = document.getElementById('viewGroupName').textContent;
        const groupId = document.getElementById('viewGroupId').textContent.replace('群ID: ', '');
        
        // 设置模态框标题
        document.getElementById('notificationModalTitle').textContent = `发送通知给 ${groupName}`;
        
        // 添加选中的群聊标签
        const selectedGroups = document.getElementById('selectedGroups');
        selectedGroups.innerHTML = '';
        const tag = document.createElement('div');
        tag.className = 'flex items-center bg-blue-100 text-blue-800 text-sm rounded-full px-3 py-1 dark:bg-blue-900 dark:text-blue-300';
        tag.setAttribute('data-group-id', groupId);
        tag.innerHTML = `
          ${groupName}
          <span class="ml-1 cursor-pointer" onclick="this.parentElement.remove()">
            <span class="iconify" data-icon="mdi:close"></span>
          </span>
        `;
        selectedGroups.appendChild(tag);
        
        // 重置并显示表单
        notificationForm.reset();
        scheduleTimeContainer.classList.add('hidden');
        notificationModal.classList.add('active');
        
        // 关闭查看群聊模态框
        viewGroupModal.classList.remove('active');
      });
      
      // 批量发送通知给多个群聊
      batchMessageBtn.addEventListener('click', function() {
        const selectedGroups = document.querySelectorAll('.group-select:checked');
        if (selectedGroups.length === 0) {
          alert('请至少选择一个群聊');
          return;
        }
        
        // 设置模态框标题
        document.getElementById('notificationModalTitle').textContent = `批量发送群聊通知`;
        
        // 添加选中的群聊标签
        const selectedGroupsContainer = document.getElementById('selectedGroups');
        selectedGroupsContainer.innerHTML = '';
        
        selectedGroups.forEach(checkbox => {
          const row = checkbox.closest('tr');
          const groupId = row.querySelector('.delete-group-btn').getAttribute('data-group-id');
          const groupName = row.querySelector('td:nth-child(3)').textContent.trim();
          
          const tag = document.createElement('div');
          tag.className = 'flex items-center bg-blue-100 text-blue-800 text-sm rounded-full px-3 py-1 dark:bg-blue-900 dark:text-blue-300';
          tag.setAttribute('data-group-id', groupId);
          tag.innerHTML = `
            ${groupName}
            <span class="ml-1 cursor-pointer" onclick="this.parentElement.remove()">
              <span class="iconify" data-icon="mdi:close"></span>
            </span>
          `;
          selectedGroupsContainer.appendChild(tag);
        });
        
        // 重置并显示表单
        notificationForm.reset();
        scheduleTimeContainer.classList.add('hidden');
        notificationModal.classList.add('active');
      });
      
      // 关闭通知模态框
      closeNotificationModal.addEventListener('click', function() {
        notificationModal.classList.remove('active');
      });
      
      cancelNotificationBtn.addEventListener('click', function() {
        notificationModal.classList.remove('active');
      });
      
      // 通知表单提交
      notificationForm.addEventListener('submit', function(e) {
        e.preventDefault();
        // 这里可以添加表单验证和提交逻辑
        console.log('通知表单提交');
        
        // 模拟成功提交后关闭模态框
        notificationModal.classList.remove('active');
      });
      
      // 编辑群聊
      const editButtons = document.querySelectorAll('.edit-group-btn');
      editButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          const groupId = this.getAttribute('data-group-id');
          console.log('编辑群聊:', groupId);
          
          // 在实际应用中，这里会从服务器获取群聊数据
          // 这里只是模拟
          modalTitle.textContent = '编辑群聊';
          
          // 假设已经填充表单数据
          groupModal.classList.add('active');
        });
      });
      
      // 删除群聊
      const deleteModal = document.getElementById('deleteModal');
      const closeDeleteModal = document.querySelectorAll('.close-delete-modal');
      const deleteButtons = document.querySelectorAll('.delete-group-btn');
      const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
      const deleteCount = document.getElementById('deleteCount');
      
      deleteButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          const groupId = this.getAttribute('data-group-id');
          console.log('删除群聊:', groupId);
          
          deleteCount.textContent = "1";
          deleteModal.classList.add('active');
        });
      });
      
      closeDeleteModal.forEach(btn => {
        btn.addEventListener('click', function() {
          deleteModal.classList.remove('active');
        });
      });
      
      confirmDeleteBtn.addEventListener('click', function() {
        // 这里添加删除逻辑
        console.log('确认删除');
        
        // 模拟删除成功后关闭模态框
        deleteModal.classList.remove('active');
      });
      
      // 批量删除
      const batchDeleteBtn = document.getElementById('batchDeleteBtn');
      const selectAll = document.getElementById('selectAll');
      const groupCheckboxes = document.querySelectorAll('.group-select');
      
      batchDeleteBtn.addEventListener('click', function() {
        const selectedGroups = document.querySelectorAll('.group-select:checked');
        if (selectedGroups.length === 0) {
          alert('请至少选择一个群聊');
          return;
        }
        
        deleteCount.textContent = selectedGroups.length;
        deleteModal.classList.add('active');
      });
      
      // 全选功能
      selectAll.addEventListener('change', function() {
        groupCheckboxes.forEach(checkbox => {
          checkbox.checked = this.checked;
        });
      });
      
      // 搜索和筛选功能
      const searchBtn = document.getElementById('searchBtn');
      const resetFilterBtn = document.getElementById('resetFilterBtn');
      
      searchBtn.addEventListener('click', function() {
        const keyword = document.getElementById('groupSearchInput').value;
        const status = document.getElementById('statusFilter').value;
        const time = document.getElementById('timeFilter').value;
        
        console.log('搜索条件:', { keyword, status, time });
        // 这里添加搜索逻辑
      });
      
      resetFilterBtn.addEventListener('click', function() {
        document.getElementById('groupSearchInput').value = '';
        document.getElementById('statusFilter').value = 'all';
        document.getElementById('timeFilter').value = 'all';
      });
    });
  </script>




  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>消息管理 - 通讯软件后台管理系统</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        fontFamily: {
          sans: ['Inter', 'sans-serif'],
        },
        extend: {
          colors: {
            primary: '#3b82f6',
            success: '#10b981',
            warning: '#f59e0b',
            error: '#ef4444',
            background: {
              light: '#f8fafc',
              dark: '#1f2937'
            }
          }
        }
      },
      darkMode: 'class',
    }
  </script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
      height: 100%;
      margin: 0;
      padding: 0;
      color: #1f2937;
    }
    .dark body {
      background-color: #111827;
      color: #f3f4f6;
    }
    .dashboard-container {
      max-width: 1440px;
      min-height: 100vh;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 240px 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas: 
        "sidebar topbar"
        "sidebar main";
    }
    .sidebar {
      grid-area: sidebar;
      border-right: 1px solid #e5e7eb;
      background: #f8fafc;
      padding: 24px 0;
    }
    .dark .sidebar {
      background: #1f2937;
      border-right: 1px solid #374151;
    }
    .topbar {
      grid-area: topbar;
      background: #ffffff;
      border-bottom: 1px solid #e5e7eb;
      padding: 16px 32px;
    }
    .dark .topbar {
      background: #1f2937;
      border-bottom: 1px solid #374151;
    }
    .main-content {
      grid-area: main;
      background: #f9fafb;
      padding: 24px;
      overflow-y: auto;
    }
    .dark .main-content {
      background: #111827;
    }
    .card {
      background: #ffffff;
      border-radius: 8px;
      padding: 20px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }
    .dark .card {
      background: #1f2937;
      border: 1px solid #374151;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
    }
    .nav-item {
      padding: 12px 24px;
      font-size: 14px;
      color: #4b5563;
      border-left: 3px solid transparent;
      transition: all 0.2s;
    }
    .dark .nav-item {
      color: #d1d5db;
    }
    .nav-item:hover, .nav-item.active {
      background: #f1f5f9;
      border-left: 3px solid #3b82f6;
      color: #3b82f6;
    }
    .dark .nav-item:hover, .dark .nav-item.active {
      background: #1a2435;
    }
    .notification-dot {
      top: -2px;
      right: -2px;
      width: 8px;
      height: 8px;
      background-color: #ef4444;
    }
    .table-responsive {
      overflow-x: auto;
    }
    .table {
      min-width: 100%;
      border-collapse: separate;
      border-spacing: 0;
    }
    .table th {
      text-align: left;
      padding: 12px 16px;
      font-weight: 500;
      border-bottom: 1px solid #e5e7eb;
      color: #6b7280;
    }
    .dark .table th {
      color: #9ca3af;
      border-bottom: 1px solid #374151;
    }
    .table td {
      padding: 12px 16px;
      border-bottom: 1px solid #e5e7eb;
      vertical-align: middle;
    }
    .dark .table td {
      border-bottom: 1px solid #374151;
    }
    .table tr:hover {
      background-color: #f9fafb;
    }
    .dark .table tr:hover {
      background-color: #1e293b;
    }
    .status-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 2px 8px;
      border-radius: 9999px;
      font-size: 12px;
    }
    .pagination-item {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border-radius: 4px;
      margin: 0 2px;
      cursor: pointer;
    }
    .pagination-item.active {
      background-color: #3b82f6;
      color: white;
    }
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .modal.active {
      opacity: 1;
      pointer-events: auto;
    }
    .modal-content {
      background: white;
      border-radius: 8px;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      transform: translateY(20px);
      transition: transform 0.3s;
    }
    .dark .modal-content {
      background: #1f2937;
    }
    .modal.active .modal-content {
      transform: translateY(0);
    }
    .message-preview {
      max-height: 60px;
      overflow: hidden;
      text-overflow: ellipsis;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
    }
    @media (max-width: 1024px) {
      .dashboard-container {
        grid-template-columns: 200px 1fr;
      }
    }
    @media (max-width: 768px) {
      .dashboard-container {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "topbar"
          "main";
      }
      .sidebar {
        display: none;
      }
    }
  </style>


  <div class="dashboard-container">
    <!-- 左侧导航 -->
    <div class="sidebar">
      <div class="flex items-center px-6 mb-8">
        <span class="iconify text-2xl text-primary" data-icon="mdi:application"></span>
        <h1 class="text-xl font-bold ml-3 dark:text-white">通讯管理系统</h1>
      </div>
      <nav class="space-y-1">
        <a href="index.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:home"></span> 仪表盘
        </a>
        <a href="user-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-group"></span> 用户管理
        </a>
        <a href="message-management.html" class="nav-item flex items-center active">
          <span class="iconify mr-3" data-icon="mdi:message-processing"></span> 消息管理
        </a>
        <a href="group-chat-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-text"></span> 群聊管理
        </a>
        <a href="#" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:file-document"></span> 文件管理
        </a>
        <a href="data-analysis.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:chart-line"></span> 数据分析
        </a>
        <a href="system-settings.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:cog"></span> 系统设置
        </a>
        <a href="data-backup.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:content-save"></span> 数据备份
        </a>
        <a href="profile.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-circle"></span> 个人中心
        </a>
      </nav>
    </div>

    <!-- 顶部栏 -->
    <div class="topbar flex items-center justify-between">
      <div class="relative w-1/3">
        <input type="text" placeholder="搜索系统功能..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
        <span class="iconify absolute left-3 top-2.5 text-gray-400" data-icon="mdi:magnify"></span>
      </div>
      
      <div class="flex items-center space-x-6">
        <button class="theme-toggle">
          <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:theme-light-dark"></span>
        </button>
        
        <div class="relative">
          <button class="notification-btn">
            <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:bell-outline"></span>
            <span class="notification-dot absolute rounded-full"></span>
          </button>
        </div>
        
        <div class="flex items-center">
          <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center">
            <span class="iconify text-white" data-icon="mdi:account"></span>
          </div>
          <span class="ml-2 font-medium dark:text-white">管理员</span>
        </div>
      </div>
    </div>

    <!-- 主内容区 -->
    <main class="main-content">
      <div class="mb-6 flex justify-between items-center">
        <div>
          <h1 class="text-2xl font-bold dark:text-white">消息管理</h1>
          <p class="text-gray-500 text-sm mt-1 dark:text-gray-400">监控和管理平台所有聊天消息</p>
        </div>
        <button id="addMessageBtn" class="bg-primary hover:bg-blue-600 text-white py-2 px-4 rounded-lg flex items-center">
          <span class="iconify mr-2" data-icon="mdi:plus"></span>
          发送系统消息
        </button>
      </div>

      <!-- 过滤和搜索区域 -->
      <div class="card mb-6">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div class="md:col-span-2">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">关键字搜索</label>
            <div class="relative">
              <input type="text" id="messageSearchInput" placeholder="搜索消息内容/发送者..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <span class="iconify absolute left-3 top-2.5 text-gray-400" data-icon="mdi:magnify"></span>
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">消息类型</label>
            <select id="typeFilter" class="w-full py-2 px-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <option value="all">全部类型</option>
              <option value="text">文本消息</option>
              <option value="image">图片消息</option>
              <option value="video">视频消息</option>
              <option value="file">文件消息</option>
              <option value="system">系统消息</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">发送时间</label>
            <select id="timeFilter" class="w-full py-2 px-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <option value="all">全部时间</option>
              <option value="today">今天</option>
              <option value="7days">近7天</option>
              <option value="30days">近30天</option>
              <option value="90days">近90天</option>
            </select>
          </div>
        </div>
        <div class="mt-4 flex justify-end">
          <button id="resetFilterBtn" class="mr-2 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600">
            重置
          </button>
          <button id="searchBtn" class="bg-primary hover:bg-blue-600 text-white py-2 px-4 rounded-lg">
            搜索
          </button>
        </div>
      </div>

      <!-- 消息列表 -->
      <div class="card">
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th class="w-12">
                  <input type="checkbox" id="selectAll" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                </th>
                <th>消息ID</th>
                <th>发送者</th>
                <th>接收者</th>
                <th>消息类型</th>
                <th>消息内容</th>
                <th>发送时间</th>
                <th>状态</th>
                <th class="text-right">操作</th>
              </tr>
            </thead>
            <tbody id="messageTableBody">
              <tr>
                <td><input type="checkbox" class="message-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>MSG10001</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-2">
                    <span class="text-blue-500 font-medium">张</span>
                  </div>
                  张三
                </td>
                <td>
                  <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center mr-2">
                      <span class="text-purple-500 font-medium">李</span>
                    </div>
                    李四
                  </div>
                </td>
                <td><span class="bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-1 rounded-full dark:bg-blue-900 dark:text-blue-300">文本</span></td>
                <td>
                  <div class="message-preview">你好，我想询问一下关于下周会议的安排，我们需要准备什么材料吗？</div>
                </td>
                <td>2025-05-12 14:30</td>
                <td>
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                    已送达
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-message-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-message-id="MSG10001">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="delete-message-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-message-id="MSG10001">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" class="message-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>MSG10002</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center mr-2">
                    <span class="text-purple-500 font-medium">李</span>
                  </div>
                  李四
                </td>
                <td>
                  <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-2">
                      <span class="text-blue-500 font-medium">张</span>
                    </div>
                    张三
                  </div>
                </td>
                <td><span class="bg-green-100 text-green-800 text-xs font-semibold px-2 py-1 rounded-full dark:bg-green-900 dark:text-green-300">图片</span></td>
                <td>
                  <div class="message-preview">[图片消息] 会议室布置照片.jpg</div>
                </td>
                <td>2025-05-12 14:35</td>
                <td>
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                    已读
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-message-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-message-id="MSG10002">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="delete-message-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-message-id="MSG10002">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" class="message-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>MSG10003</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center mr-2">
                    <span class="text-orange-500 font-medium">王</span>
                  </div>
                  王五
                </td>
                <td>
                  <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-2">
                      <span class="text-blue-500 font-medium">群</span>
                    </div>
                    项目研发群
                  </div>
                </td>
                <td><span class="bg-red-100 text-red-800 text-xs font-semibold px-2 py-1 rounded-full dark:bg-red-900 dark:text-red-300">文件</span></td>
                <td>
                  <div class="message-preview">[文件消息] 项目进度报告.pdf</div>
                </td>
                <td>2025-05-11 09:15</td>
                <td>
                  <span class="status-badge bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300">
                    部分已读
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-message-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-message-id="MSG10003">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="delete-message-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-message-id="MSG10003">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" class="message-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>MSG10004</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center mr-2">
                    <span class="text-gray-500 font-medium">系</span>
                  </div>
                  系统通知
                </td>
                <td>
                  <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-red-100 flex items-center justify-center mr-2">
                      <span class="text-red-500 font-medium">赵</span>
                    </div>
                    赵六
                  </div>
                </td>
                <td><span class="bg-gray-100 text-gray-800 text-xs font-semibold px-2 py-1 rounded-full dark:bg-gray-700 dark:text-gray-300">系统</span></td>
                <td>
                  <div class="message-preview">您的账号已被管理员临时禁言，禁言时间：24小时，原因：违反社区规则。如有疑问，请联系客服。</div>
                </td>
                <td>2025-05-10 16:50</td>
                <td>
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                    已送达
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-message-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-message-id="MSG10004">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="delete-message-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-message-id="MSG10004">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" class="message-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>MSG10005</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center mr-2">
                    <span class="text-green-500 font-medium">陈</span>
                  </div>
                  陈七
                </td>
                <td>
                  <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center mr-2">
                      <span class="text-orange-500 font-medium">王</span>
                    </div>
                    王五
                  </div>
                </td>
                <td><span class="bg-purple-100 text-purple-800 text-xs font-semibold px-2 py-1 rounded-full dark:bg-purple-900 dark:text-purple-300">视频</span></td>
                <td>
                  <div class="message-preview">[视频消息] 产品演示视频.mp4</div>
                </td>
                <td>2025-05-09 11:30</td>
                <td>
                  <span class="status-badge bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300">
                    未读
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="view-message-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-message-id="MSG10005">
                      <span class="iconify" data-icon="mdi:eye"></span>
                    </button>
                    <button class="delete-message-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-message-id="MSG10005">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- 底部工具栏 -->
        <div class="mt-4 flex flex-col sm:flex-row justify-between items-center">
          <div class="flex items-center mb-4 sm:mb-0">
            <button id="batchDeleteBtn" class="bg-red-500 hover:bg-red-600 text-white py-1.5 px-3 rounded text-sm flex items-center">
              <span class="iconify mr-1" data-icon="mdi:delete"></span> 批量删除
            </button>
            <button id="batchExportBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 py-1.5 px-3 rounded text-sm flex items-center ml-2 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600">
              <span class="iconify mr-1" data-icon="mdi:export"></span> 导出消息
            </button>
            <div class="ml-4 text-sm text-gray-500 dark:text-gray-400">
              共 <span id="totalMessages">1,583,736</span> 条消息
            </div>
          </div>

          <!-- 分页 -->
          <div class="flex items-center">
            <button class="pagination-item text-gray-600 dark:text-gray-400">
              <span class="iconify" data-icon="mdi:chevron-left"></span>
            </button>
            <button class="pagination-item active">1</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">2</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">3</button>
            <span class="mx-1">...</span>
            <button class="pagination-item text-gray-600 dark:text-gray-400">50</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">
              <span class="iconify" data-icon="mdi:chevron-right"></span>
            </button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- 发送系统消息模态框 -->
  <div id="messageModal" class="modal">
    <div class="modal-content">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold" id="modalTitle">发送系统消息</h3>
          <button id="closeModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <form id="messageForm">
          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">接收对象 <span class="text-red-500">*</span></label>
            <select id="receiverType" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <option value="all">所有用户</option>
              <option value="group">选择群组</option>
              <option value="users">指定用户</option>
            </select>
          </div>

          <div id="userSelectContainer" class="mb-4 hidden">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">选择用户 <span class="text-red-500">*</span></label>
            <select multiple="" id="userSelect" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white" size="4">
              <option value="user1">张三 (ID: UID10001)</option>
              <option value="user2">李四 (ID: UID10002)</option>
              <option value="user3">王五 (ID: UID10003)</option>
              <option value="user4">赵六 (ID: UID10004)</option>
              <option value="user5">陈七 (ID: UID10005)</option>
            </select>
            <p class="text-xs text-gray-500 mt-1">按住 Ctrl 键(Mac: Command 键)可多选</p>
          </div>

          <div id="groupSelectContainer" class="mb-4 hidden">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">选择群组 <span class="text-red-500">*</span></label>
            <select multiple="" id="groupSelect" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white" size="4">
              <option value="group1">项目研发群 (成员: 24)</option>
              <option value="group2">市场部 (成员: 12)</option>
              <option value="group3">技术支持 (成员: 8)</option>
              <option value="group4">公司公告 (成员: 58)</option>
            </select>
            <p class="text-xs text-gray-500 mt-1">按住 Ctrl 键(Mac: Command 键)可多选</p>
          </div>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">消息标题 <span class="text-red-500">*</span></label>
            <input type="text" id="messageTitle" required="" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
          </div>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">消息内容 <span class="text-red-500">*</span></label>
            <textarea id="messageContent" rows="6" required="" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white"></textarea>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">消息重要性</label>
              <select id="messageImportance" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <option value="normal">普通</option>
                <option value="important">重要</option>
                <option value="urgent">紧急</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">发送时间</label>
              <select id="sendTime" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <option value="now">立即发送</option>
                <option value="schedule">定时发送</option>
              </select>
            </div>
          </div>

          <div id="scheduleTimeContainer" class="mb-4 hidden">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">计划发送时间 <span class="text-red-500">*</span></label>
            <input type="datetime-local" id="scheduleTime" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
          </div>

          <div class="flex justify-end space-x-3 mt-6">
            <button type="button" id="cancelBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
              取消
            </button>
            <button type="submit" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
              发送
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- 查看消息模态框 -->
  <div id="viewMessageModal" class="modal">
    <div class="modal-content">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold">查看消息</h3>
          <button id="closeViewModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <div class="mb-4 pb-4 border-b border-gray-200 dark:border-gray-700">
          <div class="flex justify-between mb-2">
            <span class="text-sm text-gray-500 dark:text-gray-400">消息ID：</span>
            <span id="viewMessageId" class="text-sm font-medium">MSG10001</span>
          </div>
          <div class="flex justify-between mb-2">
            <span class="text-sm text-gray-500 dark:text-gray-400">发送时间：</span>
            <span id="viewMessageTime" class="text-sm font-medium">2025-05-12 14:30</span>
          </div>
        </div>
        
        <div class="mb-4">
          <div class="flex items-center mb-4">
            <div id="senderAvatar" class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3">
              <span class="text-blue-500 font-medium">张</span>
            </div>
            <div>
              <div id="senderName" class="font-medium">张三</div>
              <div class="text-xs text-gray-500 dark:text-gray-400">发送者</div>
            </div>
          </div>

          <div class="flex items-center mb-4">
            <div id="receiverAvatar" class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center mr-3">
              <span class="text-purple-500 font-medium">李</span>
            </div>
            <div>
              <div id="receiverName" class="font-medium">李四</div>
              <div class="text-xs text-gray-500 dark:text-gray-400">接收者</div>
            </div>
          </div>
        </div>
        
        <div class="mb-4">
          <div class="text-sm text-gray-500 dark:text-gray-400 mb-1">消息类型</div>
          <div id="viewMessageType" class="inline-flex bg-blue-100 text-blue-800 text-xs font-semibold px-2 py-1 rounded-full dark:bg-blue-900 dark:text-blue-300">
            文本
          </div>
        </div>

        <div class="mb-6">
          <div class="text-sm text-gray-500 dark:text-gray-400 mb-1">消息内容</div>
          <div id="viewMessageContent" class="p-3 bg-gray-50 rounded-lg dark:bg-gray-800 break-words">
            你好，我想询问一下关于下周会议的安排，我们需要准备什么材料吗？
          </div>
        </div>

        <div class="mb-4 pt-4 border-t border-gray-200 dark:border-gray-700">
          <div class="flex justify-between items-center">
            <div class="text-sm">
              <span class="text-gray-500 dark:text-gray-400">状态：</span>
              <span id="viewMessageStatus" class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">已送达</span>
            </div>
            <div class="text-sm" id="viewMessageReadTime">
              <span class="text-gray-500 dark:text-gray-400">已读时间：</span>
              <span>2025-05-12 14:32</span>
            </div>
          </div>
        </div>

        <div class="flex justify-end">
          <button type="button" id="closeViewModalBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            关闭
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 删除确认模态框 -->
  <div id="deleteModal" class="modal">
    <div class="modal-content" style="max-width: 400px;">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold">确认删除</h3>
          <button class="close-delete-modal text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <div class="mb-6">
          <p class="text-gray-700 dark:text-gray-300">您确定要删除选中的消息吗？此操作不可撤销。</p>
          <p id="deleteMessageList" class="mt-2 text-sm text-gray-500 dark:text-gray-400">将删除：<span id="deleteCount"></span> 条消息</p>
        </div>

        <div class="flex justify-end space-x-3">
          <button type="button" class="close-delete-modal px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            取消
          </button>
          <button type="button" id="confirmDeleteBtn" class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg">
            确认删除
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 主题切换
      const themeToggle = document.querySelector('.theme-toggle');
      themeToggle.addEventListener('click', function() {
        const html = document.querySelector('html');
        if (html.classList.contains('dark')) {
          html.classList.remove('dark');
          localStorage.setItem('theme', 'light');
        } else {
          html.classList.add('dark');
          localStorage.setItem('theme', 'dark');
        }
      });
      
      // 检查本地存储的主题设置
      if (localStorage.getItem('theme') === 'dark') {
        document.querySelector('html').classList.add('dark');
      }
      
      // 发送消息模态框
      const messageModal = document.getElementById('messageModal');
      const addMessageBtn = document.getElementById('addMessageBtn');
      const closeModal = document.getElementById('closeModal');
      const cancelBtn = document.getElementById('cancelBtn');
      const messageForm = document.getElementById('messageForm');
      
      // 接收对象选择逻辑
      const receiverType = document.getElementById('receiverType');
      const userSelectContainer = document.getElementById('userSelectContainer');
      const groupSelectContainer = document.getElementById('groupSelectContainer');
      
      receiverType.addEventListener('change', function() {
        if (this.value === 'users') {
          userSelectContainer.classList.remove('hidden');
          groupSelectContainer.classList.add('hidden');
        } else if (this.value === 'group') {
          groupSelectContainer.classList.remove('hidden');
          userSelectContainer.classList.add('hidden');
        } else {
          userSelectContainer.classList.add('hidden');
          groupSelectContainer.classList.add('hidden');
        }
      });
      
      // 发送时间选择逻辑
      const sendTime = document.getElementById('sendTime');
      const scheduleTimeContainer = document.getElementById('scheduleTimeContainer');
      
      sendTime.addEventListener('change', function() {
        if (this.value === 'schedule') {
          scheduleTimeContainer.classList.remove('hidden');
        } else {
          scheduleTimeContainer.classList.add('hidden');
        }
      });
      
      // 打开发送消息模态框
      addMessageBtn.addEventListener('click', function() {
        messageForm.reset();
        userSelectContainer.classList.add('hidden');
        groupSelectContainer.classList.add('hidden');
        scheduleTimeContainer.classList.add('hidden');
        messageModal.classList.add('active');
      });
      
      // 关闭模态框
      closeModal.addEventListener('click', function() {
        messageModal.classList.remove('active');
      });
      
      cancelBtn.addEventListener('click', function() {
        messageModal.classList.remove('active');
      });
      
      // 表单提交
      messageForm.addEventListener('submit', function(e) {
        e.preventDefault();
        // 这里可以添加表单验证和提交逻辑
        console.log('消息表单提交');
        
        // 模拟成功提交后关闭模态框
        messageModal.classList.remove('active');
      });
      
      // 查看消息模态框
      const viewMessageModal = document.getElementById('viewMessageModal');
      const closeViewModal = document.getElementById('closeViewModal');
      const closeViewModalBtn = document.getElementById('closeViewModalBtn');
      const viewButtons = document.querySelectorAll('.view-message-btn');
      
      viewButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          const messageId = this.getAttribute('data-message-id');
          console.log('查看消息:', messageId);
          
          // 这里可以根据消息ID加载实际消息数据
          // 为了演示，现在只是显示模态框
          viewMessageModal.classList.add('active');
        });
      });
      
      closeViewModal.addEventListener('click', function() {
        viewMessageModal.classList.remove('active');
      });
      
      closeViewModalBtn.addEventListener('click', function() {
        viewMessageModal.classList.remove('active');
      });
      
      // 删除消息
      const deleteModal = document.getElementById('deleteModal');
      const closeDeleteModal = document.querySelectorAll('.close-delete-modal');
      const deleteButtons = document.querySelectorAll('.delete-message-btn');
      const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
      const deleteCount = document.getElementById('deleteCount');
      
      deleteButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          const messageId = this.getAttribute('data-message-id');
          console.log('删除消息:', messageId);
          
          deleteCount.textContent = "1";
          deleteModal.classList.add('active');
        });
      });
      
      closeDeleteModal.forEach(btn => {
        btn.addEventListener('click', function() {
          deleteModal.classList.remove('active');
        });
      });
      
      confirmDeleteBtn.addEventListener('click', function() {
        // 这里添加删除逻辑
        console.log('确认删除消息');
        
        // 模拟删除成功后关闭模态框
        deleteModal.classList.remove('active');
      });
      
      // 批量删除
      const batchDeleteBtn = document.getElementById('batchDeleteBtn');
      const selectAll = document.getElementById('selectAll');
      const messageCheckboxes = document.querySelectorAll('.message-select');
      
      batchDeleteBtn.addEventListener('click', function() {
        const selectedMessages = document.querySelectorAll('.message-select:checked');
        if (selectedMessages.length === 0) {
          alert('请至少选择一条消息');
          return;
        }
        
        deleteCount.textContent = selectedMessages.length;
        deleteModal.classList.add('active');
      });
      
      // 全选功能
      selectAll.addEventListener('change', function() {
        messageCheckboxes.forEach(checkbox => {
          checkbox.checked = this.checked;
        });
      });
      
      // 搜索和筛选功能
      const searchBtn = document.getElementById('searchBtn');
      const resetFilterBtn = document.getElementById('resetFilterBtn');
      
      searchBtn.addEventListener('click', function() {
        const keyword = document.getElementById('messageSearchInput').value;
        const type = document.getElementById('typeFilter').value;
        const time = document.getElementById('timeFilter').value;
        
        console.log('搜索条件:', { keyword, type, time });
        // 这里添加搜索逻辑
      });
      
      resetFilterBtn.addEventListener('click', function() {
        document.getElementById('messageSearchInput').value = '';
        document.getElementById('typeFilter').value = 'all';
        document.getElementById('timeFilter').value = 'all';
      });

      // 导出功能
      const batchExportBtn = document.getElementById('batchExportBtn');
      
      batchExportBtn.addEventListener('click', function() {
        const selectedMessages = document.querySelectorAll('.message-select:checked');
        if (selectedMessages.length === 0) {
          alert('请至少选择一条消息进行导出');
          return;
        }
        
        console.log('导出消息:', selectedMessages.length, '条');
        // 这里添加导出逻辑
        alert('正在导出' + selectedMessages.length + '条消息，请稍等...');
      });
    });
  </script>




  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>用户管理 - 通讯软件后台管理系统</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        fontFamily: {
          sans: ['Inter', 'sans-serif'],
        },
        extend: {
          colors: {
            primary: '#3b82f6',
            success: '#10b981',
            warning: '#f59e0b',
            error: '#ef4444',
            background: {
              light: '#f8fafc',
              dark: '#1f2937'
            }
          }
        }
      },
      darkMode: 'class',
    }
  </script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
      height: 100%;
      margin: 0;
      padding: 0;
      color: #1f2937;
    }
    .dark body {
      background-color: #111827;
      color: #f3f4f6;
    }
    .dashboard-container {
      max-width: 1440px;
      min-height: 100vh;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 240px 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas: 
        "sidebar topbar"
        "sidebar main";
    }
    .sidebar {
      grid-area: sidebar;
      border-right: 1px solid #e5e7eb;
      background: #f8fafc;
      padding: 24px 0;
    }
    .dark .sidebar {
      background: #1f2937;
      border-right: 1px solid #374151;
    }
    .topbar {
      grid-area: topbar;
      background: #ffffff;
      border-bottom: 1px solid #e5e7eb;
      padding: 16px 32px;
    }
    .dark .topbar {
      background: #1f2937;
      border-bottom: 1px solid #374151;
    }
    .main-content {
      grid-area: main;
      background: #f9fafb;
      padding: 24px;
      overflow-y: auto;
    }
    .dark .main-content {
      background: #111827;
    }
    .card {
      background: #ffffff;
      border-radius: 8px;
      padding: 20px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }
    .dark .card {
      background: #1f2937;
      border: 1px solid #374151;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
    }
    .nav-item {
      padding: 12px 24px;
      font-size: 14px;
      color: #4b5563;
      border-left: 3px solid transparent;
      transition: all 0.2s;
    }
    .dark .nav-item {
      color: #d1d5db;
    }
    .nav-item:hover, .nav-item.active {
      background: #f1f5f9;
      border-left: 3px solid #3b82f6;
      color: #3b82f6;
    }
    .dark .nav-item:hover, .dark .nav-item.active {
      background: #1a2435;
    }
    .notification-dot {
      top: -2px;
      right: -2px;
      width: 8px;
      height: 8px;
      background-color: #ef4444;
    }
    .table-responsive {
      overflow-x: auto;
    }
    .table {
      min-width: 100%;
      border-collapse: separate;
      border-spacing: 0;
    }
    .table th {
      text-align: left;
      padding: 12px 16px;
      font-weight: 500;
      border-bottom: 1px solid #e5e7eb;
      color: #6b7280;
    }
    .dark .table th {
      color: #9ca3af;
      border-bottom: 1px solid #374151;
    }
    .table td {
      padding: 12px 16px;
      border-bottom: 1px solid #e5e7eb;
      vertical-align: middle;
    }
    .dark .table td {
      border-bottom: 1px solid #374151;
    }
    .table tr:hover {
      background-color: #f9fafb;
    }
    .dark .table tr:hover {
      background-color: #1e293b;
    }
    .status-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 2px 8px;
      border-radius: 9999px;
      font-size: 12px;
    }
    .pagination-item {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      border-radius: 4px;
      margin: 0 2px;
      cursor: pointer;
    }
    .pagination-item.active {
      background-color: #3b82f6;
      color: white;
    }
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
    }
    .modal.active {
      opacity: 1;
      pointer-events: auto;
    }
    .modal-content {
      background: white;
      border-radius: 8px;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      transform: translateY(20px);
      transition: transform 0.3s;
    }
    .dark .modal-content {
      background: #1f2937;
    }
    .modal.active .modal-content {
      transform: translateY(0);
    }
    @media (max-width: 1024px) {
      .dashboard-container {
        grid-template-columns: 200px 1fr;
      }
    }
    @media (max-width: 768px) {
      .dashboard-container {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "topbar"
          "main";
      }
      .sidebar {
        display: none;
      }
    }
  </style>


  <div class="dashboard-container">
    <!-- 左侧导航 -->
    <div class="sidebar">
      <div class="flex items-center px-6 mb-8">
        <span class="iconify text-2xl text-primary" data-icon="mdi:application"></span>
        <h1 class="text-xl font-bold ml-3 dark:text-white">通讯管理系统</h1>
      </div>
      <nav class="space-y-1">
        <a href="index.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:home"></span> 仪表盘
        </a>
        <a href="user-management.html" class="nav-item flex items-center active">
          <span class="iconify mr-3" data-icon="mdi:account-group"></span> 用户管理
        </a>
        <a href="message-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-processing"></span> 消息管理
        </a>
        <a href="group-chat-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-text"></span> 群聊管理
        </a>
        <a href="#" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:file-document"></span> 文件管理
        </a>
        <a href="data-analysis.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:chart-line"></span> 数据分析
        </a>
        <a href="system-settings.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:cog"></span> 系统设置
        </a>
        <a href="data-backup.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:content-save"></span> 数据备份
        </a>
        <a href="profile.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-circle"></span> 个人中心
        </a>
      </nav>
    </div>

    <!-- 顶部栏 -->
    <div class="topbar flex items-center justify-between">
      <div class="relative w-1/3">
        <input type="text" placeholder="搜索系统功能..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
        <span class="iconify absolute left-3 top-2.5 text-gray-400" data-icon="mdi:magnify"></span>
      </div>
      
      <div class="flex items-center space-x-6">
        <button class="theme-toggle">
          <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:theme-light-dark"></span>
        </button>
        
        <div class="relative">
          <button class="notification-btn">
            <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:bell-outline"></span>
            <span class="notification-dot absolute rounded-full"></span>
          </button>
        </div>
        
        <div class="flex items-center">
          <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center">
            <span class="iconify text-white" data-icon="mdi:account"></span>
          </div>
          <span class="ml-2 font-medium dark:text-white">管理员</span>
        </div>
      </div>
    </div>

    <!-- 主内容区 -->
    <main class="main-content">
      <div class="mb-6 flex justify-between items-center">
        <div>
          <h1 class="text-2xl font-bold dark:text-white">用户管理</h1>
          <p class="text-gray-500 text-sm mt-1 dark:text-gray-400">管理所有系统用户信息</p>
        </div>
        <button id="addUserBtn" class="bg-primary hover:bg-blue-600 text-white py-2 px-4 rounded-lg flex items-center">
          <span class="iconify mr-2" data-icon="mdi:plus"></span>
          添加用户
        </button>
      </div>

      <!-- 过滤和搜索区域 -->
      <div class="card mb-6">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div class="md:col-span-2">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">关键字搜索</label>
            <div class="relative">
              <input type="text" id="userSearchInput" placeholder="搜索用户名/手机号..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <span class="iconify absolute left-3 top-2.5 text-gray-400" data-icon="mdi:magnify"></span>
            </div>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">用户状态</label>
            <select id="statusFilter" class="w-full py-2 px-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <option value="all">全部状态</option>
              <option value="active">活跃</option>
              <option value="inactive">非活跃</option>
              <option value="suspended">已封禁</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">注册时间</label>
            <select id="timeFilter" class="w-full py-2 px-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <option value="all">全部时间</option>
              <option value="today">今天</option>
              <option value="7days">近7天</option>
              <option value="30days">近30天</option>
              <option value="90days">近90天</option>
            </select>
          </div>
        </div>
        <div class="mt-4 flex justify-end">
          <button id="resetFilterBtn" class="mr-2 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 px-4 rounded-lg dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600">
            重置
          </button>
          <button id="searchBtn" class="bg-primary hover:bg-blue-600 text-white py-2 px-4 rounded-lg">
            搜索
          </button>
        </div>
      </div>

      <!-- 用户列表 -->
      <div class="card">
        <div class="table-responsive">
          <table class="table">
            <thead>
              <tr>
                <th class="w-12">
                  <input type="checkbox" id="selectAll" class="rounded text-primary focus:ring-primary dark:bg-gray-700">
                </th>
                <th>用户ID</th>
                <th>用户名</th>
                <th>手机号</th>
                <th>邮箱</th>
                <th>注册时间</th>
                <th>状态</th>
                <th class="text-right">操作</th>
              </tr>
            </thead>
            <tbody id="userTableBody">
              <tr>
                <td><input type="checkbox" class="user-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>UID10001</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center mr-2">
                    <span class="text-blue-500 font-medium">张</span>
                  </div>
                  张三
                </td>
                <td>138****1234</td>
                <td>zhang@example.com</td>
                <td>2024-04-25 15:30</td>
                <td>
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                    活跃
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="edit-user-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-user-id="UID10001">
                      <span class="iconify" data-icon="mdi:pencil"></span>
                    </button>
                    <button class="delete-user-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-user-id="UID10001">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" class="user-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>UID10002</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center mr-2">
                    <span class="text-purple-500 font-medium">李</span>
                  </div>
                  李四
                </td>
                <td>139****5678</td>
                <td>li@example.com</td>
                <td>2024-04-22 09:15</td>
                <td>
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                    活跃
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="edit-user-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-user-id="UID10002">
                      <span class="iconify" data-icon="mdi:pencil"></span>
                    </button>
                    <button class="delete-user-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-user-id="UID10002">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" class="user-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>UID10003</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-orange-100 flex items-center justify-center mr-2">
                    <span class="text-orange-500 font-medium">王</span>
                  </div>
                  王五
                </td>
                <td>136****2468</td>
                <td>wang@example.com</td>
                <td>2024-04-15 14:20</td>
                <td>
                  <span class="status-badge bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300">
                    非活跃
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="edit-user-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-user-id="UID10003">
                      <span class="iconify" data-icon="mdi:pencil"></span>
                    </button>
                    <button class="delete-user-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-user-id="UID10003">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" class="user-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>UID10004</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-red-100 flex items-center justify-center mr-2">
                    <span class="text-red-500 font-medium">赵</span>
                  </div>
                  赵六
                </td>
                <td>135****3691</td>
                <td>zhao@example.com</td>
                <td>2024-03-28 11:45</td>
                <td>
                  <span class="status-badge bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">
                    已封禁
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="edit-user-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-user-id="UID10004">
                      <span class="iconify" data-icon="mdi:pencil"></span>
                    </button>
                    <button class="delete-user-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-user-id="UID10004">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
              <tr>
                <td><input type="checkbox" class="user-select rounded text-primary focus:ring-primary dark:bg-gray-700"></td>
                <td>UID10005</td>
                <td class="flex items-center">
                  <div class="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center mr-2">
                    <span class="text-green-500 font-medium">陈</span>
                  </div>
                  陈七
                </td>
                <td>137****7890</td>
                <td>chen@example.com</td>
                <td>2024-03-20 16:50</td>
                <td>
                  <span class="status-badge bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                    活跃
                  </span>
                </td>
                <td>
                  <div class="flex justify-end space-x-2">
                    <button class="edit-user-btn text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300" data-user-id="UID10005">
                      <span class="iconify" data-icon="mdi:pencil"></span>
                    </button>
                    <button class="delete-user-btn text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300" data-user-id="UID10005">
                      <span class="iconify" data-icon="mdi:delete"></span>
                    </button>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- 底部工具栏 -->
        <div class="mt-4 flex flex-col sm:flex-row justify-between items-center">
          <div class="flex items-center mb-4 sm:mb-0">
            <button id="batchDeleteBtn" class="bg-red-500 hover:bg-red-600 text-white py-1.5 px-3 rounded text-sm flex items-center">
              <span class="iconify mr-1" data-icon="mdi:delete"></span> 批量删除
            </button>
            <button id="batchStatusBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 py-1.5 px-3 rounded text-sm flex items-center ml-2 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600">
              <span class="iconify mr-1" data-icon="mdi:account-convert"></span> 修改状态
            </button>
            <div class="ml-4 text-sm text-gray-500 dark:text-gray-400">
              共 <span id="totalUsers">32,458</span> 条数据
            </div>
          </div>

          <!-- 分页 -->
          <div class="flex items-center">
            <button class="pagination-item text-gray-600 dark:text-gray-400">
              <span class="iconify" data-icon="mdi:chevron-left"></span>
            </button>
            <button class="pagination-item active">1</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">2</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">3</button>
            <span class="mx-1">...</span>
            <button class="pagination-item text-gray-600 dark:text-gray-400">50</button>
            <button class="pagination-item text-gray-600 dark:text-gray-400">
              <span class="iconify" data-icon="mdi:chevron-right"></span>
            </button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- 添加/编辑用户模态框 -->
  <div id="userModal" class="modal">
    <div class="modal-content">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold" id="modalTitle">添加用户</h3>
          <button id="closeModal" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <form id="userForm">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">用户名 <span class="text-red-500">*</span></label>
              <input type="text" id="username" name="username" required="" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">昵称</label>
              <input type="text" id="nickname" name="nickname" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">手机号 <span class="text-red-500">*</span></label>
              <input type="tel" id="phone" name="phone" required="" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">邮箱</label>
              <input type="email" id="email" name="email" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">密码 <span id="passwordRequired" class="text-red-500">*</span></label>
              <div class="relative">
                <input type="password" id="password" name="password" required="" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <button type="button" id="togglePassword" class="absolute right-2 top-2.5 text-gray-400">
                  <span class="iconify" data-icon="mdi:eye"></span>
                </button>
              </div>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">用户状态</label>
              <select id="userStatus" name="userStatus" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
                <option value="active">活跃</option>
                <option value="inactive">非活跃</option>
                <option value="suspended">已封禁</option>
              </select>
            </div>
          </div>

          <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">备注</label>
            <textarea id="remarks" name="remarks" rows="3" class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white"></textarea>
          </div>

          <div class="flex justify-end space-x-3 mt-6">
            <button type="button" id="cancelBtn" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
              取消
            </button>
            <button type="submit" class="px-4 py-2 bg-primary hover:bg-blue-600 text-white rounded-lg">
              确认
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- 删除确认模态框 -->
  <div id="deleteModal" class="modal">
    <div class="modal-content" style="max-width: 400px;">
      <div class="p-6">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-lg font-semibold">确认删除</h3>
          <button class="close-delete-modal text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
            <span class="iconify text-xl" data-icon="mdi:close"></span>
          </button>
        </div>

        <div class="mb-6">
          <p class="text-gray-700 dark:text-gray-300">您确定要删除选中的用户吗？此操作不可撤销。</p>
          <p id="deleteUserList" class="mt-2 text-sm text-gray-500 dark:text-gray-400">将删除：<span id="deleteCount"></span> 个用户</p>
        </div>

        <div class="flex justify-end space-x-3">
          <button type="button" class="close-delete-modal px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-700">
            取消
          </button>
          <button type="button" id="confirmDeleteBtn" class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg">
            确认删除
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // 主题切换
      const themeToggle = document.querySelector('.theme-toggle');
      themeToggle.addEventListener('click', function() {
        const html = document.querySelector('html');
        if (html.classList.contains('dark')) {
          html.classList.remove('dark');
          localStorage.setItem('theme', 'light');
        } else {
          html.classList.add('dark');
          localStorage.setItem('theme', 'dark');
        }
      });
      
      // 检查本地存储的主题设置
      if (localStorage.getItem('theme') === 'dark') {
        document.querySelector('html').classList.add('dark');
      }
      
      // 模态框功能
      const userModal = document.getElementById('userModal');
      const addUserBtn = document.getElementById('addUserBtn');
      const closeModal = document.getElementById('closeModal');
      const cancelBtn = document.getElementById('cancelBtn');
      const modalTitle = document.getElementById('modalTitle');
      const userForm = document.getElementById('userForm');
      const passwordField = document.getElementById('password');
      const passwordRequired = document.getElementById('passwordRequired');
      
      // 打开添加用户模态框
      addUserBtn.addEventListener('click', function() {
        modalTitle.textContent = '添加用户';
        userForm.reset();
        passwordField.required = true;
        passwordRequired.style.display = 'inline';
        userModal.classList.add('active');
      });
      
      // 关闭模态框
      closeModal.addEventListener('click', function() {
        userModal.classList.remove('active');
      });
      
      cancelBtn.addEventListener('click', function() {
        userModal.classList.remove('active');
      });
      
      // 表单提交
      userForm.addEventListener('submit', function(e) {
        e.preventDefault();
        // 这里可以添加表单验证和提交逻辑
        console.log('表单提交');
        
        // 模拟成功提交后关闭模态框
        userModal.classList.remove('active');
      });
      
      // 编辑用户
      const editButtons = document.querySelectorAll('.edit-user-btn');
      editButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          const userId = this.getAttribute('data-user-id');
          console.log('编辑用户:', userId);
          
          // 在实际应用中，这里会从服务器获取用户数据
          // 这里只是模拟
          modalTitle.textContent = '编辑用户';
          passwordField.required = false;
          passwordRequired.style.display = 'none';
          
          // 假设已经填充表单数据
          userModal.classList.add('active');
        });
      });
      
      // 删除用户
      const deleteModal = document.getElementById('deleteModal');
      const closeDeleteModal = document.querySelectorAll('.close-delete-modal');
      const deleteButtons = document.querySelectorAll('.delete-user-btn');
      const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
      const deleteCount = document.getElementById('deleteCount');
      
      deleteButtons.forEach(btn => {
        btn.addEventListener('click', function() {
          const userId = this.getAttribute('data-user-id');
          console.log('删除用户:', userId);
          
          deleteCount.textContent = "1";
          deleteModal.classList.add('active');
        });
      });
      
      closeDeleteModal.forEach(btn => {
        btn.addEventListener('click', function() {
          deleteModal.classList.remove('active');
        });
      });
      
      confirmDeleteBtn.addEventListener('click', function() {
        // 这里添加删除逻辑
        console.log('确认删除');
        
        // 模拟删除成功后关闭模态框
        deleteModal.classList.remove('active');
      });
      
      // 批量删除
      const batchDeleteBtn = document.getElementById('batchDeleteBtn');
      const selectAll = document.getElementById('selectAll');
      const userCheckboxes = document.querySelectorAll('.user-select');
      
      batchDeleteBtn.addEventListener('click', function() {
        const selectedUsers = document.querySelectorAll('.user-select:checked');
        if (selectedUsers.length === 0) {
          alert('请至少选择一个用户');
          return;
        }
        
        deleteCount.textContent = selectedUsers.length;
        deleteModal.classList.add('active');
      });
      
      // 全选功能
      selectAll.addEventListener('change', function() {
        userCheckboxes.forEach(checkbox => {
          checkbox.checked = this.checked;
        });
      });
      
      // 密码显示切换
      const togglePassword = document.getElementById('togglePassword');
      togglePassword.addEventListener('click', function() {
        const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordField.setAttribute('type', type);
        
        // 切换图标
        const icon = type === 'password' ? 'mdi:eye' : 'mdi:eye-off';
        togglePassword.querySelector('.iconify').setAttribute('data-icon', icon);
      });
      
      // 搜索和筛选功能
      const searchBtn = document.getElementById('searchBtn');
      const resetFilterBtn = document.getElementById('resetFilterBtn');
      
      searchBtn.addEventListener('click', function() {
        const keyword = document.getElementById('userSearchInput').value;
        const status = document.getElementById('statusFilter').value;
        const time = document.getElementById('timeFilter').value;
        
        console.log('搜索条件:', { keyword, status, time });
        // 这里添加搜索逻辑
      });
      
      resetFilterBtn.addEventListener('click', function() {
        document.getElementById('userSearchInput').value = '';
        document.getElementById('statusFilter').value = 'all';
        document.getElementById('timeFilter').value = 'all';
      });
    });
  </script>




  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>通讯软件后台管理系统</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.iconify.design/3/3.1.1/iconify.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        fontFamily: {
          sans: ['Inter', 'sans-serif'],
        },
        extend: {
          colors: {
            primary: '#3b82f6',
            success: '#10b981',
            warning: '#f59e0b',
            error: '#ef4444',
            background: {
              light: '#f8fafc',
              dark: '#1f2937'
            }
          }
        }
      },
      darkMode: 'class',
    }
  </script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f9fafb;
      height: 100%;
      margin: 0;
      padding: 0;
      color: #1f2937;
    }
    .dark body {
      background-color: #111827;
      color: #f3f4f6;
    }
    .dashboard-container {
      max-width: 1440px;
      min-height: 100vh;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 240px 1fr;
      grid-template-rows: auto 1fr;
      grid-template-areas: 
        "sidebar topbar"
        "sidebar main";
    }
    .sidebar {
      grid-area: sidebar;
      border-right: 1px solid #e5e7eb;
      background: #f8fafc;
      padding: 24px 0;
    }
    .dark .sidebar {
      background: #1f2937;
      border-right: 1px solid #374151;
    }
    .topbar {
      grid-area: topbar;
      background: #ffffff;
      border-bottom: 1px solid #e5e7eb;
      padding: 16px 32px;
    }
    .dark .topbar {
      background: #1f2937;
      border-bottom: 1px solid #374151;
    }
    .main-content {
      grid-area: main;
      background: #f9fafb;
      padding: 24px;
      overflow-y: auto;
    }
    .dark .main-content {
      background: #111827;
    }
    .card {
      background: #ffffff;
      border-radius: 8px;
      padding: 20px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;
    }
    .dark .card {
      background: #1f2937;
      border: 1px solid #374151;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
    }
    .card:hover {
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
    }
    .dark .card:hover {
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    }
    .chart-container {
      width: 100%;
      height: 300px;
    }
    .nav-item {
      padding: 12px 24px;
      font-size: 14px;
      color: #4b5563;
      border-left: 3px solid transparent;
      transition: all 0.2s;
    }
    .dark .nav-item {
      color: #d1d5db;
    }
    .nav-item:hover, .nav-item.active {
      background: #f1f5f9;
      border-left: 3px solid #3b82f6;
      color: #3b82f6;
    }
    .dark .nav-item:hover, .dark .nav-item.active {
      background: #1a2435;
    }
    .stat-card {
      padding: 16px;
      border-radius: 8px;
      background: #f3f4f6;
    }
    .dark .stat-card {
      background: #1e293b;
    }
    .notification-dot {
      top: -2px;
      right: -2px;
      width: 8px;
      height: 8px;
      background-color: #ef4444;
    }
    @media (max-width: 1024px) {
      .dashboard-container {
        grid-template-columns: 200px 1fr;
      }
    }
    @media (max-width: 768px) {
      .dashboard-container {
        grid-template-columns: 1fr;
        grid-template-areas: 
          "topbar"
          "main";
      }
      .sidebar {
        display: none;
      }
    }
  </style>


  <div class="dashboard-container">
    <!-- 左侧导航 -->
    <div class="sidebar">
      <div class="flex items-center px-6 mb-8">
        <span class="iconify text-2xl text-primary" data-icon="mdi:application"></span>
        <h1 class="text-xl font-bold ml-3 dark:text-white">通讯管理系统</h1>
      </div>
      <nav class="space-y-1">
        <a href="#" class="nav-item flex items-center active">
          <span class="iconify mr-3" data-icon="mdi:home"></span> 仪表盘
        </a>
        <a href="user-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-group"></span> 用户管理
        </a>
        <a href="message-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-processing"></span> 消息管理
        </a>
        <a href="group-chat-management.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:message-text"></span> 群聊管理
        </a>
        <a href="#" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:file-document"></span> 文件管理
        </a>
        <a href="data-analysis.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:chart-line"></span> 数据分析
        </a>
        <a href="system-settings.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:cog"></span> 系统设置
        </a>
        <a href="data-backup.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:content-save"></span> 数据备份
        </a>
        <a href="profile.html" class="nav-item flex items-center">
          <span class="iconify mr-3" data-icon="mdi:account-circle"></span> 个人中心
        </a>
      </nav>
    </div>

    <!-- 顶部栏 -->
    <div class="topbar flex items-center justify-between">
      <div class="relative w-1/3">
        <input type="text" placeholder="搜索系统功能..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-600 dark:text-white">
        <span class="iconify absolute left-3 top-2.5 text-gray-400" data-icon="mdi:magnify"></span>
      </div>
      
      <div class="flex items-center space-x-6">
        <button class="theme-toggle">
          <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:theme-light-dark"></span>
        </button>
        
        <div class="relative">
          <button class="notification-btn">
            <span class="iconify text-xl text-gray-700 dark:text-gray-300" data-icon="mdi:bell-outline"></span>
            <span class="notification-dot absolute rounded-full"></span>
          </button>
        </div>
        
        <div class="flex items-center">
          <div class="w-8 h-8 rounded-full bg-primary flex items-center justify-center">
            <span class="iconify text-white" data-icon="mdi:account"></span>
          </div>
          <span class="ml-2 font-medium dark:text-white">管理员</span>
        </div>
      </div>
    </div>

    <!-- 主内容区 -->
    <main class="main-content">
      <div class="mb-6">
        <h1 class="text-2xl font-bold dark:text-white">通讯平台总览</h1>
        <p class="text-gray-500 text-sm mt-1 dark:text-gray-400">通讯系统运行状态和关键指标展示</p>
      </div>

      <!-- 统计数据卡片 -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
        <div class="card flex items-center">
          <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center">
            <span class="iconify text-blue-500 text-xl" data-icon="mdi:account-group"></span>
          </div>
          <div class="ml-4">
            <div class="text-gray-500 text-sm dark:text-gray-400">总用户数</div>
            <div class="text-2xl font-bold dark:text-white">32,458</div>
          </div>
        </div>
        
        
        
        <div class="card flex items-center">
          <div class="w-12 h-12 rounded-full bg-orange-100 flex items-center justify-center">
            <span class="iconify text-orange-500 text-xl" data-icon="mdi:message-text-outline"></span>
          </div>
          <div class="ml-4">
            <div class="text-gray-500 text-sm dark:text-gray-400">消息数量</div>
            <div class="text-2xl font-bold dark:text-white">1,583,736</div>
          </div>
        </div>
        
        <div class="card flex items-center">
          <div class="w-12 h-12 rounded-full bg-purple-100 flex items-center justify-center">
            <span class="iconify text-purple-500 text-xl" data-icon="mdi:account-group"></span>
          </div>
          <div class="ml-4">
            <div class="text-gray-500 text-sm dark:text-gray-400">活跃群聊</div>
            <div class="text-2xl font-bold dark:text-white">4,372</div>
          </div>
        </div>
      </div>

      <!-- 图表区域 -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
        <div class="card">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-semibold dark:text-white">用户注册趋势</h2>
            <select class="text-sm border border-gray-300 rounded px-3 py-1 dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <option>近7天</option>
              <option selected="">近30天</option>
              <option>近90天</option>
            </select>
          </div>
          <div class="chart-container" id="user-growth-chart"></div>
        </div>
        
        <div class="card">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-semibold dark:text-white">消息量分析</h2>
            <select class="text-sm border border-gray-300 rounded px-3 py-1 dark:bg-gray-800 dark:border-gray-600 dark:text-white">
              <option>按日</option>
              <option selected="">按周</option>
              <option>按月</option>
            </select>
          </div>
          <div class="chart-container" id="sales-chart"></div>
        </div>
      </div>

      <!-- 底部区域 -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <div class="card">
          <h2 class="text-lg font-semibold mb-4 dark:text-white">系统状态</h2>
          <div class="space-y-4">
            <div class="flex justify-between items-center">
              <div class="flex items-center">
                <span class="iconify text-green-500 mr-2" data-icon="mdi:server"></span>
                <span>服务器负载</span>
              </div>
              <span class="text-success font-medium">正常</span>
            </div>
            <div class="flex justify-between items-center">
              <div class="flex items-center">
                <span class="iconify text-green-500 mr-2" data-icon="mdi:database"></span>
                <span>数据库连接</span>
              </div>
              <span class="text-success font-medium">正常</span>
            </div>
            <div class="flex justify-between items-center">
              <div class="flex items-center">
                <span class="iconify text-yellow-500 mr-2" data-icon="mdi:email"></span>
                <span>邮件服务</span>
              </div>
              <span class="text-warning font-medium">部分延迟</span>
            </div>
            <div class="flex justify-between items-center">
              <div class="flex items-center">
                <span class="iconify text-green-500 mr-2" data-icon="mdi:backup-restore"></span>
                <span>备份状态</span>
              </div>
              <span class="text-success font-medium">已完成</span>
            </div>
          </div>
        </div>
        
        <div class="card">
          <h2 class="text-lg font-semibold mb-4 dark:text-white">最近活动</h2>
          <div class="space-y-4">
            <div class="flex">
              <div class="w-1.5 h-1.5 bg-primary rounded-full mt-2 mr-3"></div>
              <div>
                <div class="text-sm">新用户注册</div>
                <div class="text-xs text-gray-500 dark:text-gray-400">用户 "张明" 注册了账户</div>
                <div class="text-xs text-gray-400 mt-1">2小时前</div>
              </div>
            </div>
            <div class="flex">
              <div class="w-1.5 h-1.5 bg-success rounded-full mt-2 mr-3"></div>
              <div>
                <div class="text-sm">订单创建</div>
                <div class="text-xs text-gray-500 dark:text-gray-400">订单 #32589 已完成支付</div>
                <div class="text-xs text-gray-400 mt-1">5小时前</div>
              </div>
            </div>
            <div class="flex">
              <div class="w-1.5 h-1.5 bg-purple-500 rounded-full mt-2 mr-3"></div>
              <div>
                <div class="text-sm">系统更新</div>
                <div class="text-xs text-gray-500 dark:text-gray-400">应用安全补丁更新至 v2.3.4</div>
                <div class="text-xs text-gray-400 mt-1">昨天</div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="card">
          <h2 class="text-lg font-semibold mb-4 dark:text-white">通知公告</h2>
          <div class="space-y-4">
            <div class="border-l-2 border-primary pl-3 py-1">
              <div class="font-medium">系统维护通知</div>
              <div class="text-sm text-gray-500 dark:text-gray-400">本周六凌晨2-5点进行系统维护</div>
            </div>
            <div class="border-l-2 border-warning pl-3 py-1">
              <div class="font-medium">新功能上线</div>
              <div class="text-sm text-gray-500 dark:text-gray-400">视频通话功能已上线</div>
            </div>
            <div class="border-l-2 border-success pl-3 py-1">
              <div class="font-medium">员工培训计划</div>
              <div class="text-sm text-gray-500 dark:text-gray-400">下周三下午3点新功能培训</div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    // 检查登录状态
    function checkLoginStatus() {
      // 在实际应用中，这里应该检查cookie/localStorage中的登录令牌
      const isLoggedIn = localStorage.getItem('isLoggedIn');
      if (!isLoggedIn) {
        window.location.href = 'login.html';
      }
    }
    
    // 初始化图表
    document.addEventListener('DOMContentLoaded', function() {
      // 检查登录状态
      checkLoginStatus();
      
      // 用户增长图表
      const userChart = echarts.init(document.getElementById('user-growth-chart'));
      userChart.setOption({
        tooltip: {
          trigger: 'axis'
        },
        grid: {
          left: '3%',
          right: '4%',
          bottom: '3%',
          containLabel: true
        },
        xAxis: {
          type: 'category',
          boundaryGap: false,
          data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月']
        },
        yAxis: {
          type: 'value'
        },
        series: [
          {
            name: '新增用户',
            type: 'line',
            smooth: true,
            lineStyle: {
              width: 3,
              color: '#3b82f6'
            },
            data: [420, 532, 801, 934, 1290, 1330, 1520]
          }
        ]
      });
      
      // 销售图表
      const salesChart = echarts.init(document.getElementById('sales-chart'));
      salesChart.setOption({
        tooltip: {
          trigger: 'axis',
          axisPointer: {
            type: 'shadow'
          }
        },
        grid: {
          left: '3%',
          right: '4%',
          bottom: '3%',
          containLabel: true
        },
        xAxis: [
          {
            type: 'category',
            data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
            axisTick: {
              alignWithLabel: true
            }
          }
        ],
        yAxis: [
          {
            type: 'value'
          }
        ],
        series: [
          {
            name: '消息量',
            type: 'bar',
            barWidth: '60%',
            itemStyle: {
              color: '#10b981'
            },
            data: [132000, 140200, 143100, 153400, 169000, 183000, 202000]
          }
        ]
      });
      
      // 主题切换功能
      const themeToggle = document.querySelector('.theme-toggle');
      themeToggle.addEventListener('click', function() {
        const html = document.querySelector('html');
        if (html.classList.contains('dark')) {
          html.classList.remove('dark');
          localStorage.setItem('theme', 'light');
        } else {
          html.classList.add('dark');
          localStorage.setItem('theme', 'dark');
        }
        // 重新渲染ECharts图表以适应主题变化
        userChart.dispose();
        userChart.init(document.getElementById('user-growth-chart'));
        userChart.setOption(userChart.getOption());
        
        salesChart.dispose();
        salesChart.init(document.getElementById('sales-chart'));
        salesChart.setOption(salesChart.getOption());
      });
      
      // 检查本地存储的主题设置
      if (localStorage.getItem('theme') === 'dark') {
        document.querySelector('html').classList.add('dark');
      }
      
      // 窗口大小变化时重新渲染图表
      window.addEventListener('resize', function() {
        userChart.resize();
        salesChart.resize();
      });
      
      // 注销功能
      const logoutBtn = document.getElementById('logoutBtn');
      logoutBtn.addEventListener('click', function() {
        // 清除登录状态
        localStorage.removeItem('isLoggedIn');
        // 跳转到登录页面
        window.location.href = 'login.html';
      });
    });
  </script>

</body></html>