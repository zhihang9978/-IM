═══════════════════════════════════════════════════════════════
  完整实现路线图 - 达到100%符合客户端计划
═══════════════════════════════════════════════════════════════

目标: 完整实现《客户端计划.txt》所有要求
策略: 分10个阶段执行，每阶段独立提交
预计时间: 10-15小时，分多次会话完成

═══════════════════════════════════════════════════════════════
阶段划分（10个小阶段）
═══════════════════════════════════════════════════════════════

Session 6: 语音和搜索（2-3小时）
  阶段A1: 语音消息录制和发送
  阶段A2: 消息搜索功能

Session 7: 图片和视频（2-3小时）
  阶段B1: 图片选择和发送（相册+拍照）
  阶段B2: 视频录制和发送

Session 8: 文件和权限（2-3小时）
  阶段C1: 文件选择和MinIO上传
  阶段C2: 权限申请完整实现

Session 9: 高级消息功能（2-3小时）
  阶段D1: @提醒功能
  阶段D2: 阅后即焚

Session 10: 清理和优化（2-3小时）
  阶段E1: 移除所有TODO和违规注释
  阶段E2: 完善所有Activity功能
  阶段E3: 使用项目LOGO
  阶段E4: 添加埋点统计

═══════════════════════════════════════════════════════════════
阶段A1: 语音消息录制和发送（Session 6）
═══════════════════════════════════════════════════════════════

目标: 实现完整的语音消息功能

任务清单:
  1. 创建VoiceRecorder.kt（音频录制工具类）
  2. 添加录音权限申请
  3. 实现录音UI和动画
  4. 实现语音文件上传到MinIO
  5. 发送语音消息到聊天
  6. 显示语音消息气泡
  7. 播放语音消息

文件新增:
  - VoiceRecorder.kt（录音工具）
  - VoicePlayer.kt（播放工具）
  - item_message_voice.xml（语音消息布局）
  - PermissionHelper.kt（权限助手）

修改文件:
  - ChatActivity.kt（添加录音按钮逻辑）
  - activity_chat.xml（录音按钮和波纹动画）
  - ChatAdapter.kt（支持语音消息类型）

验收标准:
  ✅ 长按麦克风按钮能录音
  ✅ 录音时显示波纹动画
  ✅ 松开发送语音消息
  ✅ 语音消息显示时长
  ✅ 点击播放语音
  ✅ 无任何TODO

预计: 2小时，+400行代码

═══════════════════════════════════════════════════════════════
阶段A2: 消息搜索功能（Session 6）
═══════════════════════════════════════════════════════════════

目标: 实现完整的消息搜索

任务清单:
  1. 创建SearchActivity（搜索页面）
  2. 实现搜索UI和输入框
  3. 调用搜索API
  4. 显示搜索结果
  5. 点击跳转到对应消息

文件新增:
  - SearchActivity.kt
  - activity_search.xml
  - SearchResultAdapter.kt
  - item_search_result.xml

修改文件:
  - MainActivity.kt（添加搜索入口）

验收标准:
  ✅ 点击搜索按钮进入搜索页面
  ✅ 输入关键词能搜索
  ✅ 显示搜索结果列表
  ✅ 点击结果跳转到消息
  ✅ 无任何TODO

预计: 1小时，+300行代码

═══════════════════════════════════════════════════════════════
阶段B1: 图片选择和发送（Session 7）
═══════════════════════════════════════════════════════════════

目标: 实现完整的图片功能

任务清单:
  1. 实现更多选项面板（8个选项网格）
  2. 实现相册选择（权限申请+图片选择器）
  3. 实现拍照功能（权限申请+相机调用）
  4. 图片压缩
  5. 上传到MinIO
  6. 发送图片消息
  7. 图片预览Activity

文件新增:
  - dialog_more_options.xml（更多选项面板）
  - MediaPicker.kt（媒体选择器）
  - ImageCompressor.kt（图片压缩）
  - ImagePreviewActivity.kt（图片预览）
  - activity_image_preview.xml
  - item_message_image.xml（图片消息）

修改文件:
  - ChatActivity.kt（更多按钮逻辑）
  - activity_chat.xml（更多按钮）

验收标准:
  ✅ 点击+按钮显示8个选项
  ✅ 点击相册能选择图片
  ✅ 点击拍照能打开相机
  ✅ 图片自动压缩
  ✅ 上传到MinIO成功
  ✅ 发送图片消息
  ✅ 点击图片能预览
  ✅ 无任何TODO

预计: 2小时，+500行代码

═══════════════════════════════════════════════════════════════
阶段B2: 视频录制和发送（Session 7）
═══════════════════════════════════════════════════════════════

目标: 实现视频拍摄和发送

任务清单:
  1. 实现视频录制（权限+相机）
  2. 视频压缩
  3. 上传到MinIO
  4. 发送视频消息
  5. 视频播放

文件新增:
  - VideoRecorder.kt
  - VideoCompressor.kt
  - item_message_video.xml
  - VideoPlayerActivity.kt

预计: 1.5小时，+400行代码

═══════════════════════════════════════════════════════════════
阶段C1: 文件选择和上传（Session 8）
═══════════════════════════════════════════════════════════════

目标: 实现文件发送功能

任务清单:
  1. 实现文件选择器
  2. 集成MinIO SDK
  3. 实现文件上传进度
  4. 发送文件消息
  5. 文件预览

文件新增:
  - FilePicker.kt
  - MinIOUploader.kt
  - FileUploadHelper.kt
  - item_message_file.xml

预计: 2小时，+400行代码

═══════════════════════════════════════════════════════════════
阶段C2: 权限申请完整实现（Session 8）
═══════════════════════════════════════════════════════════════

目标: 规范的权限申请流程

任务清单:
  1. 创建PermissionHelper.kt
  2. 实现录音权限申请（友好提示）
  3. 实现相机权限申请
  4. 实现存储权限申请
  5. 权限拒绝后的友好提示
  6. 功能降级处理

文件新增:
  - PermissionHelper.kt
  - dialog_permission_rationale.xml

预计: 1小时，+200行代码

═══════════════════════════════════════════════════════════════
阶段D1: @提醒功能（Session 9）
═══════════════════════════════════════════════════════════════

目标: 实现消息@提醒

任务清单:
  1. 输入框@触发逻辑
  2. 成员选择器
  3. @消息发送
  4. @消息显示高亮

文件新增:
  - MentionHelper.kt
  - MemberSelectorDialog.kt

预计: 1.5小时，+300行代码

═══════════════════════════════════════════════════════════════
阶段D2: 阅后即焚（Session 9）
═══════════════════════════════════════════════════════════════

目标: 实现阅后即焚功能

任务清单:
  1. 发送时标记为阅后即焚
  2. 查看后倒计时
  3. 自动删除消息

文件新增:
  - BurnAfterReadHelper.kt

预计: 1小时，+200行代码

═══════════════════════════════════════════════════════════════
阶段E1: 移除所有TODO（Session 10）
═══════════════════════════════════════════════════════════════

目标: 移除21处违规注释

任务清单:
  1. 逐个文件移除TODO
  2. 确保注释移除后功能仍可运行
  3. 移除"功能待实现"等描述

影响文件: 13个

预计: 1小时

═══════════════════════════════════════════════════════════════
阶段E2: 完善所有Activity（Session 10）
═══════════════════════════════════════════════════════════════

目标: 完善ReportActivity、AddFriendActivity等

任务清单:
  1. ReportActivity完整三步骤流程
  2. AddFriendActivity完整搜索和添加
  3. 所有设置项实际功能

预计: 1.5小时，+400行代码

═══════════════════════════════════════════════════════════════
阶段E3: 使用项目LOGO（Session 10）
═══════════════════════════════════════════════════════════════

目标: 品牌标识统一

任务清单:
  1. 将项目LOGO.png转换为多个尺寸
  2. 替换应用图标
  3. 在About页面使用LOGO

预计: 30分钟

═══════════════════════════════════════════════════════════════
阶段E4: 埋点统计（Session 10）
═══════════════════════════════════════════════════════════════

目标: 实现用户行为统计

任务清单:
  1. 创建AnalyticsHelper.kt
  2. 统计用户活跃时段
  3. 统计功能使用频率
  4. 数据只显示在后台

预计: 1小时，+200行代码

═══════════════════════════════════════════════════════════════
执行策略
═══════════════════════════════════════════════════════════════

分4次会话执行:
  Session 6: 阶段A1+A2（语音+搜索）
  Session 7: 阶段B1+B2（图片+视频）
  Session 8: 阶段C1+C2（文件+权限）
  Session 9-10: 阶段D1+D2+E1+E2+E3+E4（高级功能+清理+优化）

每次会话:
  - 独立提交
  - 充分测试
  - 避免上下文溢出
  - 保证代码质量

总预计:
  - 时间: 10-15小时
  - 代码: +3,000行
  - 文件: +20个
  - 符合度: 100%

═══════════════════════════════════════════════════════════════
质量保证
═══════════════════════════════════════════════════════════════

每个阶段完成后验证:
  1. 功能实际可用（不是占位符）
  2. 无TODO注释
  3. 无"功能待实现"等描述
  4. 所有按钮有实际功能
  5. 权限申请规范
  6. 错误处理完善
  7. 符合MVVM架构
  8. 100%使用dp单位

最终验收:
  1. 对照客户端计划逐条检查
  2. 所有功能实际可用
  3. 代码可编译运行
  4. 符合度达到100%

═══════════════════════════════════════════════════════════════
Session 6 详细计划（下次会话）
═══════════════════════════════════════════════════════════════

阶段A1: 语音消息（2小时）

1. 创建VoiceRecorder.kt
   - MediaRecorder初始化
   - 开始/停止录音
   - 生成音频文件
   - 计算录音时长

2. 添加录音权限
   - AndroidManifest添加RECORD_AUDIO权限
   - 运行时权限申请
   - 权限拒绝提示

3. 实现录音UI
   - 长按麦克风开始录音
   - 显示录音波纹动画
   - 显示"松开发送"提示
   - 上滑取消录音

4. 语音上传和发送
   - 上传音频到MinIO
   - 调用发送消息API（type=voice）
   - 显示语音消息气泡

5. 语音播放
   - MediaPlayer播放
   - 显示播放进度
   - 播放完成回调

文件清单:
  - VoiceRecorder.kt（新增）
  - VoicePlayer.kt（新增）
  - PermissionHelper.kt（新增）
  - item_message_voice_sent.xml（新增）
  - item_message_voice_received.xml（新增）
  - ChatActivity.kt（修改，添加录音逻辑）
  - ChatAdapter.kt（修改，支持语音消息）

代码行数: +400行

阶段A2: 消息搜索（1小时）

1. 创建SearchActivity
   - 搜索框
   - 搜索历史
   - 搜索结果列表

2. 搜索逻辑
   - 本地数据库搜索
   - 或调用搜索API
   - 高亮关键词

3. 结果跳转
   - 点击结果定位到消息

文件清单:
  - SearchActivity.kt（新增）
  - activity_search.xml（新增）
  - SearchResultAdapter.kt（新增）
  - MainActivity.kt（修改，添加搜索入口）

代码行数: +300行

Session 6总计: +700行代码

═══════════════════════════════════════════════════════════════
准备就绪
═══════════════════════════════════════════════════════════════

计划已制定，准备分10个阶段完成。

下次会话（Session 6）将执行:
  - 阶段A1: 语音消息
  - 阶段A2: 消息搜索

预计Session 6-10全部完成后:
  ✅ 所有客户端计划要求的功能
  ✅ 0个TODO
  ✅ 0个占位符
  ✅ 100%符合客户端计划

═══════════════════════════════════════════════════════════════

