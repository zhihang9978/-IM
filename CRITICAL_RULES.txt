═══════════════════════════════════════════════════════════════
  ⚠️⚠️⚠️ 关键规则 - 每次对话必读 ⚠️⚠️⚠️
═══════════════════════════════════════════════════════════════

创建时间: 2025-10-17
优先级: 最高（必须遵守）

═══════════════════════════════════════════════════════════════
🚫 禁止操作（违反会导致严重后果）
═══════════════════════════════════════════════════════════════

❌ 禁止1：修改 android-chat-master/ 目录下的任何文件
   - 不使用 search_replace
   - 不使用 write
   - 不使用 delete_file
   - 不使用 edit_notebook

❌ 禁止2：在 android-chat-master/ 目录下执行 git 操作
   - 不执行 git add android-chat-master/
   - 不执行 git commit 涉及 android-chat-master/
   - 不执行任何修改 android-chat-master/ 的命令

❌ 禁止3：修复或改进 android-chat-master/ 的代码
   - 即使发现BUG也不修复
   - 即使发现不规范也不改进
   - 该目录仅作参考，保持原样

═══════════════════════════════════════════════════════════════
✅ 允许操作（正确的工作方式）
═══════════════════════════════════════════════════════════════

✅ 允许1：读取 android-chat-master/ 文件
   - read_file android-chat-master/uikit/src/main/res/layout/*.xml
   - read_file android-chat-master/uikit/src/main/java/**/*.java
   - list_dir android-chat-master/
   - grep 在 android-chat-master/ 中搜索

✅ 允许2：复制资源从 android-chat-master/ 到 apps/android/
   - copy android-chat-master/.../*.png → apps/android/.../
   - 提取布局结构并在 apps/android/ 中重新创建
   - 参考代码逻辑并在 apps/android/ 中实现

✅ 允许3：分析和学习 android-chat-master/ 的实现
   - 研究布局结构
   - 学习逻辑实现
   - 理解设计模式
   - 作为实现参考

═══════════════════════════════════════════════════════════════
📁 目录职责划分
═══════════════════════════════════════════════════════════════

【android-chat-master/】野火IM源码
  角色: 只读参考源
  用途: 提取UI资源、学习逻辑实现
  操作: 只读、只复制、只参考
  禁止: 修改、提交、修复

【apps/android/】蓝信IM源码
  角色: 实现目标
  用途: 所有UI和逻辑的实现位置
  操作: 创建、修改、提交
  要求: 完整复刻野火IM的设计和功能

【其他目录】
  temp-wildfire-ui/: 临时备份（不使用）
  packages/: 共享包（必要时修改）
  apps/admin-web/: 后台管理（不涉及）
  apps/backend/: 后端服务（不涉及）

═══════════════════════════════════════════════════════════════
🔍 检查清单（每次操作前确认）
═══════════════════════════════════════════════════════════════

执行文件操作前检查：
□ 路径是否在 apps/android/ 下？
□ 如果是 android-chat-master/，是否只读操作？
□ 是否要修改 android-chat-master/？ → ❌ 停止！

执行Git操作前检查：
□ git add 的路径是否都在 apps/android/ 下？
□ 是否包含 android-chat-master/？ → ❌ 停止！
□ 提交信息是否清晰标注阶段？

创建新文件前检查：
□ 目标路径是 apps/android/app/src/...？
□ 不是 android-chat-master/...？ → ✅ 继续

═══════════════════════════════════════════════════════════════
📋 正确的工作流程示例
═══════════════════════════════════════════════════════════════

✅ 正确示例1：提取布局
步骤1: read_file: android-chat-master/uikit/src/main/res/layout/conversation_item_audio_send.xml
步骤2: 分析布局结构
步骤3: write: apps/android/app/src/main/res/layout/item_message_voice_sent_wildfire.xml
步骤4: git add apps/android/app/src/main/res/layout/item_message_voice_sent_wildfire.xml
步骤5: git commit -m "..."

✅ 正确示例2：复制图标
步骤1: copy android-chat-master/.../icon.png → apps/android/.../icon.png
步骤2: git add apps/android/.../icon.png
步骤3: git commit -m "..."

✅ 正确示例3：参考逻辑实现
步骤1: read_file: android-chat-master/.../ConversationInputPanel.java
步骤2: 分析状态管理逻辑
步骤3: 在 apps/android/app/src/main/java/com/lanxin/im/... 中创建类似实现
步骤4: git add apps/android/...
步骤5: git commit -m "..."

❌ 错误示例（绝对禁止）：
步骤X: search_replace: android-chat-master/uikit/.../xxx.xml → ❌ 停止！
步骤X: write: android-chat-master/... → ❌ 停止！
步骤X: git add android-chat-master/... → ❌ 停止！

═══════════════════════════════════════════════════════════════
💾 记忆强化（防止遗忘）
═══════════════════════════════════════════════════════════════

如果AI在下次对话中：
1. 尝试修改 android-chat-master/ 文件 → 立即停止，重新规划
2. 尝试提交 android-chat-master/ 文件 → 立即停止，撤销操作
3. 发现 android-chat-master/ 有问题 → 忽略，不修复
4. 想要改进 android-chat-master/ 代码 → 忽略，只参考

正确做法：
→ 所有实现都在 apps/android/ 目录
→ android-chat-master/ 永远只读
→ 复制资源后在 apps/android/ 修改
→ 参考逻辑后在 apps/android/ 实现

═══════════════════════════════════════════════════════════════
🎯 下次对话自检问题
═══════════════════════════════════════════════════════════════

开始工作前问自己：
1. 我要修改的文件路径是什么？
   → 如果包含 android-chat-master/，停止！
   
2. 我要 git add 什么文件？
   → 检查每个路径，确保都在 apps/android/
   
3. 我是否在修复 android-chat-master/ 的代码？
   → 如果是，停止！只参考，不修复

4. 所有新文件是否都在 apps/android/ 下？
   → 必须是！

═══════════════════════════════════════════════════════════════
📊 本次对话遵守情况检查
═══════════════════════════════════════════════════════════════

检查项目：
✅ 所有新建文件都在 apps/android/ 下
✅ 所有修改都在 apps/android/ 下
✅ 所有 git commit 只涉及 apps/android/ 和根目录文档
✅ android-chat-master/ 只用于 read_file 和 copy 源
✅ 无任何 android-chat-master/ 文件被修改
✅ 无任何 android-chat-master/ 文件被提交

遵守情况: 100% ✅

═══════════════════════════════════════════════════════════════

