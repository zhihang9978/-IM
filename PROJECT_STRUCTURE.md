# ğŸ“ è“ä¿¡IMé¡¹ç›®ç»“æ„è¯´æ˜

**é‡è¦**: è¯·ä»”ç»†é˜…è¯»ï¼Œé¿å…æ··æ·†é¡¹ç›®ç›®å½•

---

## ğŸ¯ æ ¸å¿ƒé¡¹ç›®ç›®å½•

### âœ… apps/ - çœŸå®é¡¹ç›®ä»£ç ï¼ˆæ‰€æœ‰å¼€å‘å·¥ä½œåœ¨è¿™é‡Œï¼‰

```
apps/
â”œâ”€â”€ backend/                    â† Goåç«¯æœåŠ¡ï¼ˆä¸»è¦ä¿®æ”¹ï¼‰
â”‚   â”œâ”€â”€ cmd/server/main.go     â† æœåŠ¡å…¥å£
â”‚   â”œâ”€â”€ internal/              â† ä¸šåŠ¡ä»£ç 
â”‚   â”‚   â”œâ”€â”€ api/              â† APIå±‚ï¼ˆ10ä¸ªhandlerï¼‰
â”‚   â”‚   â”œâ”€â”€ dao/              â† æ•°æ®è®¿é—®å±‚ï¼ˆ8ä¸ªDAOï¼‰
â”‚   â”‚   â”œâ”€â”€ service/          â† ä¸šåŠ¡é€»è¾‘å±‚ï¼ˆ5ä¸ªserviceï¼‰
â”‚   â”‚   â”œâ”€â”€ model/            â† æ•°æ®æ¨¡å‹ï¼ˆ8ä¸ªmodelï¼‰
â”‚   â”‚   â”œâ”€â”€ middleware/       â† ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ websocket/        â† WebSocket
â”‚   â”‚   â””â”€â”€ pkg/              â† å·¥å…·åŒ…
â”‚   â”œâ”€â”€ migrations/           â† æ•°æ®åº“è¿ç§»ï¼ˆ15ä¸ªï¼‰
â”‚   â”œâ”€â”€ config/               â† é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ pkg/                  â† å¤–éƒ¨åŒ…ï¼ˆKafkaã€COSç­‰ï¼‰
â”‚
â”œâ”€â”€ android/                    â† Kotlin Androidå®¢æˆ·ç«¯ï¼ˆä¸»è¦ä¿®æ”¹ï¼‰
â”‚   â”œâ”€â”€ app/src/main/java/com/lanxin/im/
â”‚   â”‚   â”œâ”€â”€ data/             â† æ•°æ®å±‚
â”‚   â”‚   â”‚   â”œâ”€â”€ local/       â† æœ¬åœ°æ•°æ®åº“ï¼ˆRoomï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ remote/      â† ç½‘ç»œAPIï¼ˆRetrofitï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ model/       â† æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ repository/  â† æ•°æ®ä»“åº“
â”‚   â”‚   â”œâ”€â”€ ui/               â† UIå±‚ï¼ˆMVVMï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/        â† èŠå¤©ç•Œé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ conversation/â† ä¼šè¯åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ contact/     â† è”ç³»äºº
â”‚   â”‚   â”‚   â””â”€â”€ ...          â† å…¶ä»–ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ trtc/             â† éŸ³è§†é¢‘é€šè¯
â”‚   â”‚   â””â”€â”€ utils/            â† å·¥å…·ç±»
â”‚   â”œâ”€â”€ app/src/main/res/     â† èµ„æºæ–‡ä»¶
â”‚   â””â”€â”€ build.gradle.kts      â† Gradleé…ç½®
â”‚
â””â”€â”€ admin-web/                  â† Reactç®¡ç†åå°
    â”œâ”€â”€ src/                   â† Reactç»„ä»¶
    â””â”€â”€ package.json          â† NPMä¾èµ–
```

---

## âš ï¸ éé¡¹ç›®ç›®å½•ï¼ˆä»…ä¾›å‚è€ƒï¼‰

### âŒ android-chat-master/ - èµ„æºæå–ä»“åº“ï¼ˆä¸è¦ä¿®æ”¹ï¼‰

```
android-chat-master/           â† âš ï¸ ä¸æ˜¯å®é™…é¡¹ç›®ï¼
â”œâ”€â”€ uikit/                     â† UIç»„ä»¶åº“ï¼ˆå‚è€ƒï¼‰
â”œâ”€â”€ emojilibrary/              â† è¡¨æƒ…åº“ï¼ˆå‚è€ƒï¼‰
â”œâ”€â”€ imagepicker/               â† å›¾ç‰‡é€‰æ‹©å™¨ï¼ˆå‚è€ƒï¼‰
â”œâ”€â”€ cameraview/                â† ç›¸æœºç»„ä»¶ï¼ˆå‚è€ƒï¼‰
â””â”€â”€ ...                        â† å…¶ä»–UIç»„ä»¶

ç”¨é€”ï¼š
- æå–å›¾æ ‡ã€UIç»„ä»¶ç­‰èµ„æº
- å‚è€ƒUIè®¾è®¡å’Œå®ç°
- ä¸å‚ä¸å®é™…ç¼–è¯‘å’Œè¿è¡Œ

âš ï¸ è­¦å‘Šï¼š
- ä¸è¦åœ¨è¿™ä¸ªç›®å½•ä¿®æ”¹ä»£ç 
- ä¸è¦å°†è¿™ä¸ªç›®å½•å½“ä½œAndroidé¡¹ç›®
- å®é™…Androidé¡¹ç›®åœ¨ apps/android/
```

### âŒ temp-wildfire-ui/ - ä¸´æ—¶æ–‡ä»¶ï¼ˆå¿½ç•¥ï¼‰

```
temp-wildfire-ui/              â† ä¸´æ—¶å¤‡ä»½
â””â”€â”€ (android-chat-masterçš„å‰¯æœ¬)

ç”¨é€”ï¼š
- ä¸´æ—¶å¤‡ä»½
- å¯ä»¥åˆ é™¤

âš ï¸ ä¸æ˜¯é¡¹ç›®ä»£ç 
```

---

## ğŸ“‹ é˜¶æ®µ5ä¿®æ”¹çš„æ­£ç¡®æ–‡ä»¶

### âœ… å·²æ­£ç¡®ä¿®æ”¹çš„Androidæ–‡ä»¶ï¼ˆ3ä¸ªï¼‰

æ‰€æœ‰ä¿®æ”¹éƒ½åœ¨ **apps/android/** ç›®å½•ä¸‹ï¼š

1. **apps/android/app/src/main/java/com/lanxin/im/data/remote/ApiService.kt**
   - âœ… æ·»åŠ 9ä¸ªç¾¤ç»„APIå®šä¹‰
   - âœ… æ·»åŠ 1ä¸ªç¦»çº¿æ¶ˆæ¯APIå®šä¹‰
   - âœ… æ·»åŠ æ‰€æœ‰æ•°æ®ç±»

2. **apps/android/app/src/main/java/com/lanxin/im/data/remote/WebSocketClient.kt**
   - âœ… æ·»åŠ ç¦»çº¿æ¶ˆæ¯æ‹‰å–é€»è¾‘
   - âœ… ä¿®æ”¹æ„é€ å‡½æ•°æ”¯æŒä¾èµ–æ³¨å…¥
   - âœ… æ·»åŠ fetchOfflineMessagesæ–¹æ³•

3. **apps/android/app/src/main/java/com/lanxin/im/ui/chat/ChatViewModel.kt**
   - âœ… æ·»åŠ æ¶ˆæ¯å»é‡é€»è¾‘
   - âœ… é˜²æ­¢é‡å¤æ˜¾ç¤º

**éªŒè¯**: âœ… æ‰€æœ‰ä¿®æ”¹åœ¨æ­£ç¡®ä½ç½®ï¼Œæ— linté”™è¯¯

---

## ğŸ¯ é¡¹ç›®ç¼–è¯‘å’Œè¿è¡Œ

### åç«¯ï¼ˆapps/backendï¼‰

```bash
cd apps/backend

# ç¼–è¯‘
go build -o lanxin-im cmd/server/main.go

# è¿è¡Œ
./lanxin-im

# æˆ–ç›´æ¥è¿è¡Œ
go run cmd/server/main.go
```

### Androidï¼ˆapps/androidï¼‰

```bash
cd apps/android

# ç¼–è¯‘
./gradlew assembleDebug

# ç”ŸæˆAPKè·¯å¾„
# app/build/outputs/apk/debug/app-debug.apk
```

### ç®¡ç†åå°ï¼ˆapps/admin-webï¼‰

```bash
cd apps/admin-web

# å®‰è£…ä¾èµ–
npm install

# è¿è¡Œ
npm run dev
```

---

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

### apps/backendï¼ˆGoåç«¯ï¼‰

```
æ–‡ä»¶ç»Ÿè®¡:
- APIå±‚: 10ä¸ªhandler
- Serviceå±‚: 5ä¸ªservice
- DAOå±‚: 8ä¸ªDAO
- Modelå±‚: 8ä¸ªmodel
- è¿ç§»æ–‡ä»¶: 15ä¸ªï¼ˆupï¼‰+ 11ä¸ªï¼ˆdownï¼‰

ä»£ç è¡Œæ•°:
- æ€»è®¡: ~15,000è¡Œ
- æœ¬æ¬¡æ–°å¢: ~2,500è¡Œ
- æœ¬æ¬¡ä¿®æ”¹: ~600è¡Œ
```

### apps/androidï¼ˆKotlinå®¢æˆ·ç«¯ï¼‰

```
æ–‡ä»¶ç»Ÿè®¡:
- æ€»æ–‡ä»¶: ~60ä¸ªKotlinæ–‡ä»¶
- Activity/Fragment: ~15ä¸ª
- ViewModel: ~8ä¸ª
- Repository: ~3ä¸ª
- DAO: ~5ä¸ª

ä»£ç è¡Œæ•°:
- æ€»è®¡: ~8,000è¡Œ
- æœ¬æ¬¡æ–°å¢: ~150è¡Œ
- æœ¬æ¬¡ä¿®æ”¹: ~50è¡Œ
```

### apps/admin-webï¼ˆReactåå°ï¼‰

```
æ–‡ä»¶ç»Ÿè®¡:
- ç»„ä»¶: ~15ä¸ª
- é¡µé¢: ~10ä¸ª
- æœåŠ¡: ~3ä¸ª

ä»£ç è¡Œæ•°:
- æ€»è®¡: ~3,000è¡Œ
- æœªä¿®æ”¹
```

---

## âš ï¸ é‡è¦æé†’

### ä¸è¦æ··æ·†çš„ç›®å½•

| ç›®å½• | ç”¨é€” | æ˜¯å¦ä¿®æ”¹ |
|------|------|---------|
| **apps/android/** | âœ… çœŸå®Androidé¡¹ç›® | âœ… æ˜¯ |
| **android-chat-master/** | âŒ ä»…ä¾›å‚è€ƒ | âŒ å¦ |
| **apps/backend/** | âœ… çœŸå®åç«¯é¡¹ç›® | âœ… æ˜¯ |
| **temp-wildfire-ui/** | âŒ ä¸´æ—¶æ–‡ä»¶ | âŒ å¦ |

### å¼€å‘æ—¶çš„æ­£ç¡®åšæ³•

**âœ… æ­£ç¡®**:
```bash
# ä¿®æ”¹Androidä»£ç 
cd apps/android
code .

# ä¿®æ”¹åç«¯ä»£ç 
cd apps/backend
code .
```

**âŒ é”™è¯¯**:
```bash
# âŒ ä¸è¦åœ¨è¿™é‡Œæ”¹
cd android-chat-master
code .

# âŒ ä¸è¦åœ¨è¿™é‡Œæ”¹
cd temp-wildfire-ui
code .
```

---

## ğŸ“¦ Gitä»“åº“ç»“æ„

### ç‰ˆæœ¬æ§åˆ¶çš„ç›®å½•

```
âœ… apps/backend/          â† åç«¯ä»£ç ï¼Œå·²æ¨é€
âœ… apps/android/          â† Androidä»£ç ï¼Œå·²æ¨é€
âœ… apps/admin-web/        â† ç®¡ç†åå°ï¼Œå·²æ¨é€
âœ… *.md æ–‡æ¡£              â† æ‰€æœ‰æ–‡æ¡£ï¼Œå·²æ¨é€
âš ï¸ android-chat-master/  â† å‚è€ƒåº“ï¼Œæœªæ¨é€ï¼ˆ.gitignoreï¼‰
âš ï¸ temp-wildfire-ui/     â† ä¸´æ—¶æ–‡ä»¶ï¼Œæœªæ¨é€
```

---

## ğŸ¯ Devinéƒ¨ç½²æ—¶çš„æ­£ç¡®è·¯å¾„

### åœ¨æœåŠ¡å™¨ä¸Š

**åç«¯éƒ¨ç½²è·¯å¾„**:
```bash
/var/www/im-lanxin/apps/backend/        â† âœ… æ­£ç¡®
/var/www/im-lanxin/android-chat-master/ â† âŒ é”™è¯¯ï¼ˆè¿™ä¸æ˜¯é¡¹ç›®ï¼‰
```

**ç¼–è¯‘å’Œè¿è¡Œ**:
```bash
# âœ… æ­£ç¡®
cd /var/www/im-lanxin/apps/backend
go build cmd/server/main.go

# âŒ é”™è¯¯
cd /var/www/im-lanxin/android-chat-master
# è¿™é‡Œæ²¡æœ‰Goä»£ç ï¼
```

---

## ğŸ“ é¡¹ç›®æ¶æ„æ€»ç»“

### ä¸‰ä¸ªå­é¡¹ç›®

1. **apps/backend** - Goåç«¯
   - æŠ€æœ¯æ ˆ: Go + Gin + GORM + Redis + Kafka
   - åŠŸèƒ½: 45ä¸ªAPIï¼ŒWebSocketï¼ŒéŸ³è§†é¢‘
   - çŠ¶æ€: âœ… å·²ä¿®å¤å¹¶éƒ¨ç½²

2. **apps/android** - Kotlinå®¢æˆ·ç«¯
   - æŠ€æœ¯æ ˆ: Kotlin + MVVM + Retrofit + Room
   - åŠŸèƒ½: IMèŠå¤©ï¼Œç¾¤ç»„ï¼Œé€šè¯
   - çŠ¶æ€: âœ… å·²ä¿®æ”¹å¹¶æ¨é€

3. **apps/admin-web** - Reactç®¡ç†åå°
   - æŠ€æœ¯æ ˆ: React + TypeScript + Vite
   - åŠŸèƒ½: ç”¨æˆ·ç®¡ç†ï¼Œæ•°æ®ç»Ÿè®¡
   - çŠ¶æ€: âœ… æœªä¿®æ”¹ï¼ˆåŠŸèƒ½å®Œæ•´ï¼‰

### è¾…åŠ©ç›®å½•

- **android-chat-master/** - UIèµ„æºå‚è€ƒåº“ï¼ˆä¸å‚ä¸ç¼–è¯‘ï¼‰
- **temp-wildfire-ui/** - ä¸´æ—¶å¤‡ä»½ï¼ˆå¯åˆ é™¤ï¼‰
- **packages/** - Monorepoé…ç½®ï¼ˆæœªä½¿ç”¨ï¼‰

---

## ğŸ‰ æ€»ç»“

### âœ… é¡¹ç›®ç»“æ„æ¸…æ™°

**å®é™…é¡¹ç›®**ï¼ˆ3ä¸ªï¼‰:
- âœ… apps/backend - åç«¯
- âœ… apps/android - Android
- âœ… apps/admin-web - ç®¡ç†åå°

**å‚è€ƒèµ„æº**ï¼ˆ2ä¸ªï¼‰:
- âš ï¸ android-chat-master - UIå‚è€ƒ
- âš ï¸ temp-wildfire-ui - ä¸´æ—¶å¤‡ä»½

### âœ… æ‰€æœ‰ä¿®æ”¹åœ¨æ­£ç¡®ä½ç½®

æœ¬æ¬¡ä¿®å¤æ¶‰åŠçš„æ‰€æœ‰æ–‡ä»¶éƒ½åœ¨ `apps/` ç›®å½•ä¸‹ï¼š
- âœ… åç«¯21ä¸ªæ–‡ä»¶ï¼ˆapps/backend/ï¼‰
- âœ… Android 3ä¸ªæ–‡ä»¶ï¼ˆapps/android/ï¼‰
- âœ… æ— è¯¯ä¿®æ”¹å…¶ä»–ç›®å½•

### âœ… é¡¹ç›®å·²æ­£ç¡®éƒ¨ç½²

Devinåœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²çš„æ˜¯ `apps/backend/`ï¼Œè¿™æ˜¯æ­£ç¡®çš„ï¼

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¶é—´**: 2025-10-18  
**ç”¨é€”**: æ˜ç¡®é¡¹ç›®ç»“æ„ï¼Œé¿å…ç›®å½•æ··æ·†

